!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=411)}([function(t,e,i){var n=i(5),r=i(37),o=i(28),s=i(27),a=i(36),u=function(t,e,i){var c,h,l,f,m=t&u.F,_=t&u.G,p=t&u.S,d=t&u.P,y=t&u.B,v=_?n:p?n[e]||(n[e]={}):(n[e]||{}).prototype,g=_?r:r[e]||(r[e]={}),b=g.prototype||(g.prototype={});for(c in _&&(i=e),i)l=((h=!m&&v&&void 0!==v[c])?v:i)[c],f=y&&h?a(l,n):d&&"function"==typeof l?a(Function.call,l):l,v&&s(v,c,l,t&u.U),g[c]!=l&&o(g,c,f),d&&b[c]!=l&&(b[c]=l)};n.core=r,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,i){var n="undefined"!=typeof DEBUG&&DEBUG,r="undefined"!=typeof ASSERT&&ASSERT;t.exports=a;var o=i(4),s=i(2);function a(t,e){if(!(this instanceof a))return new a(t,e);void 0===t?(this.x=0,this.y=0):"object"==typeof t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),r&&a.assert(this)}a.zero=function(){var t=Object.create(a.prototype);return t.x=0,t.y=0,t},a.neo=function(t,e){var i=Object.create(a.prototype);return i.x=t,i.y=e,i},a.clone=function(t,e){return r&&a.assert(t),r&&o.assert(!e),a.neo(t.x,t.y)},a.prototype.toString=function(){return JSON.stringify(this)},a.isValid=function(t){return t&&s.isFinite(t.x)&&s.isFinite(t.y)},a.assert=function(t){if(r&&!a.isValid(t))throw n&&o.debug(t),new Error("Invalid Vec2!")},a.prototype.clone=function(t){return a.clone(this,t)},a.prototype.setZero=function(){return this.x=0,this.y=0,this},a.prototype.set=function(t,e){return"object"==typeof t?(r&&a.assert(t),this.x=t.x,this.y=t.y):(r&&s.assert(t),r&&s.assert(e),this.x=t,this.y=e),this},a.prototype.wSet=function(t,e,i,n){r&&s.assert(t),r&&a.assert(e);var o=t*e.x,u=t*e.y;return void 0===i&&void 0===n||(r&&s.assert(i),r&&a.assert(n),o+=i*n.x,u+=i*n.y),this.x=o,this.y=u,this},a.prototype.add=function(t){return r&&a.assert(t),this.x+=t.x,this.y+=t.y,this},a.prototype.wAdd=function(t,e,i,n){r&&s.assert(t),r&&a.assert(e);var o=t*e.x,u=t*e.y;return void 0===i&&void 0===n||(r&&s.assert(i),r&&a.assert(n),o+=i*n.x,u+=i*n.y),this.x+=o,this.y+=u,this},a.prototype.wSub=function(t,e,i,n){r&&s.assert(t),r&&a.assert(e);var o=t*e.x,u=t*e.y;return void 0===i&&void 0===n||(r&&s.assert(i),r&&a.assert(n),o+=i*n.x,u+=i*n.y),this.x-=o,this.y-=u,this},a.prototype.sub=function(t){return r&&a.assert(t),this.x-=t.x,this.y-=t.y,this},a.prototype.mul=function(t){return r&&s.assert(t),this.x*=t,this.y*=t,this},a.prototype.length=function(){return a.lengthOf(this)},a.prototype.lengthSquared=function(){return a.lengthSquared(this)},a.prototype.normalize=function(){var t=this.length();if(t<s.EPSILON)return 0;var e=1/t;return this.x*=e,this.y*=e,t},a.lengthOf=function(t){return r&&a.assert(t),s.sqrt(t.x*t.x+t.y*t.y)},a.lengthSquared=function(t){return r&&a.assert(t),t.x*t.x+t.y*t.y},a.distance=function(t,e){r&&a.assert(t),r&&a.assert(e);var i=t.x-e.x,n=t.y-e.y;return s.sqrt(i*i+n*n)},a.distanceSquared=function(t,e){r&&a.assert(t),r&&a.assert(e);var i=t.x-e.x,n=t.y-e.y;return i*i+n*n},a.areEqual=function(t,e){return r&&a.assert(t),r&&a.assert(e),t==e||"object"==typeof e&&null!==e&&t.x==e.x&&t.y==e.y},a.skew=function(t){return r&&a.assert(t),a.neo(-t.y,t.x)},a.dot=function(t,e){return r&&a.assert(t),r&&a.assert(e),t.x*e.x+t.y*e.y},a.cross=function(t,e){return"number"==typeof e?(r&&a.assert(t),r&&s.assert(e),a.neo(e*t.y,-e*t.x)):"number"==typeof t?(r&&s.assert(t),r&&a.assert(e),a.neo(-t*e.y,t*e.x)):(r&&a.assert(t),r&&a.assert(e),t.x*e.y-t.y*e.x)},a.addCross=function(t,e,i){return"number"==typeof i?(r&&a.assert(e),r&&s.assert(i),a.neo(i*e.y+t.x,-i*e.x+t.y)):"number"==typeof e?(r&&s.assert(e),r&&a.assert(i),a.neo(-e*i.y+t.x,e*i.x+t.y)):void(r&&o.assert(!1))},a.add=function(t,e){return r&&a.assert(t),r&&a.assert(e),a.neo(t.x+e.x,t.y+e.y)},a.wAdd=function(t,e,i,n){var r=a.zero();return r.wAdd(t,e,i,n),r},a.sub=function(t,e){return r&&a.assert(t),r&&a.assert(e),a.neo(t.x-e.x,t.y-e.y)},a.mul=function(t,e){return"object"==typeof t?(r&&a.assert(t),r&&s.assert(e),a.neo(t.x*e,t.y*e)):"object"==typeof e?(r&&s.assert(t),r&&a.assert(e),a.neo(t*e.x,t*e.y)):void 0},a.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this},a.neg=function(t){return r&&a.assert(t),a.neo(-t.x,-t.y)},a.abs=function(t){return r&&a.assert(t),a.neo(s.abs(t.x),s.abs(t.y))},a.mid=function(t,e){return r&&a.assert(t),r&&a.assert(e),a.neo(.5*(t.x+e.x),.5*(t.y+e.y))},a.upper=function(t,e){return r&&a.assert(t),r&&a.assert(e),a.neo(s.max(t.x,e.x),s.max(t.y,e.y))},a.lower=function(t,e){return r&&a.assert(t),r&&a.assert(e),a.neo(s.min(t.x,e.x),s.min(t.y,e.y))},a.prototype.clamp=function(t){var e=this.x*this.x+this.y*this.y;if(e>t*t){var i=s.invSqrt(e);this.x*=i*t,this.y*=i*t}return this},a.clamp=function(t,e){return(t=a.neo(t.x,t.y)).clamp(e),t}},function(t,e,i){var n="undefined"!=typeof DEBUG&&DEBUG,r="undefined"!=typeof ASSERT&&ASSERT,o=i(4),s=i(15),a=Math,u=t.exports=s(a);u.EPSILON=1e-9,u.isFinite=function(t){return"number"==typeof t&&isFinite(t)&&!isNaN(t)},u.assert=function(t){if(r&&!u.isFinite(t))throw n&&o.debug(t),new Error("Invalid Number!")},u.invSqrt=function(t){return 1/a.sqrt(t)},u.nextPowerOfTwo=function(t){return t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,(t|=t>>16)+1},u.isPowerOfTwo=function(t){return t>0&&0==(t&t-1)},u.mod=function(t,e,i){return void 0===e?(i=1,e=0):void 0===i&&(i=e,e=0),i>e?(t=(t-e)%(i-e))+(t<0?i:e):(t=(t-i)%(e-i))+(t<=0?e:i)},u.clamp=function(t,e,i){return t<e?e:t>i?i:t},u.random=function(t,e){return void 0===t?(e=1,t=0):void 0===e&&(e=t,t=0),t==e?t:a.random()*(e-t)+t}},function(t,e,i){var n=i(7);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){var i="undefined"!=typeof DEBUG&&DEBUG,n="undefined"!=typeof ASSERT&&ASSERT;e.debug=function(){i&&console.log.apply(console,arguments)},e.assert=function(t,e,i){if(n&&!t)throw i&&console.log(i),new Error(e)}},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,i){var n="undefined"!=typeof DEBUG&&DEBUG,r="undefined"!=typeof ASSERT&&ASSERT;t.exports=u;var o=i(4),s=i(1),a=i(2);function u(t){if(!(this instanceof u))return new u(t);"number"==typeof t?this.setAngle(t):"object"==typeof t?this.set(t):this.setIdentity()}u.neo=function(t){var e=Object.create(u.prototype);return e.setAngle(t),e},u.clone=function(t){r&&u.assert(t);var e=Object.create(u.prototype);return e.s=t.s,e.c=t.c,e},u.identity=function(t){var e=Object.create(u.prototype);return e.s=0,e.c=1,e},u.isValid=function(t){return t&&a.isFinite(t.s)&&a.isFinite(t.c)},u.assert=function(t){if(r&&!u.isValid(t))throw n&&o.debug(t),new Error("Invalid Rot!")},u.prototype.setIdentity=function(){this.s=0,this.c=1},u.prototype.set=function(t){"object"==typeof t?(r&&u.assert(t),this.s=t.s,this.c=t.c):(r&&a.assert(t),this.s=a.sin(t),this.c=a.cos(t))},u.prototype.setAngle=function(t){r&&a.assert(t),this.s=a.sin(t),this.c=a.cos(t)},u.prototype.getAngle=function(){return a.atan2(this.s,this.c)},u.prototype.getXAxis=function(){return s.neo(this.c,this.s)},u.prototype.getYAxis=function(){return s.neo(-this.s,this.c)},u.mul=function(t,e){if(r&&u.assert(t),"c"in e&&"s"in e){r&&u.assert(e);var i=u.identity();return i.s=t.s*e.c+t.c*e.s,i.c=t.c*e.c-t.s*e.s,i}if("x"in e&&"y"in e)return r&&s.assert(e),s.neo(t.c*e.x-t.s*e.y,t.s*e.x+t.c*e.y)},u.mulSub=function(t,e,i){var n=t.c*(e.x-i.x)-t.s*(e.y-i.y),r=t.s*(e.x-i.y)+t.c*(e.y-i.y);return s.neo(n,r)},u.mulT=function(t,e){if("c"in e&&"s"in e){r&&u.assert(e);var i=u.identity();return i.s=t.c*e.s-t.s*e.c,i.c=t.c*e.c+t.s*e.s,i}if("x"in e&&"y"in e)return r&&s.assert(e),s.neo(t.c*e.x+t.s*e.y,-t.s*e.x+t.c*e.y)}},function(t,e){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;var i=e;i.maxManifoldPoints=2,i.maxPolygonVertices=12,i.aabbExtension=.1,i.aabbMultiplier=2,i.linearSlop=.005,i.linearSlopSquared=i.linearSlop*i.linearSlop,i.angularSlop=2/180*Math.PI,i.polygonRadius=2*i.linearSlop,i.maxSubSteps=8,i.maxTOIContacts=32,i.maxTOIIterations=20,i.maxDistnceIterations=20,i.velocityThreshold=1,i.maxLinearCorrection=.2,i.maxAngularCorrection=8/180*Math.PI,i.maxTranslation=2,i.maxTranslationSquared=i.maxTranslation*i.maxTranslation,i.maxRotation=.5*Math.PI,i.maxRotationSquared=i.maxRotation*i.maxRotation,i.baumgarte=.2,i.toiBaugarte=.75,i.timeToSleep=.5,i.linearSleepTolerance=.01,i.linearSleepToleranceSqr=Math.pow(i.linearSleepTolerance,2),i.angularSleepTolerance=2/180*Math.PI,i.angularSleepToleranceSqr=Math.pow(i.angularSleepTolerance,2)},function(t,e,i){var n="undefined"!=typeof DEBUG&&DEBUG,r="undefined"!=typeof ASSERT&&ASSERT;t.exports=u;var o=i(4),s=i(1),a=i(8);function u(t,e){if(!(this instanceof u))return new u(t,e);this.p=s.zero(),this.q=a.identity(),void 0!==t&&this.p.set(t),void 0!==e&&this.q.set(e)}u.clone=function(t){var e=Object.create(u.prototype);return e.p=s.clone(t.p),e.q=a.clone(t.q),e},u.neo=function(t,e){var i=Object.create(u.prototype);return i.p=s.clone(t),i.q=a.clone(e),i},u.identity=function(){var t=Object.create(u.prototype);return t.p=s.zero(),t.q=a.identity(),t},u.prototype.setIdentity=function(){this.p.setZero(),this.q.setIdentity()},u.prototype.set=function(t,e){u.isValid(t)?(this.p.set(t.p),this.q.set(t.q)):(this.p.set(t),this.q.set(e))},u.isValid=function(t){return t&&s.isValid(t.p)&&a.isValid(t.q)},u.assert=function(t){if(r&&!u.isValid(t))throw n&&o.debug(t),new Error("Invalid Transform!")},u.mul=function(t,e){if(r&&u.assert(t),Array.isArray(e)){for(var i=[],n=0;n<e.length;n++)i[n]=u.mul(t,e[n]);return i}if("x"in e&&"y"in e){r&&s.assert(e);var o=t.q.c*e.x-t.q.s*e.y+t.p.x,c=t.q.s*e.x+t.q.c*e.y+t.p.y;return s.neo(o,c)}if("p"in e&&"q"in e){r&&u.assert(e);var h=u.identity();return h.q=a.mul(t.q,e.q),h.p=s.add(a.mul(t.q,e.p),t.p),h}},u.mulT=function(t,e){if(r&&u.assert(t),"x"in e&&"y"in e){r&&s.assert(e);var i=e.x-t.p.x,n=e.y-t.p.y,o=t.q.c*i+t.q.s*n,c=-t.q.s*i+t.q.c*n;return s.neo(o,c)}if("p"in e&&"q"in e){r&&u.assert(e);var h=u.identity();return h.q.set(a.mulT(t.q,e.q)),h.p.set(a.mulT(t.q,s.sub(e.p,t.p))),h}}},function(t,e,i){var n=i(94)("wks"),r=i(65),o=i(5).Symbol,s="function"==typeof o;(t.exports=function(t){return n[t]||(n[t]=s&&o[t]||(s?o:r)("Symbol."+t))}).store=n},function(t,e,i){var n=i(42),r=Math.min;t.exports=function(t){return t>0?r(n(t),9007199254740991):0}},function(t,e,i){var n=i(3),r=i(172),o=i(44),s=Object.defineProperty;e.f=i(14)?Object.defineProperty:function(t,e,i){if(n(t),e=o(e,!0),n(i),r)try{return s(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){t.exports=!i(6)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){if("function"==typeof Object.create)t.exports=function(t,e){return Object.create.call(Object,t,e)};else{function i(){}t.exports=function(t,e){if(e)throw Error("Second argument is not supported!");if("object"!=typeof t||null===t)throw Error("Invalid prototype!");return i.prototype=t,new i}}},function(t,e){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT,Object.prototype.propertyIsEnumerable;t.exports=function(t,e){for(var i in null!==t&&void 0!==t||(t={}),e)e.hasOwnProperty(i)&&void 0===t[i]&&(t[i]=e[i]);if("function"==typeof Object.getOwnPropertySymbols)for(var n=Object.getOwnPropertySymbols(e),r=0;r<n.length;r++){var o=n[r];e.propertyIsEnumerable(o)&&void 0===t[i]&&(t[o]=e[o])}return t}},function(t,e,i){var n=i(43);t.exports=function(t){return Object(n(t))}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=c;var r=i(4),o=i(2),s=i(1),a=i(8),u=i(10);function c(t,e){n&&r.assert(void 0===t),n&&r.assert(void 0===e),this.localCenter=s.zero(),this.c=s.zero(),this.a=0,this.alpha0=0,this.c0=s.zero(),this.a0=0}c.prototype.setTransform=function(t){var e=u.mul(t,this.localCenter);this.c.set(e),this.c0.set(e),this.a=t.q.getAngle(),this.a0=t.q.getAngle()},c.prototype.setLocalCenter=function(t,e){this.localCenter.set(t);var i=u.mul(e,this.localCenter);this.c.set(i),this.c0.set(i)},c.prototype.getTransform=function(t,e){e=void 0===e?0:e,t.q.setAngle((1-e)*this.a0+e*this.a),t.p.wSet(1-e,this.c0,e,this.c),t.p.sub(a.mul(t.q,this.localCenter))},c.prototype.advance=function(t){n&&r.assert(this.alpha0<1);var e=(t-this.alpha0)/(1-this.alpha0);this.c0.wSet(e,this.c,1-e,this.c0),this.a0=e*this.a+(1-e)*this.a0,this.alpha0=t},c.prototype.forward=function(){this.a0=this.a,this.c0.set(this.c)},c.prototype.normalize=function(){var t=o.mod(this.a0,-o.PI,+o.PI);this.a-=this.a0-t,this.a0=t},c.prototype.clone=function(){var t=new c;return t.localCenter.set(this.localCenter),t.alpha0=this.alpha0,t.a0=this.a0,t.a=this.a,t.c0.set(this.c0),t.c.set(this.c),t},c.prototype.set=function(t){this.localCenter.set(t.localCenter),this.alpha0=t.alpha0,this.a0=t.a0,this.a=t.a,this.c0.set(t.c0),this.c.set(t.c)}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,i){var n="undefined"!=typeof DEBUG&&DEBUG,r="undefined"!=typeof ASSERT&&ASSERT;t.exports=a;var o=i(4),s=i(2);function a(t,e,i){if(!(this instanceof a))return new a(t,e,i);void 0===t?(this.x=0,this.y=0,this.z=0):"object"==typeof t?(this.x=t.x,this.y=t.y,this.z=t.z):(this.x=t,this.y=e,this.z=i),r&&a.assert(this)}a.prototype.toString=function(){return JSON.stringify(this)},a.isValid=function(t){return t&&s.isFinite(t.x)&&s.isFinite(t.y)&&s.isFinite(t.z)},a.assert=function(t){if(r&&!a.isValid(t))throw n&&o.debug(t),new Error("Invalid Vec3!")},a.prototype.setZero=function(){return this.x=0,this.y=0,this.z=0,this},a.prototype.set=function(t,e,i){return this.x=t,this.y=e,this.z=i,this},a.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},a.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},a.prototype.mul=function(t){return this.x*=t,this.y*=t,this.z*=t,this},a.areEqual=function(t,e){return t==e||"object"==typeof e&&null!==e&&t.x==e.x&&t.y==e.y&&t.z==e.z},a.dot=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},a.cross=function(t,e){return new a(t.y*e.z-t.z*e.y,t.z*e.x-t.x*e.z,t.x*e.y-t.y*e.x)},a.add=function(t,e){return new a(t.x+e.x,t.y+e.y,t.z+e.z)},a.sub=function(t,e){return new a(t.x-e.x,t.y-e.y,t.z-e.z)},a.mul=function(t,e){return new a(e*t.x,e*t.y,e*t.z)},a.prototype.neg=function(t){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},a.neg=function(t){return new a(-t.x,-t.y,-t.z)}},function(t,e,i){var n="undefined"!=typeof DEBUG&&DEBUG,r="undefined"!=typeof ASSERT&&ASSERT;t.exports=a;var o=i(4),s=(i(2),i(1));function a(t,e,i,n){"object"==typeof t&&null!==t?(this.ex=s.clone(t),this.ey=s.clone(e)):"number"==typeof t?(this.ex=s.neo(t,i),this.ey=s.neo(e,n)):(this.ex=s.zero(),this.ey=s.zero())}a.prototype.toString=function(){return JSON.stringify(this)},a.isValid=function(t){return t&&s.isValid(t.ex)&&s.isValid(t.ey)},a.assert=function(t){if(r&&!a.isValid(t))throw n&&o.debug(t),new Error("Invalid Mat22!")},a.prototype.set=function(t,e,i,n){"number"==typeof t&&"number"==typeof e&&"number"==typeof i&&"number"==typeof n?(this.ex.set(t,i),this.ey.set(e,n)):"object"==typeof t&&"object"==typeof e?(this.ex.set(t),this.ey.set(e)):"object"==typeof t?(r&&a.assert(t),this.ex.set(t.ex),this.ey.set(t.ey)):r&&o.assert(!1)},a.prototype.setIdentity=function(){this.ex.x=1,this.ey.x=0,this.ex.y=0,this.ey.y=1},a.prototype.setZero=function(){this.ex.x=0,this.ey.x=0,this.ex.y=0,this.ey.y=0},a.prototype.getInverse=function(){var t=this.ex.x,e=this.ey.x,i=this.ex.y,n=this.ey.y,r=t*n-e*i;0!=r&&(r=1/r);var o=new a;return o.ex.x=r*n,o.ey.x=-r*e,o.ex.y=-r*i,o.ey.y=r*t,o},a.prototype.solve=function(t){r&&s.assert(t);var e=this.ex.x,i=this.ey.x,n=this.ex.y,o=this.ey.y,a=e*o-i*n;0!=a&&(a=1/a);var u=s.zero();return u.x=a*(o*t.x-i*t.y),u.y=a*(e*t.y-n*t.x),u},a.mul=function(t,e){if(e&&"x"in e&&"y"in e){r&&s.assert(e);var i=t.ex.x*e.x+t.ey.x*e.y,n=t.ex.y*e.x+t.ey.y*e.y;return s.neo(i,n)}if(e&&"ex"in e&&"ey"in e)return r&&a.assert(e),new a(s.mul(t,e.ex),s.mul(t,e.ey));r&&o.assert(!1)},a.mulT=function(t,e){return e&&"x"in e&&"y"in e?(r&&s.assert(e),s.neo(s.dot(e,t.ex),s.dot(e,t.ey))):e&&"ex"in e&&"ey"in e?(r&&a.assert(e),new a(s.neo(s.dot(t.ex,e.ex),s.dot(t.ey,e.ex)),s.neo(s.dot(t.ex,e.ey),s.dot(t.ey,e.ey)))):void(r&&o.assert(!1))},a.abs=function(t){return r&&a.assert(t),new a(s.abs(t.ex),s.abs(t.ey))},a.add=function(t,e){return r&&a.assert(t),r&&a.assert(e),new a(s.add(t.ex+e.ex),s.add(t.ey+e.ey))}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=o;var n=i(1),r=i(8);function o(){this.c=n.zero(),this.a=0}o.prototype.getTransform=function(t,e){return t.q.set(this.a),t.p.set(n.sub(this.c,r.mul(t.q,e))),t}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=function(){this.v=n.zero(),this.w=0};var n=i(1)},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=s;var r=i(4);function o(){this.other=null,this.joint=null,this.prev=null,this.next=null}function s(t,e,i){e=t.bodyA||e,i=t.bodyB||i,n&&r.assert(e),n&&r.assert(i),n&&r.assert(e!=i),this.m_type="unknown-joint",this.m_bodyA=e,this.m_bodyB=i,this.m_index=0,this.m_collideConnected=!!t.collideConnected,this.m_prev=null,this.m_next=null,this.m_edgeA=new o,this.m_edgeB=new o,this.m_islandFlag=!1,this.m_userData=t.userData}s.prototype.isActive=function(){return this.m_bodyA.isActive()&&this.m_bodyB.isActive()},s.prototype.getType=function(){return this.m_type},s.prototype.getBodyA=function(){return this.m_bodyA},s.prototype.getBodyB=function(){return this.m_bodyB},s.prototype.getNext=function(){return this.m_next},s.prototype.getUserData=function(){return this.m_userData},s.prototype.setUserData=function(t){this.m_userData=t},s.prototype.getCollideConnected=function(){return this.m_collideConnected},s.prototype.getAnchorA=function(){},s.prototype.getAnchorB=function(){},s.prototype.getReactionForce=function(t){},s.prototype.getReactionTorque=function(t){},s.prototype.shiftOrigin=function(t){},s.prototype.initVelocityConstraints=function(t){},s.prototype.solveVelocityConstraints=function(t){},s.prototype.solvePositionConstraints=function(t){}},function(t,e,i){var n="undefined"!=typeof DEBUG&&DEBUG,r="undefined"!=typeof ASSERT&&ASSERT;t.exports=u;var o=i(4),s=(i(2),i(1)),a=i(20);function u(t,e,i){"object"==typeof t&&null!==t?(this.ex=a.clone(t),this.ey=a.clone(e),this.ez=a.clone(i)):(this.ex=a(),this.ey=a(),this.ez=a())}u.prototype.toString=function(){return JSON.stringify(this)},u.isValid=function(t){return t&&a.isValid(t.ex)&&a.isValid(t.ey)&&a.isValid(t.ez)},u.assert=function(t){if(r&&!u.isValid(t))throw n&&o.debug(t),new Error("Invalid Mat33!")},u.prototype.setZero=function(){return this.ex.setZero(),this.ey.setZero(),this.ez.setZero(),this},u.prototype.solve33=function(t){var e=a.dot(this.ex,a.cross(this.ey,this.ez));0!=e&&(e=1/e);var i=new a;return i.x=e*a.dot(t,a.cross(this.ey,this.ez)),i.y=e*a.dot(this.ex,a.cross(t,this.ez)),i.z=e*a.dot(this.ex,a.cross(this.ey,t)),i},u.prototype.solve22=function(t){var e=this.ex.x,i=this.ey.x,n=this.ex.y,r=this.ey.y,o=e*r-i*n;0!=o&&(o=1/o);var a=s.zero();return a.x=o*(r*t.x-i*t.y),a.y=o*(e*t.y-n*t.x),a},u.prototype.getInverse22=function(t){var e=this.ex.x,i=this.ey.x,n=this.ex.y,r=this.ey.y,o=e*r-i*n;0!=o&&(o=1/o),t.ex.x=o*r,t.ey.x=-o*i,t.ex.z=0,t.ex.y=-o*n,t.ey.y=o*e,t.ey.z=0,t.ez.x=0,t.ez.y=0,t.ez.z=0},u.prototype.getSymInverse33=function(t){var e=a.dot(this.ex,a.cross(this.ey,this.ez));0!=e&&(e=1/e);var i=this.ex.x,n=this.ey.x,r=this.ez.x,o=this.ey.y,s=this.ez.y,u=this.ez.z;t.ex.x=e*(o*u-s*s),t.ex.y=e*(r*s-n*u),t.ex.z=e*(n*s-r*o),t.ey.x=t.ex.y,t.ey.y=e*(i*u-r*r),t.ey.z=e*(r*n-i*s),t.ez.x=t.ex.z,t.ez.y=t.ey.z,t.ez.z=e*(i*o-n*n)},u.mul=function(t,e){if(r&&u.assert(t),e&&"z"in e&&"y"in e&&"x"in e){r&&a.assert(e);var i=t.ex.x*e.x+t.ey.x*e.y+t.ez.x*e.z,n=t.ex.y*e.x+t.ey.y*e.y+t.ez.y*e.z,c=t.ex.z*e.x+t.ey.z*e.y+t.ez.z*e.z;return new a(i,n,c)}if(e&&"y"in e&&"x"in e){r&&s.assert(e);i=t.ex.x*e.x+t.ey.x*e.y,n=t.ex.y*e.x+t.ey.y*e.y;return s.neo(i,n)}r&&o.assert(!1)},u.add=function(t,e){return r&&u.assert(t),r&&u.assert(e),new a(t.x+e.x,t.y+e.y,t.z+e.z)}},function(t,e,i){var n=i(0),r=i(6),o=i(43),s=/"/g,a=function(t,e,i,n){var r=String(o(t)),a="<"+e;return""!==i&&(a+=" "+i+'="'+String(n).replace(s,"&quot;")+'"'),a+">"+r+"</"+e+">"};t.exports=function(t,e){var i={};i[t]=e(a),n(n.P+n.F*r(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",i)}},function(t,e,i){var n=i(5),r=i(28),o=i(32),s=i(65)("src"),a=Function.toString,u=(""+a).split("toString");i(37).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,i,a){var c="function"==typeof i;c&&(o(i,"name")||r(i,"name",e)),t[e]!==i&&(c&&(o(i,s)||r(i,s,t[e]?""+t[e]:u.join(String(e)))),t===n?t[e]=i:a?t[e]?t[e]=i:r(t,e,i):(delete t[e],r(t,e,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[s]||a.call(this)})},function(t,e,i){var n=i(13),r=i(66);t.exports=i(14)?function(t,e,i){return n.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){var n=i(32),r=i(17),o=i(122)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),n(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,i){var n=i(74),r=i(66),o=i(31),s=i(44),a=i(32),u=i(172),c=Object.getOwnPropertyDescriptor;e.f=i(14)?c:function(t,e){if(t=o(t),e=s(e,!0),u)try{return c(t,e)}catch(t){}if(a(t,e))return r(!n.f.call(t,e),t[e])}},function(t,e,i){var n=i(75),r=i(43);t.exports=function(t){return n(r(t))}},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=n;i(2);function n(){this.m_type,this.m_radius}n.isValid=function(t){return!!t},n.prototype.getRadius=function(){return this.m_radius},n.prototype.getType=function(){return this.m_type},n.prototype._clone=function(){},n.prototype.getChildCount=function(){},n.prototype.testPoint=function(t,e){},n.prototype.rayCast=function(t,e,i,n){},n.prototype.computeAABB=function(t,e,i){},n.prototype.computeMass=function(t,e){},n.prototype.computeDistanceProxy=function(t){}},function(t,e,i){"use strict";var n=i(6);t.exports=function(t,e){return!!t&&n(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e,i){var n=i(19);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){var i=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=i)},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT,i(9);var n=i(2),r=i(1);function o(t,e){if(!(this instanceof o))return new o(t,e);this.lowerBound=r.zero(),this.upperBound=r.zero(),"object"==typeof t&&this.lowerBound.set(t),"object"==typeof e&&this.upperBound.set(e)}t.exports=o,o.prototype.isValid=function(){return o.isValid(this)},o.isValid=function(t){var e=r.sub(t.upperBound,t.lowerBound);return e.x>=0&&e.y>=0&&r.isValid(t.lowerBound)&&r.isValid(t.upperBound)},o.prototype.getCenter=function(){return r.neo(.5*(this.lowerBound.x+this.upperBound.x),.5*(this.lowerBound.y+this.upperBound.y))},o.prototype.getExtents=function(){return r.neo(.5*(this.upperBound.x-this.lowerBound.x),.5*(this.upperBound.y-this.lowerBound.y))},o.prototype.getPerimeter=function(){return 2*(this.upperBound.x-this.lowerBound.x+this.upperBound.y-this.lowerBound.y)},o.prototype.combine=function(t,e){e=e||this,this.lowerBound.set(n.min(t.lowerBound.x,e.lowerBound.x),n.min(t.lowerBound.y,e.lowerBound.y)),this.upperBound.set(n.max(t.upperBound.x,e.upperBound.x),n.max(t.upperBound.y,e.upperBound.y))},o.prototype.combinePoints=function(t,e){this.lowerBound.set(n.min(t.x,e.x),n.min(t.y,e.y)),this.upperBound.set(n.max(t.x,e.x),n.max(t.y,e.y))},o.prototype.set=function(t){this.lowerBound.set(t.lowerBound.x,t.lowerBound.y),this.upperBound.set(t.upperBound.x,t.upperBound.y)},o.prototype.contains=function(t){var e=!0;return e=(e=(e=(e=e&&this.lowerBound.x<=t.lowerBound.x)&&this.lowerBound.y<=t.lowerBound.y)&&t.upperBound.x<=this.upperBound.x)&&t.upperBound.y<=this.upperBound.y},o.prototype.extend=function(t){o.extend(this,t)},o.extend=function(t,e){t.lowerBound.x-=e,t.lowerBound.y-=e,t.upperBound.x+=e,t.upperBound.y+=e},o.testOverlap=function(t,e){var i=e.lowerBound.x-t.upperBound.x,n=t.lowerBound.x-e.upperBound.x,r=e.lowerBound.y-t.upperBound.y,o=t.lowerBound.y-e.upperBound.y;return!(i>0||r>0||n>0||o>0)},o.areEqual=function(t,e){return r.areEqual(t.lowerBound,e.lowerBound)&&r.areEqual(t.upperBound,e.upperBound)},o.diff=function(t,e){var i=n.max(0,n.min(t.upperBound.x,e.upperBound.x)-n.max(e.lowerBound.x,t.lowerBound.x)),r=n.max(0,n.min(t.upperBound.y,e.upperBound.y)-n.max(e.lowerBound.y,t.lowerBound.y));return(t.upperBound.x-t.lowerBound.x)*(t.upperBound.y-t.lowerBound.y)+(e.upperBound.x-e.lowerBound.x)*(e.upperBound.y-e.lowerBound.y)-i*r},o.prototype.rayCast=function(t,e){for(var i=-1/0,o=1/0,s=e.p1,a=r.sub(e.p2,e.p1),u=r.abs(a),c=r.zero(),h="x";null!==h;h="x"===h?"y":null)if(u.x<n.EPSILON){if(s[h]<this.lowerBound[h]||this.upperBound[h]<s[h])return!1}else{var l=1/a[h],f=(this.lowerBound[h]-s[h])*l,m=(this.upperBound[h]-s[h])*l,_=-1;if(f>m){var p=f;f=m,m=p,_=1}if(f>i&&(c.setZero(),c[h]=_,i=f),i>(o=n.min(o,m)))return!1}return!(i<0||e.maxFraction<i)&&(t.fraction=i,t.normal=c,!0)},o.prototype.toString=function(){return JSON.stringify(this)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(45);var s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments[2];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.toLowerCase(),this._type=i.toLowerCase(),(0,o.setProperties)(this,n),this._game=null,this._gameObject=null,this._enabled=!0}return r(t,[{key:"onAdd",value:function(t,e){}},{key:"onPreprocess",value:function(t){}},{key:"onProcess",value:function(t){}},{key:"onPostprocess",value:function(t){}},{key:"onPredraw",value:function(t,e){}},{key:"onDraw",value:function(t,e){}},{key:"onPostdraw",value:function(t,e){}},{key:"onRemove",value:function(){}},{key:"isType",value:function(t){return this.type===t}},{key:"addedToGameObject",value:function(t,e){return this._game=t,this._gameObject=e,void 0===this.onAdd||null===this.onAdd||this.onAdd(t,e)}},{key:"removedFromGameObject",value:function(){this.onRemove()}},{key:"preprocess",value:function(t){this._enabled&&this.onPreprocess(t)}},{key:"process",value:function(t){this._enabled&&this.onProcess(t)}},{key:"postprocess",value:function(t){this._enabled&&this.onPostprocess(t)}},{key:"predraw",value:function(t,e){this._enabled&&!this.isType("camera")&&this.onPredraw(t,e)}},{key:"draw",value:function(t,e){this._enabled&&!this.isType("camera")&&this.onDraw(t,e)}},{key:"postdraw",value:function(t,e){this._enabled&&!this.isType("camera")&&this.onPostdraw(t,e)}},{key:"toJSON",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return(0,o.deepSerialize)(this,["_game","_gameObject"].concat(r),t,e,i,n)}},{key:"name",get:function(){return this._name}},{key:"type",get:function(){return this._type}},{key:"game",get:function(){return this._game}},{key:"gameObject",get:function(){return this._gameObject}},{key:"enabled",get:function(){return this._enabled},set:function(t){this._enabled=t}}],[{key:"fromJSON",value:function(e){var i="string"==typeof e?JSON.parse(e):e,n=t.components[i.name];if(n)return n.fromJSON(e)}},{key:"addComponent",value:function(e){t.components[e.componentName]=e}},{key:"validateParam",value:function(t,e,i){var r=e[t];if(void 0===r||null===r)return!1;if(!Object.keys(i).includes(t))throw"Error: invalid param (doesn't exist): name="+t;var o=!1;if(i[t]instanceof Array)o=i[t].includes(r);else{if(null===i[t])o=!0;else if("string"==typeof i[t])o=(void 0===r?"undefined":n(r))===i[t];else if(o=r instanceof i[t],i[t].fromJSON&&("object"===(void 0===r?"undefined":n(r))||"string"==typeof r))return e[t]=i[t].fromJSON(r),!0;o||(o=n(r.toString().toLowerCase())===i[t].name.toLowerCase())}return o}},{key:"createComponent",value:function(e,i){!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e=e.toLowerCase(),void 0!==i&&null!==i||(i={}),(0,o.loadFunctions)(i);var n=t.components[e];if(n)return new n(i);console.log("Could not find component: "+e)}},{key:"registerComponent",value:function(e,i){t.components[e]=i}}]),t}();e.default=s,s.components={}},function(t,e,i){var n=i(36),r=i(75),o=i(17),s=i(12),a=i(105);t.exports=function(t,e){var i=1==t,u=2==t,c=3==t,h=4==t,l=6==t,f=5==t||l,m=e||a;return function(e,a,_){for(var p,d,y=o(e),v=r(y),g=n(a,_,3),b=s(v.length),x=0,w=i?m(e,b):u?m(e,0):void 0;b>x;x++)if((f||x in v)&&(d=g(p=v[x],x,y),t))if(i)w[x]=d;else if(d)switch(t){case 3:return!0;case 5:return p;case 6:return x;case 2:w.push(p)}else if(h)return!1;return l?-1:c||h?h:w}}},function(t,e,i){var n=i(0),r=i(37),o=i(6);t.exports=function(t,e){var i=(r.Object||{})[t]||Object[t],s={};s[t]=e(i),n(n.S+n.F*o(function(){i(1)}),"Object",s)}},function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,i){var n=i(7);t.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};exports.deepSerialize=deepSerialize,exports.setProperties=setProperties,exports.deserializeVariables=deserializeVariables,exports.replaceVariables=replaceVariables,exports.loadFunctions=loadFunctions;var _Shape=__webpack_require__(56),_Shape2=_interopRequireDefault(_Shape),_Point=__webpack_require__(49),_Point2=_interopRequireDefault(_Point),_Component=__webpack_require__(39),_Component2=_interopRequireDefault(_Component);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var IMMUTABLE_TYPES=[[_Shape2.default,[{type:"regularpolygon"},"numSides","diameter"],["type","vertices"]],[_Point2.default,["x","y"]]],SERIALIZABLE_TYPES=[[_Component2.default,["name","type","enabled"]]];function deepSerialize(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s="",a=function(t){return Object.keys(t).length+(t.functions?Object.keys(t.functions).length:0)};i&&n&&!r.functions&&(r.functions={}),i||o||console.warn("Serializing functions to JSON. These will be parsed with eval, leading to vulnerabilities. Use smartSerialize to avoid this.");for(var u=Object.keys(t),c=!1,h=0;h<Object.keys(t).length;h++)if(!e||!e.includes(u[h])){var l=t[u[h]];if(void 0!==l&&null!==l){var f,m="",_=!1;if(l instanceof Function){var p=l.toString(),d=p.split("\n");if(p="",d.forEach(function(t){p+=t.trim()}),p.includes("[native code]"))throw"Function contains native code: name="+u[h]+" val="+p;i?(!r.functions&&(r.functions={}),-1!=(f=Object.values(r.functions).indexOf(p))?m=(f=Object.keys(r.functions)[f]).toString():(f=a(r),r.functions["$"+f]=p,m="$"+f)):m=p.split('"').join('\\"'),_=!0}else if("string"==typeof l)m=l,_=!0;else if(l instanceof Array)m=deepSerialize(l,[],i,!1,r,!0);else if(l instanceof Object){if(i&&!u[h].includes("$")&&!u[h].includes("&"))for(var y=0;y<IMMUTABLE_TYPES.length;y++){var v=IMMUTABLE_TYPES[y][0];if(l instanceof v){var g=Object.values(r).find(function(t){return t instanceof Object&&t.equals&&t.equals(l)});g?m=f=Object.keys(r)[Object.values(r).indexOf(g)].replace("$","&"):(f=a(r),r["$"+f]=l,m="&"+f,_=!0),_=!0}}if(""===m)if(void 0===l.toJSON){if(l.__proto__&&l.__proto__.__proto__)continue;m=deepSerialize(l,[],i,!1,r,!0)}else m=l.toJSON(i,!1,r,!0)}else"number"==typeof l||"boolean"==typeof l?m=l.toString():(m=l.toString()).startsWith("[")||m.startsWith("{")||(_=!0);if(i&&!u[h].includes("$")&&u[h].includes("&"),c&&(s+=","),_&&(m='"'+m+'"'),t instanceof Array)s+=m;else if(t instanceof Object){s+='"'+(u[h].startsWith("_")?u[h].slice(1):u[h])+'":'+m}c=!0}}var b="";if(i&&n){if(Object.keys(r.functions).length>0){b="var functions = {";var x=!0;Object.keys(r.functions).forEach(function(t){x||(b+=","),b+=t+": "+r.functions[t],x=!1}),b+="};"}console.log(r),deepSerialize(r,[],!0,!1,r,!0),delete r.functions,s+=',"variables": '+deepSerialize(r,[],!0,!1,r,!0)}return t instanceof Array?s="["+s+"]":t instanceof Object&&(s="{"+s+"}"),i&&n?{json:s,functions:b}:s}function getPropertyDescriptor(t,e){var i;do{i=Object.getOwnPropertyDescriptor(t,e)}while(!i&&(t=Object.getPrototypeOf(t)));return i}function setProperties(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=Object.keys(e),r=0;r<n.length;r++)if("variables"!==n[r]&&!i.includes(n[r])){var o=e[n[r]];if(void 0!==o&&null!==o){o instanceof Function?function(){var e=o.toString();(o=o.bind(t)).toString=function(){return e}}():2==Object.keys(o).length&&void 0!==o.x&&void 0!==o.y&&(o=_Point2.default.from(o));var s=getPropertyDescriptor(t,n[r]);s&&s.get&&!s.set?t["_"+n[r]]=o:t[n[r]]=o}}return t}function deserializeVariables(obj){var functions=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};obj="string"==typeof obj?JSON.parse(obj):obj;var variableTypes={},variables={};return obj.variables=Object.assign(obj.variables,functions),obj.variables&&(Object.keys(obj.variables).forEach(function(variableName){if("string"==typeof obj.variables[variableName]&&obj.variables[variableName].startsWith("function")){var func;console.warn("Loading function '"+variableName+"' from String using eval. this will lead to vulnerabilities. Use smartSerialize to avoid this.");try{func=eval("(function(){"+obj.variables[variableName]+"})()")}catch(t){throw"Error creating function from JSON name="+obj.variables[variableName]+" val="+obj.variables[variableName]}variableTypes[variableName]={type:Function,value:func}}else if(obj.variables[variableName]instanceof Function){var func=functions[variableName];if(!func)throw"Could not find function: ";variableTypes[variableName]={type:Function,value:func}}else{var foundImmutable=!1;IMMUTABLE_TYPES.forEach(function(t){if(!foundImmutable){for(var e=t.slice(1),i=!1,n=0;n<e.length;n++){var r=!0;if(e[n].forEach(function(t){t instanceof Object?Object.keys(t).forEach(function(e){Object.keys(obj.variables[variableName]).includes(e)&&obj.variables[variableName][e]===t[e]||(r=!1)}):Object.keys(obj.variables[variableName]).includes(t)||(r=!1)}),i=r)break}return i?(variableTypes[variableName]={type:t[0],value:obj.variables[variableName]},void(foundImmutable=!0)):void 0}})}}),Object.keys(obj.variables).forEach(function(t){"variables"!==t&&"functions"!==t&&loadVariable(t,variables,variableTypes)}),delete obj.variables),{variables:variables,templates:variableTypes}}function loadVariable(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e[t])return e[t];var n=i[t];return n?(replaceVariables(n.value,{variables:e,templates:i}),n.type===Function?e[t]=n.value:e[t]=n.type.fromJSON(n.value),e[t]):(console.log("Error unknown variable: name="+t,i),null)}function replaceVariables(t,e){var i=e.variables,n=e.templates;n=0==Object.keys(n).length?{}:n,Object.keys(t).forEach(function(e){t[e]instanceof Object||t[e]instanceof Array?replaceVariables(t[e],{variables:i,templates:n}):"string"==typeof t[e]&&(t[e].startsWith("$")||t[e].startsWith("&"))&&(t[e]=loadVariable(t[e].replace("&","$"),i,n))})}function loadFunctions(params){var paramName=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(params){var param=paramName?params[paramName]:params;if(param)if("string"==typeof param&&param.startsWith("function")){var func;console.warn("Loading function '"+paramName+"' from String using eval. this will lead to vulnerabilities. Use smartSerialize to avoid this.");try{func=eval("(function(){return "+param+";})()")}catch(t){throw"Error creating function from String name="+paramName+" val="+param+"\n"+t}params[paramName]=func}else"object"===(void 0===param?"undefined":_typeof(param))&&Object.keys(param).forEach(function(t){loadFunctions(param,t)})}}},function(t,e,i){var n=i(151),r=i(0),o=i(94)("metadata"),s=o.store||(o.store=new(i(148))),a=function(t,e,i){var r=s.get(t);if(!r){if(!i)return;s.set(t,r=new n)}var o=r.get(e);if(!o){if(!i)return;r.set(e,o=new n)}return o};t.exports={store:s,map:a,has:function(t,e,i){var n=a(e,i,!1);return void 0!==n&&n.has(t)},get:function(t,e,i){var n=a(e,i,!1);return void 0===n?void 0:n.get(t)},set:function(t,e,i,n){a(i,n,!0).set(t,e)},keys:function(t,e){var i=a(t,e,!1),n=[];return i&&i.forEach(function(t,e){n.push(e)}),n},key:function(t){return void 0===t||"symbol"==typeof t?t:String(t)},exp:function(t){r(r.S,"Reflect",t)}}},function(t,e,i){"use strict";if(i(14)){var n=i(51),r=i(5),o=i(6),s=i(0),a=i(83),u=i(99),c=i(36),h=i(59),l=i(66),f=i(28),m=i(57),_=i(42),p=i(12),d=i(146),y=i(63),v=i(44),g=i(32),b=i(73),x=i(7),w=i(17),A=i(108),S=i(62),B=i(29),I=i(61).f,O=i(106),P=i(65),M=i(11),E=i(40),C=i(93),k=i(86),T=i(103),j=i(69),z=i(89),D=i(60),L=i(104),R=i(156),F=i(13),q=i(30),V=F.f,N=q.f,U=r.RangeError,G=r.TypeError,J=r.Uint8Array,W=Array.prototype,Y=u.ArrayBuffer,H=u.DataView,K=E(0),Z=E(2),X=E(3),$=E(4),Q=E(5),tt=E(6),et=C(!0),it=C(!1),nt=T.values,rt=T.keys,ot=T.entries,st=W.lastIndexOf,at=W.reduce,ut=W.reduceRight,ct=W.join,ht=W.sort,lt=W.slice,ft=W.toString,mt=W.toLocaleString,_t=M("iterator"),pt=M("toStringTag"),dt=P("typed_constructor"),yt=P("def_constructor"),vt=a.CONSTR,gt=a.TYPED,bt=a.VIEW,xt=E(1,function(t,e){return It(k(t,t[yt]),e)}),wt=o(function(){return 1===new J(new Uint16Array([1]).buffer)[0]}),At=!!J&&!!J.prototype.set&&o(function(){new J(1).set({})}),St=function(t,e){var i=_(t);if(i<0||i%e)throw U("Wrong offset!");return i},Bt=function(t){if(x(t)&&gt in t)return t;throw G(t+" is not a typed array!")},It=function(t,e){if(!(x(t)&&dt in t))throw G("It is not a typed array constructor!");return new t(e)},Ot=function(t,e){return Pt(k(t,t[yt]),e)},Pt=function(t,e){for(var i=0,n=e.length,r=It(t,n);n>i;)r[i]=e[i++];return r},Mt=function(t,e,i){V(t,e,{get:function(){return this._d[i]}})},Et=function(t){var e,i,n,r,o,s,a=w(t),u=arguments.length,h=u>1?arguments[1]:void 0,l=void 0!==h,f=O(a);if(void 0!=f&&!A(f)){for(s=f.call(a),n=[],e=0;!(o=s.next()).done;e++)n.push(o.value);a=n}for(l&&u>2&&(h=c(h,arguments[2],2)),e=0,i=p(a.length),r=It(this,i);i>e;e++)r[e]=l?h(a[e],e):a[e];return r},Ct=function(){for(var t=0,e=arguments.length,i=It(this,e);e>t;)i[t]=arguments[t++];return i},kt=!!J&&o(function(){mt.call(new J(1))}),Tt=function(){return mt.apply(kt?lt.call(Bt(this)):Bt(this),arguments)},jt={copyWithin:function(t,e){return R.call(Bt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return $(Bt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return L.apply(Bt(this),arguments)},filter:function(t){return Ot(this,Z(Bt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return Q(Bt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(Bt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){K(Bt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return it(Bt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return et(Bt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ct.apply(Bt(this),arguments)},lastIndexOf:function(t){return st.apply(Bt(this),arguments)},map:function(t){return xt(Bt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return at.apply(Bt(this),arguments)},reduceRight:function(t){return ut.apply(Bt(this),arguments)},reverse:function(){for(var t,e=Bt(this).length,i=Math.floor(e/2),n=0;n<i;)t=this[n],this[n++]=this[--e],this[e]=t;return this},some:function(t){return X(Bt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return ht.call(Bt(this),t)},subarray:function(t,e){var i=Bt(this),n=i.length,r=y(t,n);return new(k(i,i[yt]))(i.buffer,i.byteOffset+r*i.BYTES_PER_ELEMENT,p((void 0===e?n:y(e,n))-r))}},zt=function(t,e){return Ot(this,lt.call(Bt(this),t,e))},Dt=function(t){Bt(this);var e=St(arguments[1],1),i=this.length,n=w(t),r=p(n.length),o=0;if(r+e>i)throw U("Wrong length!");for(;o<r;)this[e+o]=n[o++]},Lt={entries:function(){return ot.call(Bt(this))},keys:function(){return rt.call(Bt(this))},values:function(){return nt.call(Bt(this))}},Rt=function(t,e){return x(t)&&t[gt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Ft=function(t,e){return Rt(t,e=v(e,!0))?l(2,t[e]):N(t,e)},qt=function(t,e,i){return!(Rt(t,e=v(e,!0))&&x(i)&&g(i,"value"))||g(i,"get")||g(i,"set")||i.configurable||g(i,"writable")&&!i.writable||g(i,"enumerable")&&!i.enumerable?V(t,e,i):(t[e]=i.value,t)};vt||(q.f=Ft,F.f=qt),s(s.S+s.F*!vt,"Object",{getOwnPropertyDescriptor:Ft,defineProperty:qt}),o(function(){ft.call({})})&&(ft=mt=function(){return ct.call(this)});var Vt=m({},jt);m(Vt,Lt),f(Vt,_t,Lt.values),m(Vt,{slice:zt,set:Dt,constructor:function(){},toString:ft,toLocaleString:Tt}),Mt(Vt,"buffer","b"),Mt(Vt,"byteOffset","o"),Mt(Vt,"byteLength","l"),Mt(Vt,"length","e"),V(Vt,pt,{get:function(){return this[gt]}}),t.exports=function(t,e,i,u){var c=t+((u=!!u)?"Clamped":"")+"Array",l="get"+t,m="set"+t,_=r[c],y=_||{},v=_&&B(_),g=!_||!a.ABV,w={},A=_&&_.prototype,O=function(t,i){V(t,i,{get:function(){return function(t,i){var n=t._d;return n.v[l](i*e+n.o,wt)}(this,i)},set:function(t){return function(t,i,n){var r=t._d;u&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),r.v[m](i*e+r.o,n,wt)}(this,i,t)},enumerable:!0})};g?(_=i(function(t,i,n,r){h(t,_,c,"_d");var o,s,a,u,l=0,m=0;if(x(i)){if(!(i instanceof Y||"ArrayBuffer"==(u=b(i))||"SharedArrayBuffer"==u))return gt in i?Pt(_,i):Et.call(_,i);o=i,m=St(n,e);var y=i.byteLength;if(void 0===r){if(y%e)throw U("Wrong length!");if((s=y-m)<0)throw U("Wrong length!")}else if((s=p(r)*e)+m>y)throw U("Wrong length!");a=s/e}else a=d(i),o=new Y(s=a*e);for(f(t,"_d",{b:o,o:m,l:s,e:a,v:new H(o)});l<a;)O(t,l++)}),A=_.prototype=S(Vt),f(A,"constructor",_)):o(function(){_(1)})&&o(function(){new _(-1)})&&z(function(t){new _,new _(null),new _(1.5),new _(t)},!0)||(_=i(function(t,i,n,r){var o;return h(t,_,c),x(i)?i instanceof Y||"ArrayBuffer"==(o=b(i))||"SharedArrayBuffer"==o?void 0!==r?new y(i,St(n,e),r):void 0!==n?new y(i,St(n,e)):new y(i):gt in i?Pt(_,i):Et.call(_,i):new y(d(i))}),K(v!==Function.prototype?I(y).concat(I(v)):I(y),function(t){t in _||f(_,t,y[t])}),_.prototype=A,n||(A.constructor=_));var P=A[_t],M=!!P&&("values"==P.name||void 0==P.name),E=Lt.values;f(_,dt,!0),f(A,gt,c),f(A,bt,!0),f(A,yt,_),(u?new _(1)[pt]==c:pt in A)||V(A,pt,{get:function(){return c}}),w[c]=_,s(s.G+s.W+s.F*(_!=y),w),s(s.S,c,{BYTES_PER_ELEMENT:e}),s(s.S+s.F*o(function(){y.of.call(_,1)}),c,{from:Et,of:Ct}),"BYTES_PER_ELEMENT"in A||f(A,"BYTES_PER_ELEMENT",e),s(s.P,c,jt),D(c),s(s.P+s.F*At,c,{set:Dt}),s(s.P+s.F*!M,c,Lt),n||A.toString==ft||(A.toString=ft),s(s.P+s.F*o(function(){new _(1).slice()}),c,{slice:zt}),s(s.P+s.F*(o(function(){return[1,2].toLocaleString()!=new _([1,2]).toLocaleString()})||!o(function(){A.toLocaleString.call([1,2])})),c,{toLocaleString:Tt}),j[c]=M?P:E,n||M||f(A,_t,E)}}else t.exports=function(){}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT,r=i(4),o=i(2),s=i(1),a=i(10),u=i(21),c=i(8),h=i(9),l=i(53),f=i(78);function m(t){this.contact=t,this.prev,this.next,this.other}function _(t,e,i,n,r){this.m_nodeA=new m(this),this.m_nodeB=new m(this),this.m_fixtureA=t,this.m_fixtureB=i,this.m_indexA=e,this.m_indexB=n,this.m_evaluateFcn=r,this.m_manifold=new l,this.m_prev=null,this.m_next=null,this.m_toi=1,this.m_toiCount=0,this.m_toiFlag=!1,this.m_friction=d(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction),this.m_restitution=y(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution),this.m_tangentSpeed=0,this.m_enabledFlag=!0,this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.v_points=[],this.v_normal=s.zero(),this.v_normalMass=new u,this.v_K=new u,this.v_pointCount,this.v_tangentSpeed,this.v_friction,this.v_restitution,this.v_invMassA,this.v_invMassB,this.v_invIA,this.v_invIB,this.p_localPoints=[],this.p_localNormal=s.zero(),this.p_localPoint=s.zero(),this.p_localCenterA=s.zero(),this.p_localCenterB=s.zero(),this.p_type,this.p_radiusA,this.p_radiusB,this.p_pointCount,this.p_invMassA,this.p_invMassB,this.p_invIA,this.p_invIB}function p(){this.rA=s.zero(),this.rB=s.zero(),this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.velocityBias=0}function d(t,e){return o.sqrt(t*e)}function y(t,e){return t>e?t:e}t.exports=_,_.prototype.initConstraint=function(t){var e=this.m_fixtureA,i=this.m_fixtureB,o=e.getShape(),a=i.getShape(),u=e.getBody(),c=i.getBody(),h=this.getManifold(),l=h.pointCount;n&&r.assert(l>0),this.v_invMassA=u.m_invMass,this.v_invMassB=c.m_invMass,this.v_invIA=u.m_invI,this.v_invIB=c.m_invI,this.v_friction=this.m_friction,this.v_restitution=this.m_restitution,this.v_tangentSpeed=this.m_tangentSpeed,this.v_pointCount=l,this.v_K.setZero(),this.v_normalMass.setZero(),this.p_invMassA=u.m_invMass,this.p_invMassB=c.m_invMass,this.p_invIA=u.m_invI,this.p_invIB=c.m_invI,this.p_localCenterA=s.clone(u.m_sweep.localCenter),this.p_localCenterB=s.clone(c.m_sweep.localCenter),this.p_radiusA=o.m_radius,this.p_radiusB=a.m_radius,this.p_type=h.type,this.p_localNormal=s.clone(h.localNormal),this.p_localPoint=s.clone(h.localPoint),this.p_pointCount=l;for(var f=0;f<l;++f){var m=h.points[f],_=this.v_points[f]=new p;t.warmStarting?(_.normalImpulse=t.dtRatio*m.normalImpulse,_.tangentImpulse=t.dtRatio*m.tangentImpulse):(_.normalImpulse=0,_.tangentImpulse=0),_.rA.setZero(),_.rB.setZero(),_.normalMass=0,_.tangentMass=0,_.velocityBias=0,this.p_localPoints[f]=s.clone(m.localPoint)}},_.prototype.getManifold=function(){return this.m_manifold},_.prototype.getWorldManifold=function(t){var e=this.m_fixtureA.getBody(),i=this.m_fixtureB.getBody(),n=this.m_fixtureA.getShape(),r=this.m_fixtureB.getShape();return this.m_manifold.getWorldManifold(t,e.getTransform(),n.m_radius,i.getTransform(),r.m_radius)},_.prototype.setEnabled=function(t){this.m_enabledFlag=!!t},_.prototype.isEnabled=function(){return this.m_enabledFlag},_.prototype.isTouching=function(){return this.m_touchingFlag},_.prototype.getNext=function(){return this.m_next},_.prototype.getFixtureA=function(){return this.m_fixtureA},_.prototype.getFixtureB=function(){return this.m_fixtureB},_.prototype.getChildIndexA=function(){return this.m_indexA},_.prototype.getChildIndexB=function(){return this.m_indexB},_.prototype.flagForFiltering=function(){this.m_filterFlag=!0},_.prototype.setFriction=function(t){this.m_friction=t},_.prototype.getFriction=function(){return this.m_friction},_.prototype.resetFriction=function(){this.m_friction=d(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction)},_.prototype.setRestitution=function(t){this.m_restitution=t},_.prototype.getRestitution=function(){return this.m_restitution},_.prototype.resetRestitution=function(){this.m_restitution=y(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)},_.prototype.setTangentSpeed=function(t){this.m_tangentSpeed=t},_.prototype.getTangentSpeed=function(){return this.m_tangentSpeed},_.prototype.evaluate=function(t,e,i){this.m_evaluateFcn(t,e,this.m_fixtureA,this.m_indexA,i,this.m_fixtureB,this.m_indexB)},_.prototype.update=function(t){this.m_enabledFlag=!0;var e=!1,i=this.m_touchingFlag,n=this.m_fixtureA.isSensor(),r=this.m_fixtureB.isSensor(),o=n||r,s=this.m_fixtureA.getBody(),a=this.m_fixtureB.getBody(),u=s.getTransform(),c=a.getTransform();if(o){var h=this.m_fixtureA.getShape(),m=this.m_fixtureB.getShape();e=f.testOverlap(h,this.m_indexA,m,this.m_indexB,u,c),this.m_manifold.pointCount=0}else{var _=this.m_manifold;this.m_manifold=new l,this.evaluate(this.m_manifold,u,c),e=this.m_manifold.pointCount>0;for(var p=0;p<this.m_manifold.pointCount;++p){var d=this.m_manifold.points[p];d.normalImpulse=0,d.tangentImpulse=0;for(var y=0;y<_.pointCount;++y){var v=_.points[y];if(v.id.key==d.id.key){d.normalImpulse=v.normalImpulse,d.tangentImpulse=v.tangentImpulse;break}}}e!=i&&(s.setAwake(!0),a.setAwake(!0))}this.m_touchingFlag=e,0==i&&1==e&&t&&t.beginContact(this),1==i&&0==e&&t&&t.endContact(this),0==o&&e&&t&&t.preSolve(this,_)},_.prototype.solvePositionConstraint=function(t){return this._solvePositionConstraint(t,!1)},_.prototype.solvePositionConstraintTOI=function(t,e,i){return this._solvePositionConstraint(t,!0,e,i)},_.prototype._solvePositionConstraint=function(t,e,i,n){var r=this.m_fixtureA,u=this.m_fixtureB,f=r.getBody(),m=u.getBody(),_=(f.c_velocity,m.c_velocity,f.c_position),p=m.c_position,d=s.clone(this.p_localCenterA),y=s.clone(this.p_localCenterB),v=0,g=0;e&&f!=i&&f!=n||(v=this.p_invMassA,g=this.p_invIA);var b=0,x=0;e&&m!=i&&m!=n||(b=this.p_invMassB,x=this.p_invIB);for(var w=s.clone(_.c),A=_.a,S=s.clone(p.c),B=p.a,I=0,O=0;O<this.p_pointCount;++O){var P,M,E,C=a.identity(),k=a.identity();switch(C.q.set(A),k.q.set(B),C.p=s.sub(w,c.mul(C.q,d)),k.p=s.sub(S,c.mul(k.q,y)),this.p_type){case l.e_circles:var T=a.mul(C,this.p_localPoint),j=a.mul(k,this.p_localPoints[0]);(P=s.sub(j,T)).normalize(),M=s.wAdd(.5,T,.5,j),E=s.dot(s.sub(j,T),P)-this.p_radiusA-this.p_radiusB;break;case l.e_faceA:P=c.mul(C.q,this.p_localNormal);var z=a.mul(C,this.p_localPoint),D=a.mul(k,this.p_localPoints[O]);E=s.dot(s.sub(D,z),P)-this.p_radiusA-this.p_radiusB,M=D;break;case l.e_faceB:P=c.mul(k.q,this.p_localNormal);z=a.mul(k,this.p_localPoint),D=a.mul(C,this.p_localPoints[O]);E=s.dot(s.sub(D,z),P)-this.p_radiusA-this.p_radiusB,M=D,P.mul(-1)}var L=s.sub(M,w),R=s.sub(M,S);I=o.min(I,E);var F=e?h.toiBaugarte:h.baumgarte,q=h.linearSlop,V=h.maxLinearCorrection,N=o.clamp(F*(E+q),-V,0),U=s.cross(L,P),G=s.cross(R,P),J=v+b+g*U*U+x*G*G,W=J>0?-N/J:0,Y=s.mul(W,P);w.wSub(v,Y),A-=g*s.cross(L,Y),S.wAdd(b,Y),B+=x*s.cross(R,Y)}return _.c.set(w),_.a=A,p.c.set(S),p.a=B,I},_.prototype.initVelocityConstraint=function(t){var e=this.m_fixtureA,i=this.m_fixtureB,o=e.getBody(),u=i.getBody(),l=o.c_velocity,f=u.c_velocity,m=o.c_position,_=u.c_position,p=this.p_radiusA,d=this.p_radiusB,y=this.getManifold(),v=this.v_invMassA,g=this.v_invMassB,b=this.v_invIA,x=this.v_invIB,w=s.clone(this.p_localCenterA),A=s.clone(this.p_localCenterB),S=s.clone(m.c),B=m.a,I=s.clone(l.v),O=l.w,P=s.clone(_.c),M=_.a,E=s.clone(f.v),C=f.w;n&&r.assert(y.pointCount>0);var k=a.identity(),T=a.identity();k.q.set(B),T.q.set(M),k.p.wSet(1,S,-1,c.mul(k.q,w)),T.p.wSet(1,P,-1,c.mul(T.q,A));var j=y.getWorldManifold(null,k,p,T,d);this.v_normal.set(j.normal);for(var z=0;z<this.v_pointCount;++z){var D=this.v_points[z];D.rA.set(s.sub(j.points[z],S)),D.rB.set(s.sub(j.points[z],P));var L=s.cross(D.rA,this.v_normal),R=s.cross(D.rB,this.v_normal),F=v+g+b*L*L+x*R*R;D.normalMass=F>0?1/F:0;var q=s.cross(this.v_normal,1),V=s.cross(D.rA,q),N=s.cross(D.rB,q),U=v+g+b*V*V+x*N*N;D.tangentMass=U>0?1/U:0,D.velocityBias=0;var G=s.dot(this.v_normal,E)+s.dot(this.v_normal,s.cross(C,D.rB))-s.dot(this.v_normal,I)-s.dot(this.v_normal,s.cross(O,D.rA));G<-h.velocityThreshold&&(D.velocityBias=-this.v_restitution*G)}if(2==this.v_pointCount&&t.blockSolve){var J=this.v_points[0],W=this.v_points[1],Y=s.cross(J.rA,this.v_normal),H=s.cross(J.rB,this.v_normal),K=s.cross(W.rA,this.v_normal),Z=s.cross(W.rB,this.v_normal),X=v+g+b*Y*Y+x*H*H,$=v+g+b*K*K+x*Z*Z,Q=v+g+b*Y*K+x*H*Z;X*X<1e3*(X*$-Q*Q)?(this.v_K.ex.set(X,Q),this.v_K.ey.set(Q,$),this.v_normalMass.set(this.v_K.getInverse())):this.v_pointCount=1}m.c.set(S),m.a=B,l.v.set(I),l.w=O,_.c.set(P),_.a=M,f.v.set(E),f.w=C},_.prototype.warmStartConstraint=function(t){for(var e=this.m_fixtureA,i=this.m_fixtureB,n=e.getBody(),r=i.getBody(),o=n.c_velocity,a=r.c_velocity,u=(n.c_position,r.c_position,this.v_invMassA),c=this.v_invIA,h=this.v_invMassB,l=this.v_invIB,f=s.clone(o.v),m=o.w,_=s.clone(a.v),p=a.w,d=this.v_normal,y=s.cross(d,1),v=0;v<this.v_pointCount;++v){var g=this.v_points[v],b=s.wAdd(g.normalImpulse,d,g.tangentImpulse,y);m-=c*s.cross(g.rA,b),f.wSub(u,b),p+=l*s.cross(g.rB,b),_.wAdd(h,b)}o.v.set(f),o.w=m,a.v.set(_),a.w=p},_.prototype.storeConstraintImpulses=function(t){for(var e=this.m_manifold,i=0;i<this.v_pointCount;++i)e.points[i].normalImpulse=this.v_points[i].normalImpulse,e.points[i].tangentImpulse=this.v_points[i].tangentImpulse},_.prototype.solveVelocityConstraint=function(t){var e=this.m_fixtureA.m_body,i=this.m_fixtureB.m_body,a=e.c_velocity,c=(e.c_position,i.c_velocity),h=(i.c_position,this.v_invMassA),l=this.v_invIA,f=this.v_invMassB,m=this.v_invIB,_=s.clone(a.v),p=a.w,d=s.clone(c.v),y=c.w,v=this.v_normal,g=s.cross(v,1),b=this.v_friction;n&&r.assert(1==this.v_pointCount||2==this.v_pointCount);for(var x=0;x<this.v_pointCount;++x){var w=this.v_points[x];(P=s.zero()).wAdd(1,d,1,s.cross(y,w.rB)),P.wSub(1,_,1,s.cross(p,w.rA));var A=s.dot(P,g)-this.v_tangentSpeed,S=w.tangentMass*-A,B=b*w.normalImpulse;S=(M=o.clamp(w.tangentImpulse+S,-B,B))-w.tangentImpulse,w.tangentImpulse=M;var I=s.mul(S,g);_.wSub(h,I),p-=l*s.cross(w.rA,I),d.wAdd(f,I),y+=m*s.cross(w.rB,I)}if(1==this.v_pointCount||0==t.blockSolve)for(var O=0;O<this.v_pointCount;++O){var P;w=this.v_points[O];(P=s.zero()).wAdd(1,d,1,s.cross(y,w.rB)),P.wSub(1,_,1,s.cross(p,w.rA));var M,E=s.dot(P,v);S=-w.normalMass*(E-w.velocityBias);S=(M=o.max(w.normalImpulse+S,0))-w.normalImpulse,w.normalImpulse=M;I=s.mul(S,v);_.wSub(h,I),p-=l*s.cross(w.rA,I),d.wAdd(f,I),y+=m*s.cross(w.rB,I)}else{var C=this.v_points[0],k=this.v_points[1],T=s.neo(C.normalImpulse,k.normalImpulse);n&&r.assert(T.x>=0&&T.y>=0);var j=s.zero().add(d).add(s.cross(y,C.rB)).sub(_).sub(s.cross(p,C.rA)),z=s.zero().add(d).add(s.cross(y,k.rB)).sub(_).sub(s.cross(p,k.rA)),D=s.dot(j,v),L=s.dot(z,v),R=s.neo(D-C.velocityBias,L-k.velocityBias);R.sub(u.mul(this.v_K,T));for(;;){var F=s.neg(u.mul(this.v_normalMass,R));if(F.x>=0&&F.y>=0){var q=s.sub(F,T),V=s.mul(q.x,v),N=s.mul(q.y,v);_.wSub(h,V,h,N),p-=l*(s.cross(C.rA,V)+s.cross(k.rA,N)),d.wAdd(f,V,f,N),y+=m*(s.cross(C.rB,V)+s.cross(k.rB,N)),C.normalImpulse=F.x,k.normalImpulse=F.y;break}if(F.x=-C.normalMass*R.x,F.y=0,D=0,L=this.v_K.ex.y*F.x+R.y,F.x>=0&&L>=0){q=s.sub(F,T),V=s.mul(q.x,v),N=s.mul(q.y,v);_.wSub(h,V,h,N),p-=l*(s.cross(C.rA,V)+s.cross(k.rA,N)),d.wAdd(f,V,f,N),y+=m*(s.cross(C.rB,V)+s.cross(k.rB,N)),C.normalImpulse=F.x,k.normalImpulse=F.y;break}if(F.x=0,F.y=-k.normalMass*R.y,D=this.v_K.ey.x*F.y+R.x,L=0,F.y>=0&&D>=0){q=s.sub(F,T),V=s.mul(q.x,v),N=s.mul(q.y,v);_.wSub(h,V,h,N),p-=l*(s.cross(C.rA,V)+s.cross(k.rA,N)),d.wAdd(f,V,f,N),y+=m*(s.cross(C.rB,V)+s.cross(k.rB,N)),C.normalImpulse=F.x,k.normalImpulse=F.y;break}if(F.x=0,F.y=0,D=R.x,L=R.y,D>=0&&L>=0){q=s.sub(F,T),V=s.mul(q.x,v),N=s.mul(q.y,v);_.wSub(h,V,h,N),p-=l*(s.cross(C.rA,V)+s.cross(k.rA,N)),d.wAdd(f,V,f,N),y+=m*(s.cross(C.rB,V)+s.cross(k.rB,N)),C.normalImpulse=F.x,k.normalImpulse=F.y;break}break}}a.v.set(_),a.w=p,c.v.set(d),c.w=y};var v=[];_.addType=function(t,e,i){v[t]=v[t]||{},v[t][e]=i},_.create=function(t,e,i,n){var r,o,s=t.getType(),a=i.getType();if(o=v[s]&&v[s][a])r=new _(t,e,i,n,o);else{if(!(o=v[a]&&v[a][s]))return null;r=new _(i,n,t,e,o)}t=r.getFixtureA(),i=r.getFixtureB(),e=r.getChildIndexA(),n=r.getChildIndexB();var u=t.getBody(),c=i.getBody();return r.m_nodeA.contact=r,r.m_nodeA.other=c,r.m_nodeA.prev=null,r.m_nodeA.next=u.m_contactList,null!=u.m_contactList&&(u.m_contactList.prev=r.m_nodeA),u.m_contactList=r.m_nodeA,r.m_nodeB.contact=r,r.m_nodeB.other=u,r.m_nodeB.prev=null,r.m_nodeB.next=c.m_contactList,null!=c.m_contactList&&(c.m_contactList.prev=r.m_nodeB),c.m_contactList=r.m_nodeB,0==t.isSensor()&&0==i.isSensor()&&(u.setAwake(!0),c.setAwake(!0)),r},_.destroy=function(t,e){var i=t.m_fixtureA,n=t.m_fixtureB,r=i.getBody(),o=n.getBody();t.isTouching()&&e.endContact(t),t.m_nodeA.prev&&(t.m_nodeA.prev.next=t.m_nodeA.next),t.m_nodeA.next&&(t.m_nodeA.next.prev=t.m_nodeA.prev),t.m_nodeA==r.m_contactList&&(r.m_contactList=t.m_nodeA.next),t.m_nodeB.prev&&(t.m_nodeB.prev.next=t.m_nodeB.next),t.m_nodeB.next&&(t.m_nodeB.next.prev=t.m_nodeB.prev),t.m_nodeB==o.m_contactList&&(o.m_contactList=t.m_nodeB.next),t.m_manifold.pointCount>0&&0==i.isSensor()&&0==n.isSensor()&&(r.setAwake(!0),o.setAwake(!0));var s=i.getType(),a=n.getType(),u=v[s][a].destroyFcn;"function"==typeof u&&u(t)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(137);var o=function(t){function e(t,i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{x:t,y:i}))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Map),n(e,[{key:"get",value:function(t){return function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"get",this).call(this,t)}},{key:"setX",value:function(t){return new e(t,this.y)}},{key:"setY",value:function(t){return new e(this.x,t)}},{key:"add",value:function(t){return new e(this.x+t.x,this.y+t.y)}},{key:"subtract",value:function(t){return new e(this.x-t.x,this.y-t.y)}},{key:"scale",value:function(t){return new e(this.x*t,this.y*t)}},{key:"rotate",value:function(t,i){var n=new e(this.x-t.x,this.y-t.y);return new e(n.x*Math.cos(i)-n.y*Math.sin(i)+t.x,n.y*Math.cos(i)+n.x*Math.sin(i)+t.y)}},{key:"distance",value:function(t){return e.distance(this,t)}},{key:"toJSON",value:function(){return JSON.stringify({x:this.x,y:this.y})}},{key:"equals",value:function(t){return t instanceof e&&(this.x==t.x&&this.y==t.y)}},{key:"x",get:function(){return this.get("x")}},{key:"y",get:function(){return this.get("y")}}],[{key:"fromJSON",value:function(t){return t="string"==typeof t?JSON.parse(t):t,e.from(t)}},{key:"from",value:function(t){return new e(t.x,t.y)}},{key:"distance",value:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}}]),e}();e.default=o},function(t,e,i){var n=i(11)("unscopables"),r=Array.prototype;void 0==r[n]&&i(28)(r,n,{}),t.exports=function(t){r[n][t]=!0}},function(t,e){t.exports=!1},function(t,e,i){var n=i(65)("meta"),r=i(7),o=i(32),s=i(13).f,a=0,u=Object.isExtensible||function(){return!0},c=!i(6)(function(){return u(Object.preventExtensions({}))}),h=function(t){s(t,n,{value:{i:"O"+ ++a,w:{}}})},l=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,n)){if(!u(t))return"F";if(!e)return"E";h(t)}return t[n].i},getWeak:function(t,e){if(!o(t,n)){if(!u(t))return!0;if(!e)return!1;h(t)}return t[n].w},onFreeze:function(t){return c&&l.NEED&&u(t)&&!o(t,n)&&h(t),t}}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT,i(4);var n=i(1),r=i(10),o=i(2),s=i(8);function a(){this.type,this.localNormal=n.zero(),this.localPoint=n.zero(),this.points=[new u,new u],this.pointCount=0}function u(){this.localPoint=n.zero(),this.normalImpulse=0,this.tangentImpulse=0,this.id=new c}function c(){this.cf=new h;Object.defineProperty(this,"key",{get:function(){return this.cf.indexA+4*this.cf.indexB+16*this.cf.typeA+64*this.cf.typeB},enumerable:!0,configurable:!0})}function h(){this.indexA,this.indexB,this.typeA,this.typeB}t.exports=a,t.exports.clipSegmentToLine=function(t,e,i,r,o){var s=0,u=n.dot(i,e[0].v)-r,c=n.dot(i,e[1].v)-r;u<=0&&t[s++].set(e[0]);c<=0&&t[s++].set(e[1]);if(u*c<0){var h=u/(u-c);t[s].v.wSet(1-h,e[0].v,h,e[1].v),t[s].id.cf.indexA=o,t[s].id.cf.indexB=e[0].id.cf.indexB,t[s].id.cf.typeA=a.e_vertex,t[s].id.cf.typeB=a.e_face,++s}return s},t.exports.clipVertex=f,t.exports.getPointStates=function(t,e,i,n){for(var r=0;r<i.pointCount;++r){var o=i.points[r].id;t[r]=l.removeState;for(var s=0;s<n.pointCount;++s)if(n.points[s].id.key==o.key){t[r]=l.persistState;break}}for(var r=0;r<n.pointCount;++r){var o=n.points[r].id;e[r]=l.addState;for(var s=0;s<i.pointCount;++s)if(i.points[s].id.key==o.key){e[r]=l.persistState;break}}},t.exports.PointState=l,a.e_circles=0,a.e_faceA=1,a.e_faceB=2,a.e_vertex=0,a.e_face=1,c.prototype.set=function(t){this.cf.set(t.cf)},h.prototype.set=function(t){this.indexA=t.indexA,this.indexB=t.indexB,this.typeA=t.typeA,this.typeB=t.typeB},a.prototype.getWorldManifold=function(t,e,i,u,c){if(0!=this.pointCount){var h=(t=t||new function(){this.normal,this.points=[],this.separations=[]}).normal,l=t.points,f=t.separations;switch(this.type){case a.e_circles:h=n.neo(1,0);var m=r.mul(e,this.localPoint),_=r.mul(u,this.points[0].localPoint),p=n.sub(_,m);n.lengthSquared(p)>o.EPSILON*o.EPSILON&&(h.set(p),h.normalize()),l[0]=n.mid(m,_),f[0]=-c-i,l.length=1,f.length=1;break;case a.e_faceA:h=s.mul(e.q,this.localNormal);for(var d=r.mul(e,this.localPoint),y=0;y<this.pointCount;++y){var v=r.mul(u,this.points[y].localPoint),g=n.clone(v).wAdd(i-n.dot(n.sub(v,d),h),h),b=n.clone(v).wSub(c,h);l[y]=n.mid(g,b),f[y]=n.dot(n.sub(b,g),h)}l.length=this.pointCount,f.length=this.pointCount;break;case a.e_faceB:h=s.mul(u.q,this.localNormal);for(d=r.mul(u,this.localPoint),y=0;y<this.pointCount;++y){v=r.mul(e,this.points[y].localPoint),b=n.zero().wSet(1,v,c-n.dot(n.sub(v,d),h),h),g=n.zero().wSet(1,v,-i,h);l[y]=n.mid(g,b),f[y]=n.dot(n.sub(g,b),h)}l.length=this.pointCount,f.length=this.pointCount,h.mul(-1)}return t.normal=h,t.points=l,t.separations=f,t}};var l={nullState:0,addState:1,persistState:2,removeState:3};function f(){this.v=n.zero(),this.id=new c}f.prototype.set=function(t){this.v.set(t.v),this.id.set(t.id)}},function(t,e,i){"use strict";t.exports=function(t,e,i,n,r,o,s,a){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[i,n,r,o,s,a],h=0;(u=new Error(e.replace(/%s/g,function(){return c[h++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.prototype.constructor.name,i=new t,r=void 0;if(i.add)r=i.add("a");else if(i.set)r=i.set("a","b");else{if(!i.push)throw new Error("extendable: `"+e+"` is not supported.");r=i.push("a")}var o=Object.keys(r),s=o.reduce(function(t,e){return t[e]=i[e],t},{});function a(e){var i=this;return void 0===i&&(i=new a(e)),i.__wrapImmutable(new t(e))}return a["is"+e]=function(t){return t&&t instanceof a},a.prototype=(0,n.default)(t,function(t,e){return o.reduce(function(t,i){return t[i]=e[i],t},t)},function(t){return Object.keys(s).reduce(function(t,e){return t[e]=s[e],t},t)}),a.prototype.constructor=a,a.prototype.toString=function(){return"Extendable."+t.prototype.toString.call(this)},a};var n=function(t){return t&&t.__esModule?t:{default:t}}(i(206))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(207),o=i(45);var s=function(t){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,o.setProperties)({collisionPriority:i},t),!0))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.Map),n(e,[{key:"draw",value:function(t,e,i,n){console.warn("Shape.draw should be implemented by extending class.")}},{key:"contains",value:function(t,e,i){return!1}},{key:"collides",value:function(t,e,i,n,r){var o,s,a,u,c;this.collisionPriority>i.collisionPriority?(o=this,u=i,s=e,r,a=t,c=n):(o=i,u=this,s=r,e,a=n,c=t);var h=u.vertices,l=!1;if(h)for(var f=0;f<h.length;f++)if(o.contains(a,s,c)){l=!0;break}return l}},{key:"getRotated",value:function(t){return null}},{key:"toJSON",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,o.deepSerialize)({type:this.type,vertices:this.vertices},[],t,e,i,n)}},{key:"equals",value:function(t){if(!(t instanceof e))return!1;if(this.type!==t.type||this.vertices.length!==t.vertices.length)return!1;for(var i=this.vertices,n=t.vertices,r=0;r<i.length;r++)if(!i[r].equals(n[r]))return!1;return!0}},{key:"type",get:function(){return null}},{key:"collisionPriority",get:function(){return this.get("collisionPriority")}},{key:"vertices",get:function(){return this.get("vertices")}}],[{key:"fromJSON",value:function(t){if(t instanceof e)return t;var i="string"==typeof t?JSON.parse(t):t,n=e.registeredShapes[i.type];return n?n.fromJSON(t):void 0}},{key:"registerShape",value:function(t,i){e.registeredShapes[t]=i}}]),e}();e.default=s,s.registeredShapes={}},function(t,e,i){var n=i(27);t.exports=function(t,e,i){for(var r in e)n(t,r,e[r],i);return t}},function(t,e,i){var n=i(36),r=i(158),o=i(108),s=i(3),a=i(12),u=i(106),c={},h={};(e=t.exports=function(t,e,i,l,f){var m,_,p,d,y=f?function(){return t}:u(t),v=n(i,l,e?2:1),g=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(o(y)){for(m=a(t.length);m>g;g++)if((d=e?v(s(_=t[g])[0],_[1]):v(t[g]))===c||d===h)return d}else for(p=y.call(t);!(_=p.next()).done;)if((d=r(p,v,_.value,e))===c||d===h)return d}).BREAK=c,e.RETURN=h},function(t,e){t.exports=function(t,e,i,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(i+": incorrect invocation!");return t}},function(t,e,i){"use strict";var n=i(5),r=i(13),o=i(14),s=i(11)("species");t.exports=function(t){var e=n[t];o&&e&&!e[s]&&r.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,i){var n=i(170),r=i(121).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,r)}},function(t,e,i){var n=i(3),r=i(169),o=i(121),s=i(122)("IE_PROTO"),a=function(){},u=function(){var t,e=i(124)("iframe"),n=o.length;for(e.style.display="none",i(120).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;n--;)delete u.prototype[o[n]];return u()};t.exports=Object.create||function(t,e){var i;return null!==t?(a.prototype=n(t),i=new a,a.prototype=null,i[s]=t):i=u(),void 0===e?i:r(i,e)}},function(t,e,i){var n=i(42),r=Math.max,o=Math.min;t.exports=function(t,e){return(t=n(t))<0?r(t+e,0):o(t,e)}},function(t,e,i){var n=i(170),r=i(121);t.exports=Object.keys||function(t){return n(t,r)}},function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,i){t.exports=function(){"use strict";var t=Array.prototype.slice;function e(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function i(t){return s(t)?t:W(t)}function n(t){return a(t)?t:Y(t)}function r(t){return u(t)?t:H(t)}function o(t){return s(t)&&!c(t)?t:K(t)}function s(t){return!(!t||!t[l])}function a(t){return!(!t||!t[f])}function u(t){return!(!t||!t[m])}function c(t){return a(t)||u(t)}function h(t){return!(!t||!t[_])}e(n,i),e(r,i),e(o,i),i.isIterable=s,i.isKeyed=a,i.isIndexed=u,i.isAssociative=c,i.isOrdered=h,i.Keyed=n,i.Indexed=r,i.Set=o;var l="@@__IMMUTABLE_ITERABLE__@@",f="@@__IMMUTABLE_KEYED__@@",m="@@__IMMUTABLE_INDEXED__@@",_="@@__IMMUTABLE_ORDERED__@@",p=5,d=1<<p,y=d-1,v={},g={value:!1},b={value:!1};function x(t){return t.value=!1,t}function w(t){t&&(t.value=!0)}function A(){}function S(t,e){e=e||0;for(var i=Math.max(0,t.length-e),n=new Array(i),r=0;r<i;r++)n[r]=t[r+e];return n}function B(t){return void 0===t.size&&(t.size=t.__iterate(O)),t.size}function I(t,e){if("number"!=typeof e){var i=e>>>0;if(""+i!==e||4294967295===i)return NaN;e=i}return e<0?B(t)+e:e}function O(){return!0}function P(t,e,i){return(0===t||void 0!==i&&t<=-i)&&(void 0===e||void 0!==i&&e>=i)}function M(t,e){return C(t,e,0)}function E(t,e){return C(t,e,e)}function C(t,e,i){return void 0===t?i:t<0?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}var k=0,T=1,j=2,z="function"==typeof Symbol&&Symbol.iterator,D="@@iterator",L=z||D;function R(t){this.next=t}function F(t,e,i,n){var r=0===t?e:1===t?i:[e,i];return n?n.value=r:n={value:r,done:!1},n}function q(){return{value:void 0,done:!0}}function V(t){return!!G(t)}function N(t){return t&&"function"==typeof t.next}function U(t){var e=G(t);return e&&e.call(t)}function G(t){var e=t&&(z&&t[z]||t[D]);if("function"==typeof e)return e}function J(t){return t&&"number"==typeof t.length}function W(t){return null===t||void 0===t?ot():s(t)?t.toSeq():function(t){var e=ut(t)||"object"==typeof t&&new et(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}(t)}function Y(t){return null===t||void 0===t?ot().toKeyedSeq():s(t)?a(t)?t.toSeq():t.fromEntrySeq():st(t)}function H(t){return null===t||void 0===t?ot():s(t)?a(t)?t.entrySeq():t.toIndexedSeq():at(t)}function K(t){return(null===t||void 0===t?ot():s(t)?a(t)?t.entrySeq():t:at(t)).toSetSeq()}R.prototype.toString=function(){return"[Iterator]"},R.KEYS=k,R.VALUES=T,R.ENTRIES=j,R.prototype.inspect=R.prototype.toSource=function(){return this.toString()},R.prototype[L]=function(){return this},e(W,i),W.of=function(){return W(arguments)},W.prototype.toSeq=function(){return this},W.prototype.toString=function(){return this.__toString("Seq {","}")},W.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},W.prototype.__iterate=function(t,e){return ct(this,t,e,!0)},W.prototype.__iterator=function(t,e){return ht(this,t,e,!0)},e(Y,W),Y.prototype.toKeyedSeq=function(){return this},e(H,W),H.of=function(){return H(arguments)},H.prototype.toIndexedSeq=function(){return this},H.prototype.toString=function(){return this.__toString("Seq [","]")},H.prototype.__iterate=function(t,e){return ct(this,t,e,!1)},H.prototype.__iterator=function(t,e){return ht(this,t,e,!1)},e(K,W),K.of=function(){return K(arguments)},K.prototype.toSetSeq=function(){return this},W.isSeq=rt,W.Keyed=Y,W.Set=K,W.Indexed=H;var Z,X,$,Q="@@__IMMUTABLE_SEQ__@@";function tt(t){this._array=t,this.size=t.length}function et(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function it(t){this._iterable=t,this.size=t.length||t.size}function nt(t){this._iterator=t,this._iteratorCache=[]}function rt(t){return!(!t||!t[Q])}function ot(){return Z||(Z=new tt([]))}function st(t){var e=Array.isArray(t)?new tt(t).fromEntrySeq():N(t)?new nt(t).fromEntrySeq():V(t)?new it(t).fromEntrySeq():"object"==typeof t?new et(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function at(t){var e=ut(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function ut(t){return J(t)?new tt(t):N(t)?new nt(t):V(t)?new it(t):void 0}function ct(t,e,i,n){var r=t._cache;if(r){for(var o=r.length-1,s=0;s<=o;s++){var a=r[i?o-s:s];if(!1===e(a[1],n?a[0]:s,t))return s+1}return s}return t.__iterateUncached(e,i)}function ht(t,e,i,n){var r=t._cache;if(r){var o=r.length-1,s=0;return new R(function(){var t=r[i?o-s:s];return s++>o?{value:void 0,done:!0}:F(e,n?t[0]:s-1,t[1])})}return t.__iteratorUncached(e,i)}function lt(t,e){return e?function t(e,i,n,r){return Array.isArray(i)?e.call(r,n,H(i).map(function(n,r){return t(e,n,r,i)})):mt(i)?e.call(r,n,Y(i).map(function(n,r){return t(e,n,r,i)})):i}(e,t,"",{"":t}):ft(t)}function ft(t){return Array.isArray(t)?H(t).map(ft).toList():mt(t)?Y(t).map(ft).toMap():t}function mt(t){return t&&(t.constructor===Object||void 0===t.constructor)}function _t(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if(t=t.valueOf(),e=e.valueOf(),t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!("function"!=typeof t.equals||"function"!=typeof e.equals||!t.equals(e))}function pt(t,e){if(t===e)return!0;if(!s(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||a(t)!==a(e)||u(t)!==u(e)||h(t)!==h(e))return!1;if(0===t.size&&0===e.size)return!0;var i=!c(t);if(h(t)){var n=t.entries();return e.every(function(t,e){var r=n.next().value;return r&&_t(r[1],t)&&(i||_t(r[0],e))})&&n.next().done}var r=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{r=!0;var o=t;t=e,e=o}var l=!0,f=e.__iterate(function(e,n){if(i?!t.has(e):r?!_t(e,t.get(n,v)):!_t(t.get(n,v),e))return l=!1,!1});return l&&t.size===f}function dt(t,e){if(!(this instanceof dt))return new dt(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(X)return X;X=this}}function yt(t,e){if(!t)throw new Error(e)}function vt(t,e,i){if(!(this instanceof vt))return new vt(t,e,i);if(yt(0!==i,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),i=void 0===i?1:Math.abs(i),e<t&&(i=-i),this._start=t,this._end=e,this._step=i,this.size=Math.max(0,Math.ceil((e-t)/i-1)+1),0===this.size){if($)return $;$=this}}function gt(){throw TypeError("Abstract")}function bt(){}function xt(){}function wt(){}W.prototype[Q]=!0,e(tt,H),tt.prototype.get=function(t,e){return this.has(t)?this._array[I(this,t)]:e},tt.prototype.__iterate=function(t,e){for(var i=this._array,n=i.length-1,r=0;r<=n;r++)if(!1===t(i[e?n-r:r],r,this))return r+1;return r},tt.prototype.__iterator=function(t,e){var i=this._array,n=i.length-1,r=0;return new R(function(){return r>n?{value:void 0,done:!0}:F(t,r,i[e?n-r++:r++])})},e(et,Y),et.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},et.prototype.has=function(t){return this._object.hasOwnProperty(t)},et.prototype.__iterate=function(t,e){for(var i=this._object,n=this._keys,r=n.length-1,o=0;o<=r;o++){var s=n[e?r-o:o];if(!1===t(i[s],s,this))return o+1}return o},et.prototype.__iterator=function(t,e){var i=this._object,n=this._keys,r=n.length-1,o=0;return new R(function(){var s=n[e?r-o:o];return o++>r?{value:void 0,done:!0}:F(t,s,i[s])})},et.prototype[_]=!0,e(it,H),it.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var i=this._iterable,n=U(i),r=0;if(N(n))for(var o;!(o=n.next()).done&&!1!==t(o.value,r++,this););return r},it.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var i=this._iterable,n=U(i);if(!N(n))return new R(q);var r=0;return new R(function(){var e=n.next();return e.done?e:F(t,r++,e.value)})},e(nt,H),nt.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var i,n=this._iterator,r=this._iteratorCache,o=0;o<r.length;)if(!1===t(r[o],o++,this))return o;for(;!(i=n.next()).done;){var s=i.value;if(r[o]=s,!1===t(s,o++,this))break}return o},nt.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var i=this._iterator,n=this._iteratorCache,r=0;return new R(function(){if(r>=n.length){var e=i.next();if(e.done)return e;n[r]=e.value}return F(t,r,n[r++])})},e(dt,H),dt.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},dt.prototype.get=function(t,e){return this.has(t)?this._value:e},dt.prototype.includes=function(t){return _t(this._value,t)},dt.prototype.slice=function(t,e){var i=this.size;return P(t,e,i)?this:new dt(this._value,E(e,i)-M(t,i))},dt.prototype.reverse=function(){return this},dt.prototype.indexOf=function(t){return _t(this._value,t)?0:-1},dt.prototype.lastIndexOf=function(t){return _t(this._value,t)?this.size:-1},dt.prototype.__iterate=function(t,e){for(var i=0;i<this.size;i++)if(!1===t(this._value,i,this))return i+1;return i},dt.prototype.__iterator=function(t,e){var i=this,n=0;return new R(function(){return n<i.size?F(t,n++,i._value):{value:void 0,done:!0}})},dt.prototype.equals=function(t){return t instanceof dt?_t(this._value,t._value):pt(t)},e(vt,H),vt.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},vt.prototype.get=function(t,e){return this.has(t)?this._start+I(this,t)*this._step:e},vt.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},vt.prototype.slice=function(t,e){return P(t,e,this.size)?this:(t=M(t,this.size),(e=E(e,this.size))<=t?new vt(0,0):new vt(this.get(t,this._end),this.get(e,this._end),this._step))},vt.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var i=e/this._step;if(i>=0&&i<this.size)return i}return-1},vt.prototype.lastIndexOf=function(t){return this.indexOf(t)},vt.prototype.__iterate=function(t,e){for(var i=this.size-1,n=this._step,r=e?this._start+i*n:this._start,o=0;o<=i;o++){if(!1===t(r,o,this))return o+1;r+=e?-n:n}return o},vt.prototype.__iterator=function(t,e){var i=this.size-1,n=this._step,r=e?this._start+i*n:this._start,o=0;return new R(function(){var s=r;return r+=e?-n:n,o>i?{value:void 0,done:!0}:F(t,o++,s)})},vt.prototype.equals=function(t){return t instanceof vt?this._start===t._start&&this._end===t._end&&this._step===t._step:pt(this,t)},e(gt,i),e(bt,gt),e(xt,gt),e(wt,gt),gt.Keyed=bt,gt.Indexed=xt,gt.Set=wt;var At="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var i=65535&(t|=0),n=65535&(e|=0);return i*n+((t>>>16)*n+i*(e>>>16)<<16>>>0)|0};function St(t){return t>>>1&1073741824|3221225471&t}function Bt(t){if(!1===t||null===t||void 0===t)return 0;if("function"==typeof t.valueOf&&(!1===(t=t.valueOf())||null===t||void 0===t))return 0;if(!0===t)return 1;var e=typeof t;if("number"===e){if(t!=t||t===1/0)return 0;var i=0|t;for(i!==t&&(i^=4294967295*t);t>4294967295;)i^=t/=4294967295;return St(i)}if("string"===e)return t.length>Tt?function(t){var e=Dt[t];return void 0===e&&(e=It(t),zt===jt&&(zt=0,Dt={}),zt++,Dt[t]=e),e}(t):It(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"===e)return function(t){var e;if(Et&&void 0!==(e=Ot.get(t)))return e;if(void 0!==(e=t[kt]))return e;if(!Mt){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[kt]))return e;if(void 0!==(e=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}if(e=++Ct,1073741824&Ct&&(Ct=0),Et)Ot.set(t,e);else{if(void 0!==Pt&&!1===Pt(t))throw new Error("Non-extensible objects are not allowed as keys.");if(Mt)Object.defineProperty(t,kt,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[kt]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[kt]=e}}return e}(t);if("function"==typeof t.toString)return It(t.toString());throw new Error("Value type "+e+" cannot be hashed.")}function It(t){for(var e=0,i=0;i<t.length;i++)e=31*e+t.charCodeAt(i)|0;return St(e)}var Ot,Pt=Object.isExtensible,Mt=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),Et="function"==typeof WeakMap;Et&&(Ot=new WeakMap);var Ct=0,kt="__immutablehash__";"function"==typeof Symbol&&(kt=Symbol(kt));var Tt=16,jt=255,zt=0,Dt={};function Lt(t){yt(t!==1/0,"Cannot perform this action with an infinite size.")}function Rt(t){return null===t||void 0===t?$t():Ft(t)&&!h(t)?t:$t().withMutations(function(e){var i=n(t);Lt(i.size),i.forEach(function(t,i){return e.set(i,t)})})}function Ft(t){return!(!t||!t[Vt])}e(Rt,bt),Rt.of=function(){var e=t.call(arguments,0);return $t().withMutations(function(t){for(var i=0;i<e.length;i+=2){if(i+1>=e.length)throw new Error("Missing value for key: "+e[i]);t.set(e[i],e[i+1])}})},Rt.prototype.toString=function(){return this.__toString("Map {","}")},Rt.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},Rt.prototype.set=function(t,e){return Qt(this,t,e)},Rt.prototype.setIn=function(t,e){return this.updateIn(t,v,function(){return e})},Rt.prototype.remove=function(t){return Qt(this,t,v)},Rt.prototype.deleteIn=function(t){return this.updateIn(t,function(){return v})},Rt.prototype.update=function(t,e,i){return 1===arguments.length?t(this):this.updateIn([t],e,i)},Rt.prototype.updateIn=function(t,e,i){i||(i=e,e=void 0);var n=function t(e,i,n,r){var o=e===v,s=i.next();if(s.done){var a=o?n:e,u=r(a);return u===a?e:u}yt(o||e&&e.set,"invalid keyPath");var c=s.value,h=o?v:e.get(c,v),l=t(h,i,n,r);return l===h?e:l===v?e.remove(c):(o?$t():e).set(c,l)}(this,ii(t),e,i);return n===v?void 0:n},Rt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):$t()},Rt.prototype.merge=function(){return ne(this,void 0,arguments)},Rt.prototype.mergeWith=function(e){var i=t.call(arguments,1);return ne(this,e,i)},Rt.prototype.mergeIn=function(e){var i=t.call(arguments,1);return this.updateIn(e,$t(),function(t){return"function"==typeof t.merge?t.merge.apply(t,i):i[i.length-1]})},Rt.prototype.mergeDeep=function(){return ne(this,re,arguments)},Rt.prototype.mergeDeepWith=function(e){var i=t.call(arguments,1);return ne(this,oe(e),i)},Rt.prototype.mergeDeepIn=function(e){var i=t.call(arguments,1);return this.updateIn(e,$t(),function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,i):i[i.length-1]})},Rt.prototype.sort=function(t){return Me(Je(this,t))},Rt.prototype.sortBy=function(t,e){return Me(Je(this,e,t))},Rt.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},Rt.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new A)},Rt.prototype.asImmutable=function(){return this.__ensureOwner()},Rt.prototype.wasAltered=function(){return this.__altered},Rt.prototype.__iterator=function(t,e){return new Ht(this,t,e)},Rt.prototype.__iterate=function(t,e){var i=this,n=0;return this._root&&this._root.iterate(function(e){return n++,t(e[1],e[0],i)},e),n},Rt.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Xt(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},Rt.isMap=Ft;var qt,Vt="@@__IMMUTABLE_MAP__@@",Nt=Rt.prototype;function Ut(t,e){this.ownerID=t,this.entries=e}function Gt(t,e,i){this.ownerID=t,this.bitmap=e,this.nodes=i}function Jt(t,e,i){this.ownerID=t,this.count=e,this.nodes=i}function Wt(t,e,i){this.ownerID=t,this.keyHash=e,this.entries=i}function Yt(t,e,i){this.ownerID=t,this.keyHash=e,this.entry=i}function Ht(t,e,i){this._type=e,this._reverse=i,this._stack=t._root&&Zt(t._root)}function Kt(t,e){return F(t,e[0],e[1])}function Zt(t,e){return{node:t,index:0,__prev:e}}function Xt(t,e,i,n){var r=Object.create(Nt);return r.size=t,r._root=e,r.__ownerID=i,r.__hash=n,r.__altered=!1,r}function $t(){return qt||(qt=Xt(0))}function Qt(t,e,i){var n,r;if(t._root){var o=x(g),s=x(b);if(n=te(t._root,t.__ownerID,0,void 0,e,i,o,s),!s.value)return t;r=t.size+(o.value?i===v?-1:1:0)}else{if(i===v)return t;r=1,n=new Ut(t.__ownerID,[[e,i]])}return t.__ownerID?(t.size=r,t._root=n,t.__hash=void 0,t.__altered=!0,t):n?Xt(r,n):$t()}function te(t,e,i,n,r,o,s,a){return t?t.update(e,i,n,r,o,s,a):o===v?t:(w(a),w(s),new Yt(e,n,[r,o]))}function ee(t){return t.constructor===Yt||t.constructor===Wt}function ie(t,e,i,n,r){if(t.keyHash===n)return new Wt(e,n,[t.entry,r]);var o,s=(0===i?t.keyHash:t.keyHash>>>i)&y,a=(0===i?n:n>>>i)&y,u=s===a?[ie(t,e,i+p,n,r)]:(o=new Yt(e,n,r),s<a?[t,o]:[o,t]);return new Gt(e,1<<s|1<<a,u)}function ne(t,e,i){for(var r=[],o=0;o<i.length;o++){var a=i[o],u=n(a);s(a)||(u=u.map(function(t){return lt(t)})),r.push(u)}return se(t,e,r)}function re(t,e,i){return t&&t.mergeDeep&&s(e)?t.mergeDeep(e):_t(t,e)?t:e}function oe(t){return function(e,i,n){if(e&&e.mergeDeepWith&&s(i))return e.mergeDeepWith(t,i);var r=t(e,i,n);return _t(e,r)?e:r}}function se(t,e,i){return 0===(i=i.filter(function(t){return 0!==t.size})).length?t:0!==t.size||t.__ownerID||1!==i.length?t.withMutations(function(t){for(var n=e?function(i,n){t.update(n,v,function(t){return t===v?i:e(t,i,n)})}:function(e,i){t.set(i,e)},r=0;r<i.length;r++)i[r].forEach(n)}):t.constructor(i[0])}function ae(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function ue(t,e,i,n){var r=n?t:S(t);return r[e]=i,r}Nt[Vt]=!0,Nt.delete=Nt.remove,Nt.removeIn=Nt.deleteIn,Ut.prototype.get=function(t,e,i,n){for(var r=this.entries,o=0,s=r.length;o<s;o++)if(_t(i,r[o][0]))return r[o][1];return n},Ut.prototype.update=function(t,e,i,n,r,o,s){for(var a=r===v,u=this.entries,c=0,h=u.length;c<h&&!_t(n,u[c][0]);c++);var l=c<h;if(l?u[c][1]===r:a)return this;if(w(s),(a||!l)&&w(o),!a||1!==u.length){if(!l&&!a&&u.length>=ce)return function(t,e,i,n){t||(t=new A);for(var r=new Yt(t,Bt(i),[i,n]),o=0;o<e.length;o++){var s=e[o];r=r.update(t,0,void 0,s[0],s[1])}return r}(t,u,n,r);var f=t&&t===this.ownerID,m=f?u:S(u);return l?a?c===h-1?m.pop():m[c]=m.pop():m[c]=[n,r]:m.push([n,r]),f?(this.entries=m,this):new Ut(t,m)}},Gt.prototype.get=function(t,e,i,n){void 0===e&&(e=Bt(i));var r=1<<((0===t?e:e>>>t)&y),o=this.bitmap;return 0==(o&r)?n:this.nodes[ae(o&r-1)].get(t+p,e,i,n)},Gt.prototype.update=function(t,e,i,n,r,o,s){void 0===i&&(i=Bt(n));var a=(0===e?i:i>>>e)&y,u=1<<a,c=this.bitmap,h=0!=(c&u);if(!h&&r===v)return this;var l=ae(c&u-1),f=this.nodes,m=h?f[l]:void 0,_=te(m,t,e+p,i,n,r,o,s);if(_===m)return this;if(!h&&_&&f.length>=he)return function(t,e,i,n,r){for(var o=0,s=new Array(d),a=0;0!==i;a++,i>>>=1)s[a]=1&i?e[o++]:void 0;return s[n]=r,new Jt(t,o+1,s)}(t,f,c,a,_);if(h&&!_&&2===f.length&&ee(f[1^l]))return f[1^l];if(h&&_&&1===f.length&&ee(_))return _;var g=t&&t===this.ownerID,b=h?_?c:c^u:c|u,x=h?_?ue(f,l,_,g):function(t,e,i){var n=t.length-1;if(i&&e===n)return t.pop(),t;for(var r=new Array(n),o=0,s=0;s<n;s++)s===e&&(o=1),r[s]=t[s+o];return r}(f,l,g):function(t,e,i,n){var r=t.length+1;if(n&&e+1===r)return t[e]=i,t;for(var o=new Array(r),s=0,a=0;a<r;a++)a===e?(o[a]=i,s=-1):o[a]=t[a+s];return o}(f,l,_,g);return g?(this.bitmap=b,this.nodes=x,this):new Gt(t,b,x)},Jt.prototype.get=function(t,e,i,n){void 0===e&&(e=Bt(i));var r=(0===t?e:e>>>t)&y,o=this.nodes[r];return o?o.get(t+p,e,i,n):n},Jt.prototype.update=function(t,e,i,n,r,o,s){void 0===i&&(i=Bt(n));var a=(0===e?i:i>>>e)&y,u=r===v,c=this.nodes,h=c[a];if(u&&!h)return this;var l=te(h,t,e+p,i,n,r,o,s);if(l===h)return this;var f=this.count;if(h){if(!l&&--f<le)return function(t,e,i,n){for(var r=0,o=0,s=new Array(i),a=0,u=1,c=e.length;a<c;a++,u<<=1){var h=e[a];void 0!==h&&a!==n&&(r|=u,s[o++]=h)}return new Gt(t,r,s)}(t,c,f,a)}else f++;var m=t&&t===this.ownerID,_=ue(c,a,l,m);return m?(this.count=f,this.nodes=_,this):new Jt(t,f,_)},Wt.prototype.get=function(t,e,i,n){for(var r=this.entries,o=0,s=r.length;o<s;o++)if(_t(i,r[o][0]))return r[o][1];return n},Wt.prototype.update=function(t,e,i,n,r,o,s){void 0===i&&(i=Bt(n));var a=r===v;if(i!==this.keyHash)return a?this:(w(s),w(o),ie(this,t,e,i,[n,r]));for(var u=this.entries,c=0,h=u.length;c<h&&!_t(n,u[c][0]);c++);var l=c<h;if(l?u[c][1]===r:a)return this;if(w(s),(a||!l)&&w(o),a&&2===h)return new Yt(t,this.keyHash,u[1^c]);var f=t&&t===this.ownerID,m=f?u:S(u);return l?a?c===h-1?m.pop():m[c]=m.pop():m[c]=[n,r]:m.push([n,r]),f?(this.entries=m,this):new Wt(t,this.keyHash,m)},Yt.prototype.get=function(t,e,i,n){return _t(i,this.entry[0])?this.entry[1]:n},Yt.prototype.update=function(t,e,i,n,r,o,s){var a=r===v,u=_t(n,this.entry[0]);return(u?r===this.entry[1]:a)?this:(w(s),a?void w(o):u?t&&t===this.ownerID?(this.entry[1]=r,this):new Yt(t,this.keyHash,[n,r]):(w(o),ie(this,t,e,Bt(n),[n,r])))},Ut.prototype.iterate=Wt.prototype.iterate=function(t,e){for(var i=this.entries,n=0,r=i.length-1;n<=r;n++)if(!1===t(i[e?r-n:n]))return!1},Gt.prototype.iterate=Jt.prototype.iterate=function(t,e){for(var i=this.nodes,n=0,r=i.length-1;n<=r;n++){var o=i[e?r-n:n];if(o&&!1===o.iterate(t,e))return!1}},Yt.prototype.iterate=function(t,e){return t(this.entry)},e(Ht,R),Ht.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var i,n=e.node,r=e.index++;if(n.entry){if(0===r)return Kt(t,n.entry)}else if(n.entries){if(i=n.entries.length-1,r<=i)return Kt(t,n.entries[this._reverse?i-r:r])}else if(i=n.nodes.length-1,r<=i){var o=n.nodes[this._reverse?i-r:r];if(o){if(o.entry)return Kt(t,o.entry);e=this._stack=Zt(o,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}};var ce=d/4,he=d/2,le=d/4;function fe(t){var e=we();if(null===t||void 0===t)return e;if(me(t))return t;var i=r(t),n=i.size;return 0===n?e:(Lt(n),n>0&&n<d?xe(0,n,p,null,new de(i.toArray())):e.withMutations(function(t){t.setSize(n),i.forEach(function(e,i){return t.set(i,e)})}))}function me(t){return!(!t||!t[_e])}e(fe,xt),fe.of=function(){return this(arguments)},fe.prototype.toString=function(){return this.__toString("List [","]")},fe.prototype.get=function(t,e){if((t=I(this,t))>=0&&t<this.size){var i=Be(this,t+=this._origin);return i&&i.array[t&y]}return e},fe.prototype.set=function(t,e){return function(t,e,i){if((e=I(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations(function(t){e<0?Ie(t,e).set(0,i):Ie(t,0,e+1).set(e,i)});e+=t._origin;var n=t._tail,r=t._root,o=x(b);return e>=Pe(t._capacity)?n=Ae(n,t.__ownerID,0,e,i,o):r=Ae(r,t.__ownerID,t._level,e,i,o),o.value?t.__ownerID?(t._root=r,t._tail=n,t.__hash=void 0,t.__altered=!0,t):xe(t._origin,t._capacity,t._level,r,n):t}(this,t,e)},fe.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},fe.prototype.insert=function(t,e){return this.splice(t,0,e)},fe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=p,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):we()},fe.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations(function(i){Ie(i,0,e+t.length);for(var n=0;n<t.length;n++)i.set(e+n,t[n])})},fe.prototype.pop=function(){return Ie(this,0,-1)},fe.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){Ie(e,-t.length);for(var i=0;i<t.length;i++)e.set(i,t[i])})},fe.prototype.shift=function(){return Ie(this,1)},fe.prototype.merge=function(){return Oe(this,void 0,arguments)},fe.prototype.mergeWith=function(e){var i=t.call(arguments,1);return Oe(this,e,i)},fe.prototype.mergeDeep=function(){return Oe(this,re,arguments)},fe.prototype.mergeDeepWith=function(e){var i=t.call(arguments,1);return Oe(this,oe(e),i)},fe.prototype.setSize=function(t){return Ie(this,0,t)},fe.prototype.slice=function(t,e){var i=this.size;return P(t,e,i)?this:Ie(this,M(t,i),E(e,i))},fe.prototype.__iterator=function(t,e){var i=0,n=be(this,e);return new R(function(){var e=n();return e===ge?{value:void 0,done:!0}:F(t,i++,e)})},fe.prototype.__iterate=function(t,e){for(var i,n=0,r=be(this,e);(i=r())!==ge&&!1!==t(i,n++,this););return n},fe.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?xe(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},fe.isList=me;var _e="@@__IMMUTABLE_LIST__@@",pe=fe.prototype;function de(t,e){this.array=t,this.ownerID=e}pe[_e]=!0,pe.delete=pe.remove,pe.setIn=Nt.setIn,pe.deleteIn=pe.removeIn=Nt.removeIn,pe.update=Nt.update,pe.updateIn=Nt.updateIn,pe.mergeIn=Nt.mergeIn,pe.mergeDeepIn=Nt.mergeDeepIn,pe.withMutations=Nt.withMutations,pe.asMutable=Nt.asMutable,pe.asImmutable=Nt.asImmutable,pe.wasAltered=Nt.wasAltered,de.prototype.removeBefore=function(t,e,i){if(i===e?1<<e:0===this.array.length)return this;var n=i>>>e&y;if(n>=this.array.length)return new de([],t);var r,o=0===n;if(e>0){var s=this.array[n];if((r=s&&s.removeBefore(t,e-p,i))===s&&o)return this}if(o&&!r)return this;var a=Se(this,t);if(!o)for(var u=0;u<n;u++)a.array[u]=void 0;return r&&(a.array[n]=r),a},de.prototype.removeAfter=function(t,e,i){if(i===(e?1<<e:0)||0===this.array.length)return this;var n,r=i-1>>>e&y;if(r>=this.array.length)return this;if(e>0){var o=this.array[r];if((n=o&&o.removeAfter(t,e-p,i))===o&&r===this.array.length-1)return this}var s=Se(this,t);return s.array.splice(r+1),n&&(s.array[r]=n),s};var ye,ve,ge={};function be(t,e){var i=t._origin,n=t._capacity,r=Pe(n),o=t._tail;return s(t._root,t._level,0);function s(t,a,u){return 0===a?function(t,s){var a=s===r?o&&o.array:t&&t.array,u=s>i?0:i-s,c=n-s;return c>d&&(c=d),function(){if(u===c)return ge;var t=e?--c:u++;return a&&a[t]}}(t,u):function(t,r,o){var a,u=t&&t.array,c=o>i?0:i-o>>r,h=1+(n-o>>r);return h>d&&(h=d),function(){for(;;){if(a){var t=a();if(t!==ge)return t;a=null}if(c===h)return ge;var i=e?--h:c++;a=s(u&&u[i],r-p,o+(i<<r))}}}(t,a,u)}}function xe(t,e,i,n,r,o,s){var a=Object.create(pe);return a.size=e-t,a._origin=t,a._capacity=e,a._level=i,a._root=n,a._tail=r,a.__ownerID=o,a.__hash=s,a.__altered=!1,a}function we(){return ye||(ye=xe(0,0,p))}function Ae(t,e,i,n,r,o){var s,a=n>>>i&y,u=t&&a<t.array.length;if(!u&&void 0===r)return t;if(i>0){var c=t&&t.array[a],h=Ae(c,e,i-p,n,r,o);return h===c?t:((s=Se(t,e)).array[a]=h,s)}return u&&t.array[a]===r?t:(w(o),s=Se(t,e),void 0===r&&a===s.array.length-1?s.array.pop():s.array[a]=r,s)}function Se(t,e){return e&&t&&e===t.ownerID?t:new de(t?t.array.slice():[],e)}function Be(t,e){if(e>=Pe(t._capacity))return t._tail;if(e<1<<t._level+p){for(var i=t._root,n=t._level;i&&n>0;)i=i.array[e>>>n&y],n-=p;return i}}function Ie(t,e,i){void 0!==e&&(e|=0),void 0!==i&&(i|=0);var n=t.__ownerID||new A,r=t._origin,o=t._capacity,s=r+e,a=void 0===i?o:i<0?o+i:r+i;if(s===r&&a===o)return t;if(s>=a)return t.clear();for(var u=t._level,c=t._root,h=0;s+h<0;)c=new de(c&&c.array.length?[void 0,c]:[],n),h+=1<<(u+=p);h&&(s+=h,r+=h,a+=h,o+=h);for(var l=Pe(o),f=Pe(a);f>=1<<u+p;)c=new de(c&&c.array.length?[c]:[],n),u+=p;var m=t._tail,_=f<l?Be(t,a-1):f>l?new de([],n):m;if(m&&f>l&&s<o&&m.array.length){for(var d=c=Se(c,n),v=u;v>p;v-=p){var g=l>>>v&y;d=d.array[g]=Se(d.array[g],n)}d.array[l>>>p&y]=m}if(a<o&&(_=_&&_.removeAfter(n,0,a)),s>=f)s-=f,a-=f,u=p,c=null,_=_&&_.removeBefore(n,0,s);else if(s>r||f<l){for(h=0;c;){var b=s>>>u&y;if(b!==f>>>u&y)break;b&&(h+=(1<<u)*b),u-=p,c=c.array[b]}c&&s>r&&(c=c.removeBefore(n,u,s-h)),c&&f<l&&(c=c.removeAfter(n,u,f-h)),h&&(s-=h,a-=h)}return t.__ownerID?(t.size=a-s,t._origin=s,t._capacity=a,t._level=u,t._root=c,t._tail=_,t.__hash=void 0,t.__altered=!0,t):xe(s,a,u,c,_)}function Oe(t,e,i){for(var n=[],o=0,a=0;a<i.length;a++){var u=i[a],c=r(u);c.size>o&&(o=c.size),s(u)||(c=c.map(function(t){return lt(t)})),n.push(c)}return o>t.size&&(t=t.setSize(o)),se(t,e,n)}function Pe(t){return t<d?0:t-1>>>p<<p}function Me(t){return null===t||void 0===t?ke():Ee(t)?t:ke().withMutations(function(e){var i=n(t);Lt(i.size),i.forEach(function(t,i){return e.set(i,t)})})}function Ee(t){return Ft(t)&&h(t)}function Ce(t,e,i,n){var r=Object.create(Me.prototype);return r.size=t?t.size:0,r._map=t,r._list=e,r.__ownerID=i,r.__hash=n,r}function ke(){return ve||(ve=Ce($t(),we()))}function Te(t,e,i){var n,r,o=t._map,s=t._list,a=o.get(e),u=void 0!==a;if(i===v){if(!u)return t;s.size>=d&&s.size>=2*o.size?(r=s.filter(function(t,e){return void 0!==t&&a!==e}),n=r.toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(n.__ownerID=r.__ownerID=t.__ownerID)):(n=o.remove(e),r=a===s.size-1?s.pop():s.set(a,void 0))}else if(u){if(i===s.get(a)[1])return t;n=o,r=s.set(a,[e,i])}else n=o.set(e,s.size),r=s.set(s.size,[e,i]);return t.__ownerID?(t.size=n.size,t._map=n,t._list=r,t.__hash=void 0,t):Ce(n,r)}function je(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function ze(t){this._iter=t,this.size=t.size}function De(t){this._iter=t,this.size=t.size}function Le(t){this._iter=t,this.size=t.size}function Re(t){var e=Qe(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=ti,e.__iterateUncached=function(e,i){var n=this;return t.__iterate(function(t,i){return!1!==e(i,t,n)},i)},e.__iteratorUncached=function(e,i){if(e===j){var n=t.__iterator(e,i);return new R(function(){var t=n.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(e===T?k:T,i)},e}function Fe(t,e,i){var n=Qe(t);return n.size=t.size,n.has=function(e){return t.has(e)},n.get=function(n,r){var o=t.get(n,v);return o===v?r:e.call(i,o,n,t)},n.__iterateUncached=function(n,r){var o=this;return t.__iterate(function(t,r,s){return!1!==n(e.call(i,t,r,s),r,o)},r)},n.__iteratorUncached=function(n,r){var o=t.__iterator(j,r);return new R(function(){var r=o.next();if(r.done)return r;var s=r.value,a=s[0];return F(n,a,e.call(i,s[1],a,t),r)})},n}function qe(t,e){var i=Qe(t);return i._iter=t,i.size=t.size,i.reverse=function(){return t},t.flip&&(i.flip=function(){var e=Re(t);return e.reverse=function(){return t.flip()},e}),i.get=function(i,n){return t.get(e?i:-1-i,n)},i.has=function(i){return t.has(e?i:-1-i)},i.includes=function(e){return t.includes(e)},i.cacheResult=ti,i.__iterate=function(e,i){var n=this;return t.__iterate(function(t,i){return e(t,i,n)},!i)},i.__iterator=function(e,i){return t.__iterator(e,!i)},i}function Ve(t,e,i,n){var r=Qe(t);return n&&(r.has=function(n){var r=t.get(n,v);return r!==v&&!!e.call(i,r,n,t)},r.get=function(n,r){var o=t.get(n,v);return o!==v&&e.call(i,o,n,t)?o:r}),r.__iterateUncached=function(r,o){var s=this,a=0;return t.__iterate(function(t,o,u){if(e.call(i,t,o,u))return a++,r(t,n?o:a-1,s)},o),a},r.__iteratorUncached=function(r,o){var s=t.__iterator(j,o),a=0;return new R(function(){for(;;){var o=s.next();if(o.done)return o;var u=o.value,c=u[0],h=u[1];if(e.call(i,h,c,t))return F(r,n?c:a++,h,o)}})},r}function Ne(t,e,i,n){var r=t.size;if(void 0!==e&&(e|=0),void 0!==i&&(i===1/0?i=r:i|=0),P(e,i,r))return t;var o=M(e,r),s=E(i,r);if(o!=o||s!=s)return Ne(t.toSeq().cacheResult(),e,i,n);var a,u=s-o;u==u&&(a=u<0?0:u);var c=Qe(t);return c.size=0===a?a:t.size&&a||void 0,!n&&rt(t)&&a>=0&&(c.get=function(e,i){return(e=I(this,e))>=0&&e<a?t.get(e+o,i):i}),c.__iterateUncached=function(e,i){var r=this;if(0===a)return 0;if(i)return this.cacheResult().__iterate(e,i);var s=0,u=!0,c=0;return t.__iterate(function(t,i){if(!u||!(u=s++<o))return c++,!1!==e(t,n?i:c-1,r)&&c!==a}),c},c.__iteratorUncached=function(e,i){if(0!==a&&i)return this.cacheResult().__iterator(e,i);var r=0!==a&&t.__iterator(e,i),s=0,u=0;return new R(function(){for(;s++<o;)r.next();if(++u>a)return{value:void 0,done:!0};var t=r.next();return n||e===T?t:F(e,u-1,e===k?void 0:t.value[1],t)})},c}function Ue(t,e,i,n){var r=Qe(t);return r.__iterateUncached=function(r,o){var s=this;if(o)return this.cacheResult().__iterate(r,o);var a=!0,u=0;return t.__iterate(function(t,o,c){if(!a||!(a=e.call(i,t,o,c)))return u++,r(t,n?o:u-1,s)}),u},r.__iteratorUncached=function(r,o){var s=this;if(o)return this.cacheResult().__iterator(r,o);var a=t.__iterator(j,o),u=!0,c=0;return new R(function(){var t,o,h;do{if((t=a.next()).done)return n||r===T?t:F(r,c++,r===k?void 0:t.value[1],t);var l=t.value;o=l[0],h=l[1],u&&(u=e.call(i,h,o,s))}while(u);return r===j?t:F(r,o,h,t)})},r}function Ge(t,e,i){var n=Qe(t);return n.__iterateUncached=function(n,r){var o=0,a=!1;return function t(u,c){var h=this;u.__iterate(function(r,u){return(!e||c<e)&&s(r)?t(r,c+1):!1===n(r,i?u:o++,h)&&(a=!0),!a},r)}(t,0),o},n.__iteratorUncached=function(n,r){var o=t.__iterator(n,r),a=[],u=0;return new R(function(){for(;o;){var t=o.next();if(!1===t.done){var c=t.value;if(n===j&&(c=c[1]),e&&!(a.length<e)||!s(c))return i?t:F(n,u++,c,t);a.push(o),o=c.__iterator(n,r)}else o=a.pop()}return{value:void 0,done:!0}})},n}function Je(t,e,i){e||(e=ei);var n=a(t),r=0,o=t.toSeq().map(function(e,n){return[n,e,r++,i?i(e,n,t):e]}).toArray();return o.sort(function(t,i){return e(t[3],i[3])||t[2]-i[2]}).forEach(n?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),n?Y(o):u(t)?H(o):K(o)}function We(t,e,i){if(e||(e=ei),i){var n=t.toSeq().map(function(e,n){return[e,i(e,n,t)]}).reduce(function(t,i){return Ye(e,t[1],i[1])?i:t});return n&&n[0]}return t.reduce(function(t,i){return Ye(e,t,i)?i:t})}function Ye(t,e,i){var n=t(i,e);return 0===n&&i!==e&&(void 0===i||null===i||i!=i)||n>0}function He(t,e,n){var r=Qe(t);return r.size=new tt(n).map(function(t){return t.size}).min(),r.__iterate=function(t,e){for(var i,n=this.__iterator(T,e),r=0;!(i=n.next()).done&&!1!==t(i.value,r++,this););return r},r.__iteratorUncached=function(t,r){var o=n.map(function(t){return t=i(t),U(r?t.reverse():t)}),s=0,a=!1;return new R(function(){var i;return a||(i=o.map(function(t){return t.next()}),a=i.some(function(t){return t.done})),a?{value:void 0,done:!0}:F(t,s++,e.apply(null,i.map(function(t){return t.value})))})},r}function Ke(t,e){return rt(t)?e:t.constructor(e)}function Ze(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Xe(t){return Lt(t.size),B(t)}function $e(t){return a(t)?n:u(t)?r:o}function Qe(t){return Object.create((a(t)?Y:u(t)?H:K).prototype)}function ti(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):W.prototype.cacheResult.call(this)}function ei(t,e){return t>e?1:t<e?-1:0}function ii(t){var e=U(t);if(!e){if(!J(t))throw new TypeError("Expected iterable or array-like: "+t);e=U(i(t))}return e}function ni(t,e){var i,n=function(o){if(o instanceof n)return o;if(!(this instanceof n))return new n(o);if(!i){i=!0;var s=Object.keys(t);!function(t,e){try{e.forEach(function(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){yt(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}.bind(void 0,t))}catch(t){}}(r,s),r.size=s.length,r._name=e,r._keys=s,r._defaultValues=t}this._map=Rt(o)},r=n.prototype=Object.create(ri);return r.constructor=n,n}e(Me,Rt),Me.of=function(){return this(arguments)},Me.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Me.prototype.get=function(t,e){var i=this._map.get(t);return void 0!==i?this._list.get(i)[1]:e},Me.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):ke()},Me.prototype.set=function(t,e){return Te(this,t,e)},Me.prototype.remove=function(t){return Te(this,t,v)},Me.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Me.prototype.__iterate=function(t,e){var i=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],i)},e)},Me.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},Me.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),i=this._list.__ensureOwner(t);return t?Ce(e,i,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=i,this)},Me.isOrderedMap=Ee,Me.prototype[_]=!0,Me.prototype.delete=Me.prototype.remove,e(je,Y),je.prototype.get=function(t,e){return this._iter.get(t,e)},je.prototype.has=function(t){return this._iter.has(t)},je.prototype.valueSeq=function(){return this._iter.valueSeq()},je.prototype.reverse=function(){var t=this,e=qe(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},je.prototype.map=function(t,e){var i=this,n=Fe(this,t,e);return this._useKeys||(n.valueSeq=function(){return i._iter.toSeq().map(t,e)}),n},je.prototype.__iterate=function(t,e){var i,n=this;return this._iter.__iterate(this._useKeys?function(e,i){return t(e,i,n)}:(i=e?Xe(this):0,function(r){return t(r,e?--i:i++,n)}),e)},je.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var i=this._iter.__iterator(T,e),n=e?Xe(this):0;return new R(function(){var r=i.next();return r.done?r:F(t,e?--n:n++,r.value,r)})},je.prototype[_]=!0,e(ze,H),ze.prototype.includes=function(t){return this._iter.includes(t)},ze.prototype.__iterate=function(t,e){var i=this,n=0;return this._iter.__iterate(function(e){return t(e,n++,i)},e)},ze.prototype.__iterator=function(t,e){var i=this._iter.__iterator(T,e),n=0;return new R(function(){var e=i.next();return e.done?e:F(t,n++,e.value,e)})},e(De,K),De.prototype.has=function(t){return this._iter.includes(t)},De.prototype.__iterate=function(t,e){var i=this;return this._iter.__iterate(function(e){return t(e,e,i)},e)},De.prototype.__iterator=function(t,e){var i=this._iter.__iterator(T,e);return new R(function(){var e=i.next();return e.done?e:F(t,e.value,e.value,e)})},e(Le,Y),Le.prototype.entrySeq=function(){return this._iter.toSeq()},Le.prototype.__iterate=function(t,e){var i=this;return this._iter.__iterate(function(e){if(e){Ze(e);var n=s(e);return t(n?e.get(1):e[1],n?e.get(0):e[0],i)}},e)},Le.prototype.__iterator=function(t,e){var i=this._iter.__iterator(T,e);return new R(function(){for(;;){var e=i.next();if(e.done)return e;var n=e.value;if(n){Ze(n);var r=s(n);return F(t,r?n.get(0):n[0],r?n.get(1):n[1],e)}}})},ze.prototype.cacheResult=je.prototype.cacheResult=De.prototype.cacheResult=Le.prototype.cacheResult=ti,e(ni,bt),ni.prototype.toString=function(){return this.__toString(si(this)+" {","}")},ni.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},ni.prototype.get=function(t,e){if(!this.has(t))return e;var i=this._defaultValues[t];return this._map?this._map.get(t,i):i},ni.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=oi(this,$t()))},ni.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+si(this));if(this._map&&!this._map.has(t)){var i=this._defaultValues[t];if(e===i)return this}var n=this._map&&this._map.set(t,e);return this.__ownerID||n===this._map?this:oi(this,n)},ni.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:oi(this,e)},ni.prototype.wasAltered=function(){return this._map.wasAltered()},ni.prototype.__iterator=function(t,e){var i=this;return n(this._defaultValues).map(function(t,e){return i.get(e)}).__iterator(t,e)},ni.prototype.__iterate=function(t,e){var i=this;return n(this._defaultValues).map(function(t,e){return i.get(e)}).__iterate(t,e)},ni.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?oi(this,e,t):(this.__ownerID=t,this._map=e,this)};var ri=ni.prototype;function oi(t,e,i){var n=Object.create(Object.getPrototypeOf(t));return n._map=e,n.__ownerID=i,n}function si(t){return t._name||t.constructor.name||"Record"}function ai(t){return null===t||void 0===t?_i():ui(t)&&!h(t)?t:_i().withMutations(function(e){var i=o(t);Lt(i.size),i.forEach(function(t){return e.add(t)})})}function ui(t){return!(!t||!t[hi])}ri.delete=ri.remove,ri.deleteIn=ri.removeIn=Nt.removeIn,ri.merge=Nt.merge,ri.mergeWith=Nt.mergeWith,ri.mergeIn=Nt.mergeIn,ri.mergeDeep=Nt.mergeDeep,ri.mergeDeepWith=Nt.mergeDeepWith,ri.mergeDeepIn=Nt.mergeDeepIn,ri.setIn=Nt.setIn,ri.update=Nt.update,ri.updateIn=Nt.updateIn,ri.withMutations=Nt.withMutations,ri.asMutable=Nt.asMutable,ri.asImmutable=Nt.asImmutable,e(ai,wt),ai.of=function(){return this(arguments)},ai.fromKeys=function(t){return this(n(t).keySeq())},ai.prototype.toString=function(){return this.__toString("Set {","}")},ai.prototype.has=function(t){return this._map.has(t)},ai.prototype.add=function(t){return fi(this,this._map.set(t,!0))},ai.prototype.remove=function(t){return fi(this,this._map.remove(t))},ai.prototype.clear=function(){return fi(this,this._map.clear())},ai.prototype.union=function(){var e=t.call(arguments,0);return 0===(e=e.filter(function(t){return 0!==t.size})).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations(function(t){for(var i=0;i<e.length;i++)o(e[i]).forEach(function(e){return t.add(e)})}):this.constructor(e[0])},ai.prototype.intersect=function(){var e=t.call(arguments,0);if(0===e.length)return this;e=e.map(function(t){return o(t)});var i=this;return this.withMutations(function(t){i.forEach(function(i){e.every(function(t){return t.includes(i)})||t.remove(i)})})},ai.prototype.subtract=function(){var e=t.call(arguments,0);if(0===e.length)return this;e=e.map(function(t){return o(t)});var i=this;return this.withMutations(function(t){i.forEach(function(i){e.some(function(t){return t.includes(i)})&&t.remove(i)})})},ai.prototype.merge=function(){return this.union.apply(this,arguments)},ai.prototype.mergeWith=function(e){var i=t.call(arguments,1);return this.union.apply(this,i)},ai.prototype.sort=function(t){return pi(Je(this,t))},ai.prototype.sortBy=function(t,e){return pi(Je(this,e,t))},ai.prototype.wasAltered=function(){return this._map.wasAltered()},ai.prototype.__iterate=function(t,e){var i=this;return this._map.__iterate(function(e,n){return t(n,n,i)},e)},ai.prototype.__iterator=function(t,e){return this._map.map(function(t,e){return e}).__iterator(t,e)},ai.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},ai.isSet=ui;var ci,hi="@@__IMMUTABLE_SET__@@",li=ai.prototype;function fi(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function mi(t,e){var i=Object.create(li);return i.size=t?t.size:0,i._map=t,i.__ownerID=e,i}function _i(){return ci||(ci=mi($t()))}function pi(t){return null===t||void 0===t?bi():di(t)?t:bi().withMutations(function(e){var i=o(t);Lt(i.size),i.forEach(function(t){return e.add(t)})})}function di(t){return ui(t)&&h(t)}li[hi]=!0,li.delete=li.remove,li.mergeDeep=li.merge,li.mergeDeepWith=li.mergeWith,li.withMutations=Nt.withMutations,li.asMutable=Nt.asMutable,li.asImmutable=Nt.asImmutable,li.__empty=_i,li.__make=mi,e(pi,ai),pi.of=function(){return this(arguments)},pi.fromKeys=function(t){return this(n(t).keySeq())},pi.prototype.toString=function(){return this.__toString("OrderedSet {","}")},pi.isOrderedSet=di;var yi,vi=pi.prototype;function gi(t,e){var i=Object.create(vi);return i.size=t?t.size:0,i._map=t,i.__ownerID=e,i}function bi(){return yi||(yi=gi(ke()))}function xi(t){return null===t||void 0===t?Oi():wi(t)?t:Oi().unshiftAll(t)}function wi(t){return!(!t||!t[Si])}vi[_]=!0,vi.__empty=bi,vi.__make=gi,e(xi,xt),xi.of=function(){return this(arguments)},xi.prototype.toString=function(){return this.__toString("Stack [","]")},xi.prototype.get=function(t,e){var i=this._head;for(t=I(this,t);i&&t--;)i=i.next;return i?i.value:e},xi.prototype.peek=function(){return this._head&&this._head.value},xi.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,i=arguments.length-1;i>=0;i--)e={value:arguments[i],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):Ii(t,e)},xi.prototype.pushAll=function(t){if(0===(t=r(t)).size)return this;Lt(t.size);var e=this.size,i=this._head;return t.reverse().forEach(function(t){e++,i={value:t,next:i}}),this.__ownerID?(this.size=e,this._head=i,this.__hash=void 0,this.__altered=!0,this):Ii(e,i)},xi.prototype.pop=function(){return this.slice(1)},xi.prototype.unshift=function(){return this.push.apply(this,arguments)},xi.prototype.unshiftAll=function(t){return this.pushAll(t)},xi.prototype.shift=function(){return this.pop.apply(this,arguments)},xi.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Oi()},xi.prototype.slice=function(t,e){if(P(t,e,this.size))return this;var i=M(t,this.size),n=E(e,this.size);if(n!==this.size)return xt.prototype.slice.call(this,t,e);for(var r=this.size-i,o=this._head;i--;)o=o.next;return this.__ownerID?(this.size=r,this._head=o,this.__hash=void 0,this.__altered=!0,this):Ii(r,o)},xi.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ii(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},xi.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var i=0,n=this._head;n&&!1!==t(n.value,i++,this);)n=n.next;return i},xi.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var i=0,n=this._head;return new R(function(){if(n){var e=n.value;return n=n.next,F(t,i++,e)}return{value:void 0,done:!0}})},xi.isStack=wi;var Ai,Si="@@__IMMUTABLE_STACK__@@",Bi=xi.prototype;function Ii(t,e,i,n){var r=Object.create(Bi);return r.size=t,r._head=e,r.__ownerID=i,r.__hash=n,r.__altered=!1,r}function Oi(){return Ai||(Ai=Ii(0))}function Pi(t,e){var i=function(i){t.prototype[i]=e[i]};return Object.keys(e).forEach(i),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(i),t}Bi[Si]=!0,Bi.withMutations=Nt.withMutations,Bi.asMutable=Nt.asMutable,Bi.asImmutable=Nt.asImmutable,Bi.wasAltered=Nt.wasAltered,i.Iterator=R,Pi(i,{toArray:function(){Lt(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate(function(e,i){t[i]=e}),t},toIndexedSeq:function(){return new ze(this)},toJS:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJS?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new je(this,!0)},toMap:function(){return Rt(this.toKeyedSeq())},toObject:function(){Lt(this.size);var t={};return this.__iterate(function(e,i){t[i]=e}),t},toOrderedMap:function(){return Me(this.toKeyedSeq())},toOrderedSet:function(){return pi(a(this)?this.valueSeq():this)},toSet:function(){return ai(a(this)?this.valueSeq():this)},toSetSeq:function(){return new De(this)},toSeq:function(){return u(this)?this.toIndexedSeq():a(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return xi(a(this)?this.valueSeq():this)},toList:function(){return fe(a(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){var e=t.call(arguments,0);return Ke(this,function(t,e){var i=a(t),r=[t].concat(e).map(function(t){return s(t)?i&&(t=n(t)):t=i?st(t):at(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===r.length)return t;if(1===r.length){var o=r[0];if(o===t||i&&a(o)||u(t)&&u(o))return o}var c=new tt(r);return i?c=c.toKeyedSeq():u(t)||(c=c.toSetSeq()),(c=c.flatten(!0)).size=r.reduce(function(t,e){if(void 0!==t){var i=e.size;if(void 0!==i)return t+i}},0),c}(this,e))},includes:function(t){return this.some(function(e){return _t(e,t)})},entries:function(){return this.__iterator(j)},every:function(t,e){Lt(this.size);var i=!0;return this.__iterate(function(n,r,o){if(!t.call(e,n,r,o))return i=!1,!1}),i},filter:function(t,e){return Ke(this,Ve(this,t,e,!0))},find:function(t,e,i){var n=this.findEntry(t,e);return n?n[1]:i},forEach:function(t,e){return Lt(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){Lt(this.size),t=void 0!==t?""+t:",";var e="",i=!0;return this.__iterate(function(n){i?i=!1:e+=t,e+=null!==n&&void 0!==n?n.toString():""}),e},keys:function(){return this.__iterator(k)},map:function(t,e){return Ke(this,Fe(this,t,e))},reduce:function(t,e,i){var n,r;return Lt(this.size),arguments.length<2?r=!0:n=e,this.__iterate(function(e,o,s){r?(r=!1,n=e):n=t.call(i,n,e,o,s)}),n},reduceRight:function(t,e,i){var n=this.toKeyedSeq().reverse();return n.reduce.apply(n,arguments)},reverse:function(){return Ke(this,qe(this,!0))},slice:function(t,e){return Ke(this,Ne(this,t,e,!0))},some:function(t,e){return!this.every(Ti(t),e)},sort:function(t){return Ke(this,Je(this,t))},values:function(){return this.__iterator(T)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return B(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return function(t,e,i){var n=Rt().asMutable();return t.__iterate(function(r,o){n.update(e.call(i,r,o,t),0,function(t){return t+1})}),n.asImmutable()}(this,t,e)},equals:function(t){return pt(this,t)},entrySeq:function(){var t=this;if(t._cache)return new tt(t._cache);var e=t.toSeq().map(ki).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Ti(t),e)},findEntry:function(t,e,i){var n=i;return this.__iterate(function(i,r,o){if(t.call(e,i,r,o))return n=[r,i],!1}),n},findKey:function(t,e){var i=this.findEntry(t,e);return i&&i[0]},findLast:function(t,e,i){return this.toKeyedSeq().reverse().find(t,e,i)},findLastEntry:function(t,e,i){return this.toKeyedSeq().reverse().findEntry(t,e,i)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(O)},flatMap:function(t,e){return Ke(this,function(t,e,i){var n=$e(t);return t.toSeq().map(function(r,o){return n(e.call(i,r,o,t))}).flatten(!0)}(this,t,e))},flatten:function(t){return Ke(this,Ge(this,t,!0))},fromEntrySeq:function(){return new Le(this)},get:function(t,e){return this.find(function(e,i){return _t(i,t)},void 0,e)},getIn:function(t,e){for(var i,n=this,r=ii(t);!(i=r.next()).done;){var o=i.value;if((n=n&&n.get?n.get(o,v):v)===v)return e}return n},groupBy:function(t,e){return function(t,e,i){var n=a(t),r=(h(t)?Me():Rt()).asMutable();t.__iterate(function(o,s){r.update(e.call(i,o,s,t),function(t){return(t=t||[]).push(n?[s,o]:o),t})});var o=$e(t);return r.map(function(e){return Ke(t,o(e))})}(this,t,e)},has:function(t){return this.get(t,v)!==v},hasIn:function(t){return this.getIn(t,v)!==v},isSubset:function(t){return t="function"==typeof t.includes?t:i(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:i(t)).isSubset(this)},keyOf:function(t){return this.findKey(function(e){return _t(e,t)})},keySeq:function(){return this.toSeq().map(Ci).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return We(this,t)},maxBy:function(t,e){return We(this,e,t)},min:function(t){return We(this,t?ji(t):Li)},minBy:function(t,e){return We(this,e?ji(e):Li,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return Ke(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return Ke(this,Ue(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Ti(t),e)},sortBy:function(t,e){return Ke(this,Je(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return Ke(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return Ke(this,function(t,e,i){var n=Qe(t);return n.__iterateUncached=function(n,r){var o=this;if(r)return this.cacheResult().__iterate(n,r);var s=0;return t.__iterate(function(t,r,a){return e.call(i,t,r,a)&&++s&&n(t,r,o)}),s},n.__iteratorUncached=function(n,r){var o=this;if(r)return this.cacheResult().__iterator(n,r);var s=t.__iterator(j,r),a=!0;return new R(function(){if(!a)return{value:void 0,done:!0};var t=s.next();if(t.done)return t;var r=t.value,u=r[0],c=r[1];return e.call(i,c,u,o)?n===j?t:F(n,u,c,t):(a=!1,{value:void 0,done:!0})})},n}(this,t,e))},takeUntil:function(t,e){return this.takeWhile(Ti(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=h(t),i=a(t),n=e?1:0;return function(t,e){return e=At(e,3432918353),e=At(e<<15|e>>>-15,461845907),e=At(e<<13|e>>>-13,5),e=At((e=(e+3864292196|0)^t)^e>>>16,2246822507),e=St((e=At(e^e>>>13,3266489909))^e>>>16)}(t.__iterate(i?e?function(t,e){n=31*n+Ri(Bt(t),Bt(e))|0}:function(t,e){n=n+Ri(Bt(t),Bt(e))|0}:e?function(t){n=31*n+Bt(t)|0}:function(t){n=n+Bt(t)|0}),n)}(this))}});var Mi=i.prototype;Mi[l]=!0,Mi[L]=Mi.values,Mi.__toJS=Mi.toArray,Mi.__toStringMapper=zi,Mi.inspect=Mi.toSource=function(){return this.toString()},Mi.chain=Mi.flatMap,Mi.contains=Mi.includes,Pi(n,{flip:function(){return Ke(this,Re(this))},mapEntries:function(t,e){var i=this,n=0;return Ke(this,this.toSeq().map(function(r,o){return t.call(e,[o,r],n++,i)}).fromEntrySeq())},mapKeys:function(t,e){var i=this;return Ke(this,this.toSeq().flip().map(function(n,r){return t.call(e,n,r,i)}).flip())}});var Ei=n.prototype;function Ci(t,e){return e}function ki(t,e){return[e,t]}function Ti(t){return function(){return!t.apply(this,arguments)}}function ji(t){return function(){return-t.apply(this,arguments)}}function zi(t){return"string"==typeof t?JSON.stringify(t):String(t)}function Di(){return S(arguments)}function Li(t,e){return t<e?1:t>e?-1:0}function Ri(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}return Ei[f]=!0,Ei[L]=Mi.entries,Ei.__toJS=Mi.toObject,Ei.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+zi(t)},Pi(r,{toKeyedSeq:function(){return new je(this,!1)},filter:function(t,e){return Ke(this,Ve(this,t,e,!1))},findIndex:function(t,e){var i=this.findEntry(t,e);return i?i[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return Ke(this,qe(this,!1))},slice:function(t,e){return Ke(this,Ne(this,t,e,!1))},splice:function(t,e){var i=arguments.length;if(e=Math.max(0|e,0),0===i||2===i&&!e)return this;t=M(t,t<0?this.count():this.size);var n=this.slice(0,t);return Ke(this,1===i?n:n.concat(S(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var i=this.findLastEntry(t,e);return i?i[0]:-1},first:function(){return this.get(0)},flatten:function(t){return Ke(this,Ge(this,t,!1))},get:function(t,e){return(t=I(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find(function(e,i){return i===t},void 0,e)},has:function(t){return(t=I(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return Ke(this,function(t,e){var i=Qe(t);return i.size=t.size&&2*t.size-1,i.__iterateUncached=function(i,n){var r=this,o=0;return t.__iterate(function(t,n){return(!o||!1!==i(e,o++,r))&&!1!==i(t,o++,r)},n),o},i.__iteratorUncached=function(i,n){var r,o=t.__iterator(T,n),s=0;return new R(function(){return(!r||s%2)&&(r=o.next()).done?r:s%2?F(i,s++,e):F(i,s++,r.value,r)})},i}(this,t))},interleave:function(){var t=[this].concat(S(arguments)),e=He(this.toSeq(),H.of,t),i=e.flatten(!0);return e.size&&(i.size=e.size*t.length),Ke(this,i)},keySeq:function(){return vt(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return Ke(this,Ue(this,t,e,!1))},zip:function(){return Ke(this,He(this,Di,[this].concat(S(arguments))))},zipWith:function(t){var e=S(arguments);return e[0]=this,Ke(this,He(this,t,e))}}),r.prototype[m]=!0,r.prototype[_]=!0,Pi(o,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),o.prototype.has=Mi.includes,o.prototype.contains=o.prototype.includes,Pi(Y,n.prototype),Pi(H,r.prototype),Pi(K,o.prototype),Pi(bt,n.prototype),Pi(xt,r.prototype),Pi(wt,o.prototype),{Iterable:i,Seq:W,Collection:gt,Map:Rt,OrderedMap:Me,List:fe,Stack:xi,Set:ai,OrderedSet:pi,Record:ni,Range:vt,Repeat:dt,is:_t,fromJS:lt}}()},function(t,e,i){var n=i(7);t.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e){t.exports={}},function(t,e,i){var n=i(0),r=i(43),o=i(6),s=i(118),a="["+s+"]",u=RegExp("^"+a+a+"*"),c=RegExp(a+a+"*$"),h=function(t,e,i){var r={},a=o(function(){return!!s[t]()||""!=""[t]()}),u=r[t]=a?e(l):s[t];i&&(r[i]=u),n(n.P+n.F*a,"String",r)},l=h.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(c,"")),t};t.exports=h},function(t,e,i){var n=i(13).f,r=i(32),o=i(11)("toStringTag");t.exports=function(t,e,i){t&&!r(t=i?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=f;var r=i(4),o=i(15),s=(i(16),i(2)),a=i(10),u=i(8),c=i(1),h=(i(38),i(9)),l=i(33);function f(t){if(!(this instanceof f))return new f(t);f._super.call(this),this.m_type=f.TYPE,this.m_radius=h.polygonRadius,this.m_centroid=c.zero(),this.m_vertices=[],this.m_normals=[],this.m_count=0,t&&t.length&&this._set(t)}f._super=l,f.prototype=o(f._super.prototype),f.TYPE="polygon",f.prototype.getVertex=function(t){return n&&r.assert(0<=t&&t<this.m_count),this.m_vertices[t]},f.prototype._clone=function(){var t=new f;t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_count=this.m_count,t.m_centroid.set(this.m_centroid);for(var e=0;e<this.m_count;e++)t.m_vertices.push(this.m_vertices[e].clone());for(e=0;e<this.m_normals.length;e++)t.m_normals.push(this.m_normals[e].clone());return t},f.prototype.getChildCount=function(){return 1},f.prototype._set=function(t){if(n&&r.assert(3<=t.length&&t.length<=h.maxPolygonVertices),t.length<3)this._setAsBox(1,1);else{for(var e=s.min(t.length,h.maxPolygonVertices),i=[],o=0,a=0;a<e;++a){for(var u=t[a],l=!0,f=0;f<o;++f)if(c.distanceSquared(u,i[f])<.25*h.linearSlopSquared){l=!1;break}l&&(i[o++]=u)}if((e=o)<3)return n&&r.assert(!1),void this._setAsBox(1,1);var m=0,_=i[0].x;for(a=1;a<e;++a){var p=i[a].x;(p>_||p==_&&i[a].y<i[m].y)&&(m=a,_=p)}for(var d=[],y=0,v=m;;){d[y]=v;var g=0;for(f=1;f<e;++f)if(g!=v){var b=c.sub(i[g],i[d[y]]),x=(u=c.sub(i[f],i[d[y]]),c.cross(b,u));x<0&&(g=f),0==x&&u.lengthSquared()>b.lengthSquared()&&(g=f)}else g=f;if(++y,v=g,g==m)break}if(y<3)return n&&r.assert(!1),void this._setAsBox(1,1);this.m_count=y;for(a=0;a<y;++a)this.m_vertices[a]=i[d[a]];for(a=0;a<y;++a){var w=a,A=a+1<y?a+1:0,S=c.sub(this.m_vertices[A],this.m_vertices[w]);n&&r.assert(S.lengthSquared()>s.EPSILON*s.EPSILON),this.m_normals[a]=c.cross(S,1),this.m_normals[a].normalize()}this.m_centroid=function(t,e){n&&r.assert(e>=3);for(var i=c.zero(),o=0,a=c.zero(),u=0;u<e;++u){var h=a,l=t[u],f=u+1<e?t[u+1]:t[0],m=c.sub(l,h),_=c.sub(f,h),p=.5*c.cross(m,_);o+=p,i.wAdd(p*(1/3),h),i.wAdd(p*(1/3),l),i.wAdd(p*(1/3),f)}return n&&r.assert(o>s.EPSILON),i.mul(1/o),i}(this.m_vertices,y)}},f.prototype._setAsBox=function(t,e,i,n){if(this.m_vertices[0]=c.neo(-t,-e),this.m_vertices[1]=c.neo(t,-e),this.m_vertices[2]=c.neo(t,e),this.m_vertices[3]=c.neo(-t,e),this.m_normals[0]=c.neo(0,-1),this.m_normals[1]=c.neo(1,0),this.m_normals[2]=c.neo(0,1),this.m_normals[3]=c.neo(-1,0),this.m_count=4,c.isValid(i)){n=n||0,this.m_centroid.set(i);var r=a.identity();r.p.set(i),r.q.set(n);for(var o=0;o<this.m_count;++o)this.m_vertices[o]=a.mul(r,this.m_vertices[o]),this.m_normals[o]=u.mul(r.q,this.m_normals[o])}},f.prototype.testPoint=function(t,e){for(var i=u.mulT(t.q,c.sub(e,t.p)),n=0;n<this.m_count;++n){if(c.dot(this.m_normals[n],c.sub(i,this.m_vertices[n]))>0)return!1}return!0},f.prototype.rayCast=function(t,e,i,o){for(var s=u.mulT(i.q,c.sub(e.p1,i.p)),a=u.mulT(i.q,c.sub(e.p2,i.p)),h=c.sub(a,s),l=0,f=e.maxFraction,m=-1,_=0;_<this.m_count;++_){var p=c.dot(this.m_normals[_],c.sub(this.m_vertices[_],s)),d=c.dot(this.m_normals[_],h);if(0==d){if(p<0)return!1}else d<0&&p<l*d?(l=p/d,m=_):d>0&&p<f*d&&(f=p/d);if(f<l)return!1}return n&&r.assert(0<=l&&l<=e.maxFraction),m>=0&&(t.fraction=l,t.normal=u.mul(i.q,this.m_normals[m]),!0)},f.prototype.computeAABB=function(t,e,i){for(var n=1/0,r=1/0,o=-1/0,u=-1/0,c=0;c<this.m_count;++c){var h=a.mul(e,this.m_vertices[c]);n=s.min(n,h.x),o=s.max(o,h.x),r=s.min(r,h.y),u=s.max(u,h.y)}t.lowerBound.set(n,r),t.upperBound.set(o,u),t.extend(this.m_radius)},f.prototype.computeMass=function(t,e){n&&r.assert(this.m_count>=3);for(var i=c.zero(),o=0,a=0,u=c.zero(),h=0;h<this.m_count;++h)u.add(this.m_vertices[h]);u.mul(1/this.m_count);for(h=0;h<this.m_count;++h){var l=c.sub(this.m_vertices[h],u),f=h+1<this.m_count?c.sub(this.m_vertices[h+1],u):c.sub(this.m_vertices[0],u),m=c.cross(l,f),_=.5*m;o+=_,i.wAdd(_*(1/3),l,_*(1/3),f);var p=l.x,d=l.y,y=f.x,v=f.y;a+=1/3*.25*m*(p*p+y*p+y*y+(d*d+v*d+v*v))}t.mass=e*o,n&&r.assert(o>s.EPSILON),i.mul(1/o),t.center.wSet(1,i,1,u),t.I=e*a,t.I+=t.mass*(c.dot(t.center,t.center)-c.dot(i,i))},f.prototype.validate=function(){for(var t=0;t<this.m_count;++t)for(var e=t,i=t<this.m_count-1?e+1:0,n=this.m_vertices[e],r=c.sub(this.m_vertices[i],n),o=0;o<this.m_count;++o)if(o!=e&&o!=i){var s=c.sub(this.m_vertices[o],n);if(c.cross(r,s)<0)return!1}return!0},f.prototype.computeDistanceProxy=function(t){t.m_vertices=this.m_vertices,t.m_count=this.m_count,t.m_radius=this.m_radius}},function(t,e,i){var n=i(35),r=i(11)("toStringTag"),o="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,i,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?i:o?n(e):"Object"==(s=n(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,i){var n=i(35);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=c;var n=i(15),r=(i(16),i(9)),o=i(33),s=(i(2),i(10)),a=i(8),u=i(1);i(38);function c(t,e){if(!(this instanceof c))return new c(t,e);c._super.call(this),this.m_type=c.TYPE,this.m_radius=r.polygonRadius,this.m_vertex1=t?u.clone(t):u.zero(),this.m_vertex2=e?u.clone(e):u.zero(),this.m_vertex0=u.zero(),this.m_vertex3=u.zero(),this.m_hasVertex0=!1,this.m_hasVertex3=!1}c._super=o,c.prototype=n(c._super.prototype),c.TYPE="edge",c.prototype.setNext=function(t){return t?(this.m_vertex3.set(t),this.m_hasVertex3=!0):(this.m_vertex3.setZero(),this.m_hasVertex3=!1),this},c.prototype.setPrev=function(t){return t?(this.m_vertex0.set(t),this.m_hasVertex0=!0):(this.m_vertex0.setZero(),this.m_hasVertex0=!1),this},c.prototype._set=function(t,e){return this.m_vertex1.set(t),this.m_vertex2.set(e),this.m_hasVertex0=!1,this.m_hasVertex3=!1,this},c.prototype._clone=function(){var t=new c;return t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_vertex1.set(this.m_vertex1),t.m_vertex2.set(this.m_vertex2),t.m_vertex0.set(this.m_vertex0),t.m_vertex3.set(this.m_vertex3),t.m_hasVertex0=this.m_hasVertex0,t.m_hasVertex3=this.m_hasVertex3,t},c.prototype.getChildCount=function(){return 1},c.prototype.testPoint=function(t,e){return!1},c.prototype.rayCast=function(t,e,i,n){var r=a.mulT(i.q,u.sub(e.p1,i.p)),o=a.mulT(i.q,u.sub(e.p2,i.p)),s=u.sub(o,r),c=this.m_vertex1,h=this.m_vertex2,l=u.sub(h,c),f=u.neo(l.y,-l.x);f.normalize();var m=u.dot(f,u.sub(c,r)),_=u.dot(f,s);if(0==_)return!1;var p=m/_;if(p<0||e.maxFraction<p)return!1;var d=u.add(r,u.mul(p,s)),y=u.sub(h,c),v=u.dot(y,y);if(0==v)return!1;var g=u.dot(u.sub(d,c),y)/v;return!(g<0||1<g)&&(t.fraction=p,t.normal=m>0?a.mul(i.q,f).neg():a.mul(i.q,f),!0)},c.prototype.computeAABB=function(t,e,i){var n=s.mul(e,this.m_vertex1),r=s.mul(e,this.m_vertex2);t.combinePoints(n,r),t.extend(this.m_radius)},c.prototype.computeMass=function(t,e){t.mass=0,t.center.wSet(.5,this.m_vertex1,.5,this.m_vertex2),t.I=0},c.prototype.computeDistanceProxy=function(t){t.m_vertices.push(this.m_vertex1),t.m_vertices.push(this.m_vertex2),t.m_count=2,t.m_radius=this.m_radius}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=h;var r=i(4),o=i(15),s=(i(16),i(2)),a=(i(10),i(8)),u=i(1),c=(i(38),i(9),i(33));function h(t,e){if(!(this instanceof h))return new h(t,e);h._super.call(this),this.m_type=h.TYPE,this.m_p=u.zero(),this.m_radius=1,"object"==typeof t&&u.isValid(t)?(this.m_p.set(t),"number"==typeof e&&(this.m_radius=e)):"number"==typeof t&&(this.m_radius=t)}h._super=c,h.prototype=o(h._super.prototype),h.TYPE="circle",h.prototype.getRadius=function(){return this.m_radius},h.prototype.getCenter=function(){return this.m_p},h.prototype.getSupportVertex=function(t){return this.m_p},h.prototype.getVertex=function(t){return n&&r.assert(0==t),this.m_p},h.prototype.getVertexCount=function(t){return 1},h.prototype._clone=function(){var t=new h;return t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_p=this.m_p.clone(),t},h.prototype.getChildCount=function(){return 1},h.prototype.testPoint=function(t,e){var i=u.add(t.p,a.mul(t.q,this.m_p)),n=u.sub(e,i);return u.dot(n,n)<=this.m_radius*this.m_radius},h.prototype.rayCast=function(t,e,i,n){var r=u.add(i.p,a.mul(i.q,this.m_p)),o=u.sub(e.p1,r),c=u.dot(o,o)-this.m_radius*this.m_radius,h=u.sub(e.p2,e.p1),l=u.dot(o,h),f=u.dot(h,h),m=l*l-f*c;if(m<0||f<s.EPSILON)return!1;var _=-(l+s.sqrt(m));return 0<=_&&_<=e.maxFraction*f&&(_/=f,t.fraction=_,t.normal=u.add(o,u.mul(_,h)),t.normal.normalize(),!0)},h.prototype.computeAABB=function(t,e,i){var n=u.add(e.p,a.mul(e.q,this.m_p));t.lowerBound.set(n.x-this.m_radius,n.y-this.m_radius),t.upperBound.set(n.x+this.m_radius,n.y+this.m_radius)},h.prototype.computeMass=function(t,e){t.mass=e*s.PI*this.m_radius*this.m_radius,t.center=this.m_p,t.I=t.mass*(.5*this.m_radius*this.m_radius+u.dot(this.m_p,this.m_p))},h.prototype.computeDistanceProxy=function(t){t.m_vertices.push(this.m_p),t.m_count=1,t.m_radius=this.m_radius}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=_,t.exports.Input=l,t.exports.Output=f,t.exports.Proxy=p,t.exports.Cache=m;var r=i(9),o=i(4),s=i(96),a=i(2),u=i(1),c=(i(20),i(21),i(25),i(8)),h=(i(18),i(10));i(23),i(22);function l(){this.proxyA=new p,this.proxyB=new p,this.transformA=null,this.transformB=null,this.useRadii=!1}function f(){this.pointA=u.zero(),this.pointB=u.zero(),this.distance,this.iterations}function m(){this.metric=0,this.indexA=[],this.indexB=[],this.count=0}function _(t,e,i){++s.gjkCalls;var n=i.proxyA,o=i.proxyB,l=i.transformA,f=i.transformB,m=new y;m.readCache(e,n,l,o,f);for(var _=m.m_v,p=r.maxDistnceIterations,d=[],v=[],g=0,b=0;b<p;){g=m.m_count;for(var x=0;x<g;++x)d[x]=_[x].indexA,v[x]=_[x].indexB;if(m.solve(),3==m.m_count)break;(P=m.getClosestPoint()).lengthSquared();var w=m.getSearchDirection();if(w.lengthSquared()<a.EPSILON*a.EPSILON)break;var A=_[m.m_count];A.indexA=n.getSupport(c.mulT(l.q,u.neg(w))),A.wA=h.mul(l,n.getVertex(A.indexA)),A.indexB=o.getSupport(c.mulT(f.q,w)),A.wB=h.mul(f,o.getVertex(A.indexB)),A.w=u.sub(A.wB,A.wA),++b,++s.gjkIters;var S=!1;for(x=0;x<g;++x)if(A.indexA==d[x]&&A.indexB==v[x]){S=!0;break}if(S)break;++m.m_count}if(s.gjkMaxIters=a.max(s.gjkMaxIters,b),m.getWitnessPoints(t.pointA,t.pointB),t.distance=u.distance(t.pointA,t.pointB),t.iterations=b,m.writeCache(e),i.useRadii){var B=n.m_radius,I=o.m_radius;if(t.distance>B+I&&t.distance>a.EPSILON){t.distance-=B+I;var O=u.sub(t.pointB,t.pointA);O.normalize(),t.pointA.wAdd(B,O),t.pointB.wSub(I,O)}else{var P=u.mid(t.pointA,t.pointB);t.pointA.set(P),t.pointB.set(P),t.distance=0}}}function p(){this.m_buffer=[],this.m_vertices=[],this.m_count=0,this.m_radius=0}function d(){this.indexA,this.indexB,this.wA=u.zero(),this.wB=u.zero(),this.w=u.zero(),this.a}function y(){this.m_v1=new d,this.m_v2=new d,this.m_v3=new d,this.m_v=[this.m_v1,this.m_v2,this.m_v3],this.m_count}s.gjkCalls=0,s.gjkIters=0,s.gjkMaxIters=0,p.prototype.getVertexCount=function(){return this.m_count},p.prototype.getVertex=function(t){return n&&o.assert(0<=t&&t<this.m_count),this.m_vertices[t]},p.prototype.getSupport=function(t){for(var e=0,i=u.dot(this.m_vertices[0],t),n=0;n<this.m_count;++n){var r=u.dot(this.m_vertices[n],t);r>i&&(e=n,i=r)}return e},p.prototype.getSupportVertex=function(t){return this.m_vertices[this.getSupport(t)]},p.prototype.set=function(t,e){n&&o.assert("function"==typeof t.computeDistanceProxy),t.computeDistanceProxy(this,e)},d.prototype.set=function(t){this.indexA=t.indexA,this.indexB=t.indexB,this.wA=u.clone(t.wA),this.wB=u.clone(t.wB),this.w=u.clone(t.w),this.a=t.a},y.prototype.print=function(){return 3==this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y,this.m_v2.a,this.m_v2.wA.x,this.m_v2.wA.y,this.m_v2.wB.x,this.m_v2.wB.y,this.m_v3.a,this.m_v3.wA.x,this.m_v3.wA.y,this.m_v3.wB.x,this.m_v3.wB.y].toString():2==this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y,this.m_v2.a,this.m_v2.wA.x,this.m_v2.wA.y,this.m_v2.wB.x,this.m_v2.wB.y].toString():1==this.m_count?["+"+this.m_count,this.m_v1.a,this.m_v1.wA.x,this.m_v1.wA.y,this.m_v1.wB.x,this.m_v1.wB.y].toString():"+"+this.m_count},y.prototype.readCache=function(t,e,i,r,s){n&&o.assert(t.count<=3),this.m_count=t.count;for(var c=0;c<this.m_count;++c){(p=this.m_v[c]).indexA=t.indexA[c],p.indexB=t.indexB[c];var l=e.getVertex(p.indexA),f=r.getVertex(p.indexB);p.wA=h.mul(i,l),p.wB=h.mul(s,f),p.w=u.sub(p.wB,p.wA),p.a=0}if(this.m_count>1){var m=t.metric,_=this.getMetric();(_<.5*m||2*m<_||_<a.EPSILON)&&(this.m_count=0)}if(0==this.m_count){var p;(p=this.m_v[0]).indexA=0,p.indexB=0;l=e.getVertex(0),f=r.getVertex(0);p.wA=h.mul(i,l),p.wB=h.mul(s,f),p.w=u.sub(p.wB,p.wA),p.a=1,this.m_count=1}},y.prototype.writeCache=function(t){t.metric=this.getMetric(),t.count=this.m_count;for(var e=0;e<this.m_count;++e)t.indexA[e]=this.m_v[e].indexA,t.indexB[e]=this.m_v[e].indexB},y.prototype.getSearchDirection=function(){switch(this.m_count){case 1:return u.neg(this.m_v1.w);case 2:var t=u.sub(this.m_v2.w,this.m_v1.w);return u.cross(t,u.neg(this.m_v1.w))>0?u.cross(1,t):u.cross(t,1);default:return n&&o.assert(!1),u.zero()}},y.prototype.getClosestPoint=function(){switch(this.m_count){case 0:return n&&o.assert(!1),u.zero();case 1:return u.clone(this.m_v1.w);case 2:return u.wAdd(this.m_v1.a,this.m_v1.w,this.m_v2.a,this.m_v2.w);case 3:return u.zero();default:return n&&o.assert(!1),u.zero()}},y.prototype.getWitnessPoints=function(t,e){switch(this.m_count){case 0:n&&o.assert(!1);break;case 1:t.set(this.m_v1.wA),e.set(this.m_v1.wB);break;case 2:t.wSet(this.m_v1.a,this.m_v1.wA,this.m_v2.a,this.m_v2.wA),e.wSet(this.m_v1.a,this.m_v1.wB,this.m_v2.a,this.m_v2.wB);break;case 3:t.wSet(this.m_v1.a,this.m_v1.wA,this.m_v2.a,this.m_v2.wA),t.wAdd(this.m_v3.a,this.m_v3.wA),e.set(t);break;default:n&&o.assert(!1)}},y.prototype.getMetric=function(){switch(this.m_count){case 0:return n&&o.assert(!1),0;case 1:return 0;case 2:return u.distance(this.m_v1.w,this.m_v2.w);case 3:return u.cross(u.sub(this.m_v2.w,this.m_v1.w),u.sub(this.m_v3.w,this.m_v1.w));default:return n&&o.assert(!1),0}},y.prototype.solve=function(){switch(this.m_count){case 1:break;case 2:this.solve2();break;case 3:this.solve3();break;default:n&&o.assert(!1)}},y.prototype.solve2=function(){var t=this.m_v1.w,e=this.m_v2.w,i=u.sub(e,t),n=-u.dot(t,i);if(n<=0)return this.m_v1.a=1,void(this.m_count=1);var r=u.dot(e,i);if(r<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.set(this.m_v2);var o=1/(r+n);this.m_v1.a=r*o,this.m_v2.a=n*o,this.m_count=2},y.prototype.solve3=function(){var t=this.m_v1.w,e=this.m_v2.w,i=this.m_v3.w,n=u.sub(e,t),r=u.dot(t,n),o=u.dot(e,n),s=-r,a=u.sub(i,t),c=u.dot(t,a),h=u.dot(i,a),l=-c,f=u.sub(i,e),m=u.dot(e,f),_=u.dot(i,f),p=-m,d=u.cross(n,a),y=d*u.cross(e,i),v=d*u.cross(i,t),g=d*u.cross(t,e);if(s<=0&&l<=0)return this.m_v1.a=1,void(this.m_count=1);if(o>0&&s>0&&g<=0){var b=1/(o+s);return this.m_v1.a=o*b,this.m_v2.a=s*b,void(this.m_count=2)}if(h>0&&l>0&&v<=0){var x=1/(h+l);return this.m_v1.a=h*x,this.m_v3.a=l*x,this.m_count=2,void this.m_v2.set(this.m_v3)}if(o<=0&&p<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.set(this.m_v2);if(h<=0&&_<=0)return this.m_v3.a=1,this.m_count=1,void this.m_v1.set(this.m_v3);if(_>0&&p>0&&y<=0){var w=1/(_+p);return this.m_v2.a=_*w,this.m_v3.a=p*w,this.m_count=2,void this.m_v1.set(this.m_v3)}var A=1/(y+v+g);this.m_v1.a=y*A,this.m_v2.a=v*A,this.m_v3.a=g*A,this.m_count=3},_.testOverlap=function(t,e,i,n,r,o){var s=new l;s.proxyA.set(t,e),s.proxyB.set(i,n),s.transformA=r,s.transformB=o,s.useRadii=!0;var u=new m,c=new f;return _(c,u,s),c.distance<10*a.EPSILON}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0},r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=c(i(98)),s=c(i(39)),a=c(i(49)),u=i(45);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i._game=null,i._parent=null,i._pos=new a.default(0,0),i._rotation=0,i._width=0,i._height=0,i._speed=new a.default(0,0),i._components={},i._state={},i._fixedPosition=!1,t&&(0,u.setProperties)(i,t),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),r(e,[{key:"onClick",value:function(t){}},{key:"onMouseDown",value:function(t){}},{key:"onMouseUp",value:function(t){}},{key:"onMouseOver",value:function(t){}},{key:"onMouseOut",value:function(t){}},{key:"onDragStart",value:function(t){}},{key:"onDrag",value:function(t){}},{key:"onDragEnd",value:function(t){}},{key:"onPreprocess",value:function(t){}},{key:"onProcess",value:function(t){}},{key:"onPostprocess",value:function(t){}},{key:"onPredraw",value:function(t,e){}},{key:"onDraw",value:function(t,e){}},{key:"onPostdraw",value:function(t,e){}}]),r(e,[{key:"removeComponent",value:function(t){if(t instanceof s.default){var e=Object.values(this._components).indexOf(t);return-1!=e&&(this._components[Object.keys(this._components)[e]]=t),!0}return"string"==typeof t&&(delete this._components[t],!0)}},{key:"addComponent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null;if(t instanceof s.default){if(null!=this._components[t.type])return void console.warn("Replacing existing component! "+t.type);i=t}if("string"!=typeof t||(i=s.default.createComponent(t,e)))return i&&(this._components[i.type]=i,null!=this.game&&i.addedToGameObject(this.game,this)),i;console.log("error creating commponent: "+t)}},{key:"getComponent",value:function(t){var e=this._components[t];return void 0===e?null:e}},{key:"hasComponent",value:function(t){var e=this._components[t];return void 0!==e&&null!==e}},{key:"rotate",value:function(t){this._rotation+=t}},{key:"preprocess",value:function(t){void 0!==this.onPreprocess&&null!=this.onPreprocess&&this.onPreprocess(t),n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"preprocess",this).call(this,t),Object.values(this._components).forEach(function(e){e.preprocess(t)})}},{key:"process",value:function(t){var i=t.timeDelta;void 0!==this.onProcess&&null!=this.onProcess&&this.onProcess(t),this.getComponent("physicsbody")||(this.pos=new a.default(this.xSpeed*i,this.ySpeed*i)),n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"process",this).call(this,t),Object.values(this._components).forEach(function(e){e.process(t)})}},{key:"postprocess",value:function(t){void 0!==this.onPostprocess&&null!=this.onPostprocess&&this.onPostprocess(t),n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"postprocess",this).call(this,t),Object.values(this._components).forEach(function(e){e.postprocess(t)})}},{key:"predraw",value:function(t,i){void 0!==this.onPredraw&&null!=this.onPredraw&&this.onPredraw(t,i),n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"predraw",this).call(this,t,i),Object.values(this._components).forEach(function(e){e.predraw(t,i)})}},{key:"draw",value:function(t,i){void 0!==this.onDraw&&null!=this.onDraw&&this.onDraw(t,i),n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"draw",this).call(this,t,i),Object.values(this._components).forEach(function(e){e.draw(t,i)})}},{key:"postdraw",value:function(t,i){void 0!==this.onPostdraw&&null!=this.onPostdraw&&this.onPostdraw(t,i),n(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"postdraw",this).call(this,t,i),Object.values(this._components).forEach(function(e){e.postdraw(t,i)})}},{key:"toJSON",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=Object.assign({},this);return o._components={},Object.keys(this._components).forEach(function(t){o._components[i._components[t].name]=i._components[t]}),(0,u.deepSerialize)(o,["_parent","_game","_state"],t,e,n,r)}},{key:"state",get:function(){return this._state}},{key:"game",get:function(){return this._game},set:function(t){var e=this;this._game=t,this._children.forEach(function(e){e.game=t}),Object.values(this._components).forEach(function(i){i.addedToGameObject(t,e)})}},{key:"parent",get:function(){return this._parent},set:function(t){this._parent=t,t.hasGameObject(this)||t.addGameObject(this),null!=t.game&&(this.game=t.game)}},{key:"pos",get:function(){return this._pos},set:function(t){this._pos=t;var e=this.getComponent("physicsbody");if(e&&e.body){var i=e.body.getPosition();i.x=t.x,i.y=t.y,e.body.setPosition(i)}}},{key:"x",get:function(){return this._pos.x},set:function(t){this.pos=this.pos.setX(t)}},{key:"y",get:function(){return this._pos.y},set:function(t){this.pos=this.pos.setY(t)}},{key:"hovered",get:function(){return this.game.hoveredObject===this}},{key:"drawPos",get:function(){if(null==this.game)return new a.default(0,0);if(this.fixedPosition){var t=this.pos;return this.parent&&this.parent.fixedPosition&&(t=t.add(this.parent.drawPos)),t}t=this.pos.setY(this.game.screenCoordToWorld(this.game.screenSize).y-this.y);return this.parent?t.add(this.parent.drawPos):t}},{key:"fixedPosition",get:function(){return this._fixedPosition},set:function(t){this._fixedPosition=t}},{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t;var e=this.getComponent("physicsbody");e&&e.body&&e.body.setAngle(t)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}},{key:"speed",get:function(){return this._speed},set:function(t){this._speed=t;var e=this.getComponent("physicsbody");if(e&&e.body){var i=e.body.getLinearVelocity();i.x=t.x,i.y=t.y,e.body.setLinearVelocity(i)}}},{key:"xSpeed",get:function(){return this.speed.x},set:function(t){this.speed=this.speed.setX(t)}},{key:"ySpeed",get:function(){return this.speed.y},set:function(t){this.speed=this.speed.setY(t)}}],[{key:"fromJSON",value:function(t){var i="string"==typeof t?JSON.parse(t):t;(0,u.loadFunctions)(t);var n=new e;if(i){if((0,u.setProperties)(n,i,["children","components"]),i.children)for(var r=0;r<i.children.length;r++)n.addGameObject(e.fromJSON(i.children[r]));i.components&&Object.keys(i.components).forEach(function(t){i.components[t];n.addComponent(t,i.components[t])})}return n}},{key:"create",value:function(t){return e.fromJSON(t)}}]),e}();e.default=h},function(t,e,i){"use strict";var n=i(0),r=i(19),o=i(36),s=i(58);t.exports=function(t){n(n.S,t,{from:function(t){var e,i,n,a,u=arguments[1];return r(this),(e=void 0!==u)&&r(u),void 0==t?new this:(i=[],e?(n=0,a=o(u,arguments[2],2),s(t,!1,function(t){i.push(a(t,n++))})):s(t,!1,i.push,i),new this(i))}})}},function(t,e,i){"use strict";var n=i(0);t.exports=function(t){n(n.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,i){"use strict";t.exports=i(51)||!i(6)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete i(5)[t]})},function(t,e,i){for(var n,r=i(5),o=i(28),s=i(65),a=s("typed_array"),u=s("view"),c=!(!r.ArrayBuffer||!r.DataView),h=c,l=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(n=r[f[l++]])?(o(n.prototype,a,!0),o(n.prototype,u,!0)):h=!1;t.exports={ABV:c,CONSTR:h,TYPED:a,VIEW:u}},function(t,e,i){"use strict";var n=i(5),r=i(0),o=i(27),s=i(57),a=i(52),u=i(58),c=i(59),h=i(7),l=i(6),f=i(89),m=i(71),_=i(117);t.exports=function(t,e,i,p,d,y){var v=n[t],g=v,b=d?"set":"add",x=g&&g.prototype,w={},A=function(t){var e=x[t];o(x,t,"delete"==t?function(t){return!(y&&!h(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(y&&!h(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return y&&!h(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,i){return e.call(this,0===t?0:t,i),this})};if("function"==typeof g&&(y||x.forEach&&!l(function(){(new g).entries().next()}))){var S=new g,B=S[b](y?{}:-0,1)!=S,I=l(function(){S.has(1)}),O=f(function(t){new g(t)}),P=!y&&l(function(){for(var t=new g,e=5;e--;)t[b](e,e);return!t.has(-0)});O||((g=e(function(e,i){c(e,g,t);var n=_(new v,e,g);return void 0!=i&&u(i,d,n[b],n),n})).prototype=x,x.constructor=g),(I||P)&&(A("delete"),A("has"),d&&A("get")),(P||B)&&A(b),y&&x.clear&&delete x.clear}else g=p.getConstructor(e,t,d,b),s(g.prototype,i),a.NEED=!0;return m(g,t),w[t]=g,r(r.G+r.W+r.F*(g!=v),w),y||p.setStrong(g,t,d),g}},function(t,e,i){var n=i(5).navigator;t.exports=n&&n.userAgent||""},function(t,e,i){var n=i(3),r=i(19),o=i(11)("species");t.exports=function(t,e){var i,s=n(t).constructor;return void 0===s||void 0==(i=n(s)[o])?e:r(i)}},function(t,e,i){"use strict";var n=i(28),r=i(27),o=i(6),s=i(43),a=i(11);t.exports=function(t,e,i){var u=a(t),c=i(s,u,""[t]),h=c[0],l=c[1];o(function(){var e={};return e[u]=function(){return 7},7!=""[t](e)})&&(r(String.prototype,t,h),n(RegExp.prototype,u,2==e?function(t,e){return l.call(t,this,e)}:function(t){return l.call(t,this)}))}},function(t,e,i){"use strict";var n=i(3);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,i){var n=i(11)("iterator"),r=!1;try{var o=[7][n]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var i=!1;try{var o=[7],s=o[n]();s.next=function(){return{done:i=!0}},o[n]=function(){return s},t(o)}catch(t){}return i}},function(t,e,i){var n=i(7),r=i(35),o=i(11)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==r(t))}},function(t,e,i){var n=i(35);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,i){var n=i(31),r=i(12),o=i(63);t.exports=function(t){return function(e,i,s){var a,u=n(e),c=r(u.length),h=o(s,c);if(t&&i!=i){for(;c>h;)if((a=u[h++])!=a)return!0}else for(;c>h;h++)if((t||h in u)&&u[h]===i)return t||h||0;return!t&&-1}}},function(t,e,i){var n=i(37),r=i(5),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:i(51)?"pure":"global",copyright:" 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=l;var r=i(4),o=i(15),s=(i(16),i(2),i(10)),a=(i(8),i(1)),u=(i(38),i(9)),c=i(33),h=i(76);function l(t,e){if(!(this instanceof l))return new l(t,e);l._super.call(this),this.m_type=l.TYPE,this.m_radius=u.polygonRadius,this.m_vertices=[],this.m_count=0,this.m_prevVertex=null,this.m_nextVertex=null,this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,t&&t.length&&(e?this._createLoop(t):this._createChain(t))}l._super=c,l.prototype=o(l._super.prototype),l.TYPE="chain",l.prototype._createLoop=function(t){n&&r.assert(0==this.m_vertices.length&&0==this.m_count),n&&r.assert(t.length>=3);for(var e=1;e<t.length;++e){var i=t[e-1],o=t[e];n&&r.assert(a.distanceSquared(i,o)>u.linearSlopSquared)}this.m_vertices.length=0,this.m_count=t.length+1;for(e=0;e<t.length;++e)this.m_vertices[e]=t[e].clone();return this.m_vertices[t.length]=t[0].clone(),this.m_prevVertex=this.m_vertices[this.m_count-2],this.m_nextVertex=this.m_vertices[1],this.m_hasPrevVertex=!0,this.m_hasNextVertex=!0,this},l.prototype._createChain=function(t){n&&r.assert(0==this.m_vertices.length&&0==this.m_count),n&&r.assert(t.length>=2);for(var e=1;e<t.length;++e){var i=t[e-1],o=t[e];n&&r.assert(a.distanceSquared(i,o)>u.linearSlopSquared)}this.m_count=t.length;for(e=0;e<t.length;++e)this.m_vertices[e]=t[e].clone();return this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,this.m_prevVertex=null,this.m_nextVertex=null,this},l.prototype._setPrevVertex=function(t){this.m_prevVertex=t,this.m_hasPrevVertex=!0},l.prototype._setNextVertex=function(t){this.m_nextVertex=t,this.m_hasNextVertex=!0},l.prototype._clone=function(){var t=new l;return t.createChain(this.m_vertices),t.m_type=this.m_type,t.m_radius=this.m_radius,t.m_prevVertex=this.m_prevVertex,t.m_nextVertex=this.m_nextVertex,t.m_hasPrevVertex=this.m_hasPrevVertex,t.m_hasNextVertex=this.m_hasNextVertex,t},l.prototype.getChildCount=function(){return this.m_count-1},l.prototype.getChildEdge=function(t,e){n&&r.assert(0<=e&&e<this.m_count-1),t.m_type=h.TYPE,t.m_radius=this.m_radius,t.m_vertex1=this.m_vertices[e],t.m_vertex2=this.m_vertices[e+1],e>0?(t.m_vertex0=this.m_vertices[e-1],t.m_hasVertex0=!0):(t.m_vertex0=this.m_prevVertex,t.m_hasVertex0=this.m_hasPrevVertex),e<this.m_count-2?(t.m_vertex3=this.m_vertices[e+2],t.m_hasVertex3=!0):(t.m_vertex3=this.m_nextVertex,t.m_hasVertex3=this.m_hasNextVertex)},l.prototype.getVertex=function(t){return n&&r.assert(0<=t&&t<=this.m_count),t<this.m_count?this.m_vertices[t]:this.m_vertices[0]},l.prototype.testPoint=function(t,e){return!1},l.prototype.rayCast=function(t,e,i,o){return n&&r.assert(0<=o&&o<this.m_count),new h(this.getVertex(o),this.getVertex(o+1)).rayCast(t,e,i,0)},l.prototype.computeAABB=function(t,e,i){n&&r.assert(0<=i&&i<this.m_count);var o=s.mul(e,this.getVertex(i)),a=s.mul(e,this.getVertex(i+1));t.combinePoints(o,a)},l.prototype.computeMass=function(t,e){t.mass=0,t.center=a.neo(),t.I=0},l.prototype.computeDistanceProxy=function(t,e){n&&r.assert(0<=e&&e<this.m_count),t.m_buffer[0]=this.getVertex(e),t.m_buffer[1]=this.getVertex(e+1),t.m_vertices=t.m_buffer,t.m_count=2,t.m_radius=this.m_radius}},function(t,e){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;e.toString=function(t){t="string"==typeof t?t:"\n";var e="";for(var i in this)"function"!=typeof this[i]&&"object"!=typeof this[i]&&(e+=i+": "+this[i]+t);return e}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=v;var r=i(4),o=i(16),s=i(1),a=i(8),u=i(2),c=i(18),h=i(10),l=i(23),f=i(22),m=i(131),_=(i(33),i(130),v.STATIC="static"),p=v.KINEMATIC="kinematic",d=v.DYNAMIC="dynamic",y={type:_,position:s.zero(),angle:0,linearVelocity:s.zero(),angularVelocity:0,linearDamping:0,angularDamping:0,fixedRotation:!1,bullet:!1,gravityScale:1,allowSleep:!0,awake:!0,active:!0,userData:null};function v(t,e){e=o(e,y),n&&r.assert(s.isValid(e.position)),n&&r.assert(s.isValid(e.linearVelocity)),n&&r.assert(u.isFinite(e.angle)),n&&r.assert(u.isFinite(e.angularVelocity)),n&&r.assert(u.isFinite(e.angularDamping)&&e.angularDamping>=0),n&&r.assert(u.isFinite(e.linearDamping)&&e.linearDamping>=0),this.m_world=t,this.m_awakeFlag=e.awake,this.m_autoSleepFlag=e.allowSleep,this.m_bulletFlag=e.bullet,this.m_fixedRotationFlag=e.fixedRotation,this.m_activeFlag=e.active,this.m_islandFlag=!1,this.m_toiFlag=!1,this.m_userData=e.userData,this.m_type=e.type,this.m_type==d?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_xf=h.identity(),this.m_xf.p=s.clone(e.position),this.m_xf.q.setAngle(e.angle),this.m_sweep=new c,this.m_sweep.setTransform(this.m_xf),this.c_velocity=new l,this.c_position=new f,this.m_force=s.zero(),this.m_torque=0,this.m_linearVelocity=s.clone(e.linearVelocity),this.m_angularVelocity=e.angularVelocity,this.m_linearDamping=e.linearDamping,this.m_angularDamping=e.angularDamping,this.m_gravityScale=e.gravityScale,this.m_sleepTime=0,this.m_jointList=null,this.m_contactList=null,this.m_fixtureList=null,this.m_prev=null,this.m_next=null}function g(){this.mass=0,this.center=s.zero(),this.I=0}v.prototype.isWorldLocked=function(){return!(!this.m_world||!this.m_world.isLocked())},v.prototype.getWorld=function(){return this.m_world},v.prototype.getNext=function(){return this.m_next},v.prototype.setUserData=function(t){this.m_userData=t},v.prototype.getUserData=function(){return this.m_userData},v.prototype.getFixtureList=function(){return this.m_fixtureList},v.prototype.getJointList=function(){return this.m_jointList},v.prototype.getContactList=function(){return this.m_contactList},v.prototype.isStatic=function(){return this.m_type==_},v.prototype.isDynamic=function(){return this.m_type==d},v.prototype.isKinematic=function(){return this.m_type==p},v.prototype.setStatic=function(){return this.setType(_),this},v.prototype.setDynamic=function(){return this.setType(d),this},v.prototype.setKinematic=function(){return this.setType(p),this},v.prototype.getType=function(){return this.m_type},v.prototype.setType=function(t){if(n&&r.assert(t===_||t===p||t===d),n&&r.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()&&this.m_type!=t){this.m_type=t,this.resetMassData(),this.m_type==_&&(this.m_linearVelocity.setZero(),this.m_angularVelocity=0,this.m_sweep.forward(),this.synchronizeFixtures()),this.setAwake(!0),this.m_force.setZero(),this.m_torque=0;for(var e=this.m_contactList;e;){var i=e;e=e.next,this.m_world.destroyContact(i.contact)}this.m_contactList=null;for(var o=this.m_world.m_broadPhase,s=this.m_fixtureList;s;s=s.m_next)for(var a=s.m_proxyCount,u=0;u<a;++u)o.touchProxy(s.m_proxies[u].proxyId)}},v.prototype.isBullet=function(){return this.m_bulletFlag},v.prototype.setBullet=function(t){this.m_bulletFlag=!!t},v.prototype.isSleepingAllowed=function(){return this.m_autoSleepFlag},v.prototype.setSleepingAllowed=function(t){this.m_autoSleepFlag=!!t,0==this.m_autoSleepFlag&&this.setAwake(!0)},v.prototype.isAwake=function(){return this.m_awakeFlag},v.prototype.setAwake=function(t){t?0==this.m_awakeFlag&&(this.m_awakeFlag=!0,this.m_sleepTime=0):(this.m_awakeFlag=!1,this.m_sleepTime=0,this.m_linearVelocity.setZero(),this.m_angularVelocity=0,this.m_force.setZero(),this.m_torque=0)},v.prototype.isActive=function(){return this.m_activeFlag},v.prototype.setActive=function(t){if(n&&r.assert(0==this.isWorldLocked()),t!=this.m_activeFlag)if(this.m_activeFlag=!!t,this.m_activeFlag)for(var e=this.m_world.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.createProxies(e,this.m_xf);else{for(e=this.m_world.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.destroyProxies(e);for(var o=this.m_contactList;o;){var s=o;o=o.next,this.m_world.destroyContact(s.contact)}this.m_contactList=null}},v.prototype.isFixedRotation=function(){return this.m_fixedRotationFlag},v.prototype.setFixedRotation=function(t){this.m_fixedRotationFlag!=t&&(this.m_fixedRotationFlag=!!t,this.m_angularVelocity=0,this.resetMassData())},v.prototype.getTransform=function(){return this.m_xf},v.prototype.setTransform=function(t,e){if(n&&r.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()){this.m_xf.set(t,e),this.m_sweep.setTransform(this.m_xf);for(var i=this.m_world.m_broadPhase,o=this.m_fixtureList;o;o=o.m_next)o.synchronize(i,this.m_xf,this.m_xf)}},v.prototype.synchronizeTransform=function(){this.m_sweep.getTransform(this.m_xf,1)},v.prototype.synchronizeFixtures=function(){var t=h.identity();this.m_sweep.getTransform(t,0);for(var e=this.m_world.m_broadPhase,i=this.m_fixtureList;i;i=i.m_next)i.synchronize(e,t,this.m_xf)},v.prototype.advance=function(t){this.m_sweep.advance(t),this.m_sweep.c.set(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.m_sweep.getTransform(this.m_xf,1)},v.prototype.getPosition=function(){return this.m_xf.p},v.prototype.setPosition=function(t){this.setTransform(t,this.m_sweep.a)},v.prototype.getAngle=function(){return this.m_sweep.a},v.prototype.setAngle=function(t){this.setTransform(this.m_xf.p,t)},v.prototype.getWorldCenter=function(){return this.m_sweep.c},v.prototype.getLocalCenter=function(){return this.m_sweep.localCenter},v.prototype.getLinearVelocity=function(){return this.m_linearVelocity},v.prototype.getLinearVelocityFromWorldPoint=function(t){var e=s.sub(t,this.m_sweep.c);return s.add(this.m_linearVelocity,s.cross(this.m_angularVelocity,e))},v.prototype.getLinearVelocityFromLocalPoint=function(t){return this.getLinearVelocityFromWorldPoint(this.getWorldPoint(t))},v.prototype.setLinearVelocity=function(t){this.m_type!=_&&(s.dot(t,t)>0&&this.setAwake(!0),this.m_linearVelocity.set(t))},v.prototype.getAngularVelocity=function(){return this.m_angularVelocity},v.prototype.setAngularVelocity=function(t){this.m_type!=_&&(t*t>0&&this.setAwake(!0),this.m_angularVelocity=t)},v.prototype.getLinearDamping=function(){return this.m_linearDamping},v.prototype.setLinearDamping=function(t){this.m_linearDamping=t},v.prototype.getAngularDamping=function(){return this.m_angularDamping},v.prototype.setAngularDamping=function(t){this.m_angularDamping=t},v.prototype.getGravityScale=function(){return this.m_gravityScale},v.prototype.setGravityScale=function(t){this.m_gravityScale=t},v.prototype.getMass=function(){return this.m_mass},v.prototype.getInertia=function(){return this.m_I+this.m_mass*s.dot(this.m_sweep.localCenter,this.m_sweep.localCenter)},v.prototype.getMassData=function(t){t.mass=this.m_mass,t.I=this.getInertia(),t.center.set(this.m_sweep.localCenter)},v.prototype.resetMassData=function(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.setZero(),this.isStatic()||this.isKinematic())return this.m_sweep.c0.set(this.m_xf.p),this.m_sweep.c.set(this.m_xf.p),void(this.m_sweep.a0=this.m_sweep.a);n&&r.assert(this.isDynamic());for(var t=s.zero(),e=this.m_fixtureList;e;e=e.m_next)if(0!=e.m_density){var i=new g;e.getMassData(i),this.m_mass+=i.mass,t.wAdd(i.mass,i.center),this.m_I+=i.I}this.m_mass>0?(this.m_invMass=1/this.m_mass,t.mul(this.m_invMass)):(this.m_mass=1,this.m_invMass=1),this.m_I>0&&0==this.m_fixedRotationFlag?(this.m_I-=this.m_mass*s.dot(t,t),n&&r.assert(this.m_I>0),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0);var o=s.clone(this.m_sweep.c);this.m_sweep.setLocalCenter(t,this.m_xf),this.m_linearVelocity.add(s.cross(this.m_angularVelocity,s.sub(this.m_sweep.c,o)))},v.prototype.setMassData=function(t){if(n&&r.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()&&this.m_type==d){this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=t.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,t.I>0&&0==this.m_fixedRotationFlag&&(this.m_I=t.I-this.m_mass*s.dot(t.center,t.center),n&&r.assert(this.m_I>0),this.m_invI=1/this.m_I);var e=s.clone(this.m_sweep.c);this.m_sweep.setLocalCenter(t.center,this.m_xf),this.m_linearVelocity.add(s.cross(this.m_angularVelocity,s.sub(this.m_sweep.c,e)))}},v.prototype.applyForce=function(t,e,i){this.m_type==d&&(i&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_force.add(t),this.m_torque+=s.cross(s.sub(e,this.m_sweep.c),t)))},v.prototype.applyForceToCenter=function(t,e){this.m_type==d&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&this.m_force.add(t))},v.prototype.applyTorque=function(t,e){this.m_type==d&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_torque+=t))},v.prototype.applyLinearImpulse=function(t,e,i){this.m_type==d&&(i&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.wAdd(this.m_invMass,t),this.m_angularVelocity+=this.m_invI*s.cross(s.sub(e,this.m_sweep.c),t)))},v.prototype.applyAngularImpulse=function(t,e){this.m_type==d&&(e&&0==this.m_awakeFlag&&this.setAwake(!0),this.m_awakeFlag&&(this.m_angularVelocity+=this.m_invI*t))},v.prototype.shouldCollide=function(t){if(this.m_type!=d&&t.m_type!=d)return!1;for(var e=this.m_jointList;e;e=e.next)if(e.other==t&&0==e.joint.m_collideConnected)return!1;return!0},v.prototype.createFixture=function(t,e){if(n&&r.assert(0==this.isWorldLocked()),1==this.isWorldLocked())return null;var i=new m(this,t,e);if(this.m_activeFlag){var o=this.m_world.m_broadPhase;i.createProxies(o,this.m_xf)}return i.m_next=this.m_fixtureList,this.m_fixtureList=i,i.m_density>0&&this.resetMassData(),this.m_world.m_newFixture=!0,i},v.prototype.destroyFixture=function(t){if(n&&r.assert(0==this.isWorldLocked()),1!=this.isWorldLocked()){n&&r.assert(t.m_body==this);var e=!1;if(this.m_fixtureList===t)this.m_fixtureList=t.m_next,e=!0;else for(var i=this.m_fixtureList;null!=i;){if(i.m_next===t){i.m_next=t.m_next,e=!0;break}i=i.m_next}n&&r.assert(e);for(var o=this.m_contactList;o;){var s=o.contact;o=o.next;var a=s.getFixtureA(),u=s.getFixtureB();t!=a&&t!=u||this.m_world.destroyContact(s)}if(this.m_activeFlag){var c=this.m_world.m_broadPhase;t.destroyProxies(c)}t.m_body=null,t.m_next=null,this.m_world.publish("remove-fixture",t),this.resetMassData()}},v.prototype.getWorldPoint=function(t){return h.mul(this.m_xf,t)},v.prototype.getWorldVector=function(t){return a.mul(this.m_xf.q,t)},v.prototype.getLocalPoint=function(t){return h.mulT(this.m_xf,t)},v.prototype.getLocalVector=function(t){return a.mulT(this.m_xf.q,t)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._children=[]}return n(t,[{key:"addGameObject",value:function(t){this._children.push(t),t.parent=this}},{key:"hasGameObject",value:function(t){return this._children.includes(t)}},{key:"preprocess",value:function(t){this._children.forEach(function(e){e.preprocess(t)})}},{key:"process",value:function(t){this._children.forEach(function(e){e.process(t)})}},{key:"postprocess",value:function(t){this._children.forEach(function(e){e.postprocess(t)})}},{key:"predraw",value:function(t,e){this._children.forEach(function(i){i.predraw(t,e)})}},{key:"draw",value:function(t,e){this._children.forEach(function(i){i.draw(t,e)})}},{key:"postdraw",value:function(t,e){this._children.forEach(function(i){i.postdraw(t,e)})}},{key:"game",get:function(){return null}},{key:"fixedPosition",get:function(){return!0}},{key:"drawPos",get:function(){return null}}]),t}();e.default=r},function(t,e,i){"use strict";var n=i(5),r=i(14),o=i(51),s=i(83),a=i(28),u=i(57),c=i(6),h=i(59),l=i(42),f=i(12),m=i(146),_=i(61).f,p=i(13).f,d=i(104),y=i(71),v="prototype",g="Wrong index!",b=n.ArrayBuffer,x=n.DataView,w=n.Math,A=n.RangeError,S=n.Infinity,B=b,I=w.abs,O=w.pow,P=w.floor,M=w.log,E=w.LN2,C=r?"_b":"buffer",k=r?"_l":"byteLength",T=r?"_o":"byteOffset";function j(t,e,i){var n,r,o,s=new Array(i),a=8*i-e-1,u=(1<<a)-1,c=u>>1,h=23===e?O(2,-24)-O(2,-77):0,l=0,f=t<0||0===t&&1/t<0?1:0;for((t=I(t))!=t||t===S?(r=t!=t?1:0,n=u):(n=P(M(t)/E),t*(o=O(2,-n))<1&&(n--,o*=2),(t+=n+c>=1?h/o:h*O(2,1-c))*o>=2&&(n++,o/=2),n+c>=u?(r=0,n=u):n+c>=1?(r=(t*o-1)*O(2,e),n+=c):(r=t*O(2,c-1)*O(2,e),n=0));e>=8;s[l++]=255&r,r/=256,e-=8);for(n=n<<e|r,a+=e;a>0;s[l++]=255&n,n/=256,a-=8);return s[--l]|=128*f,s}function z(t,e,i){var n,r=8*i-e-1,o=(1<<r)-1,s=o>>1,a=r-7,u=i-1,c=t[u--],h=127&c;for(c>>=7;a>0;h=256*h+t[u],u--,a-=8);for(n=h&(1<<-a)-1,h>>=-a,a+=e;a>0;n=256*n+t[u],u--,a-=8);if(0===h)h=1-s;else{if(h===o)return n?NaN:c?-S:S;n+=O(2,e),h-=s}return(c?-1:1)*n*O(2,h-e)}function D(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function L(t){return[255&t]}function R(t){return[255&t,t>>8&255]}function F(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function q(t){return j(t,52,8)}function V(t){return j(t,23,4)}function N(t,e,i){p(t[v],e,{get:function(){return this[i]}})}function U(t,e,i,n){var r=m(+i);if(r+e>t[k])throw A(g);var o=t[C]._b,s=r+t[T],a=o.slice(s,s+e);return n?a:a.reverse()}function G(t,e,i,n,r,o){var s=m(+i);if(s+e>t[k])throw A(g);for(var a=t[C]._b,u=s+t[T],c=n(+r),h=0;h<e;h++)a[u+h]=c[o?h:e-h-1]}if(s.ABV){if(!c(function(){b(1)})||!c(function(){new b(-1)})||c(function(){return new b,new b(1.5),new b(NaN),"ArrayBuffer"!=b.name})){for(var J,W=(b=function(t){return h(this,b),new B(m(t))})[v]=B[v],Y=_(B),H=0;Y.length>H;)(J=Y[H++])in b||a(b,J,B[J]);o||(W.constructor=b)}var K=new x(new b(2)),Z=x[v].setInt8;K.setInt8(0,2147483648),K.setInt8(1,2147483649),!K.getInt8(0)&&K.getInt8(1)||u(x[v],{setInt8:function(t,e){Z.call(this,t,e<<24>>24)},setUint8:function(t,e){Z.call(this,t,e<<24>>24)}},!0)}else b=function(t){h(this,b,"ArrayBuffer");var e=m(t);this._b=d.call(new Array(e),0),this[k]=e},x=function(t,e,i){h(this,x,"DataView"),h(t,b,"DataView");var n=t[k],r=l(e);if(r<0||r>n)throw A("Wrong offset!");if(r+(i=void 0===i?n-r:f(i))>n)throw A("Wrong length!");this[C]=t,this[T]=r,this[k]=i},r&&(N(b,"byteLength","_l"),N(x,"buffer","_b"),N(x,"byteLength","_l"),N(x,"byteOffset","_o")),u(x[v],{getInt8:function(t){return U(this,1,t)[0]<<24>>24},getUint8:function(t){return U(this,1,t)[0]},getInt16:function(t){var e=U(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=U(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return D(U(this,4,t,arguments[1]))},getUint32:function(t){return D(U(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return z(U(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return z(U(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){G(this,1,t,L,e)},setUint8:function(t,e){G(this,1,t,L,e)},setInt16:function(t,e){G(this,2,t,R,e,arguments[2])},setUint16:function(t,e){G(this,2,t,R,e,arguments[2])},setInt32:function(t,e){G(this,4,t,F,e,arguments[2])},setUint32:function(t,e){G(this,4,t,F,e,arguments[2])},setFloat32:function(t,e){G(this,4,t,V,e,arguments[2])},setFloat64:function(t,e){G(this,8,t,q,e,arguments[2])}});y(b,"ArrayBuffer"),y(x,"DataView"),a(x[v],s.VIEW,!0),e.ArrayBuffer=b,e.DataView=x},function(t,e,i){"use strict";var n=i(19);t.exports.f=function(t){return new function(t){var e,i;this.promise=new t(function(t,n){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=n}),this.resolve=n(e),this.reject=n(i)}(t)}},function(t,e,i){var n=i(5),r=i(102).set,o=n.MutationObserver||n.WebKitMutationObserver,s=n.process,a=n.Promise,u="process"==i(35)(s);t.exports=function(){var t,e,i,c=function(){var n,r;for(u&&(n=s.domain)&&n.exit();t;){r=t.fn,t=t.next;try{r()}catch(n){throw t?i():e=void 0,n}}e=void 0,n&&n.enter()};if(u)i=function(){s.nextTick(c)};else if(!o||n.navigator&&n.navigator.standalone)if(a&&a.resolve){var h=a.resolve(void 0);i=function(){h.then(c)}}else i=function(){r.call(n,c)};else{var l=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),i=function(){f.data=l=!l}}return function(n){var r={fn:n,next:void 0};e&&(e.next=r),t||(t=r,i()),e=r}}},function(t,e,i){var n,r,o,s=i(36),a=i(165),u=i(120),c=i(124),h=i(5),l=h.process,f=h.setImmediate,m=h.clearImmediate,_=h.MessageChannel,p=h.Dispatch,d=0,y={},v=function(){var t=+this;if(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},g=function(t){v.call(t.data)};f&&m||(f=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return y[++d]=function(){a("function"==typeof t?t:Function(t),e)},n(d),d},m=function(t){delete y[t]},"process"==i(35)(l)?n=function(t){l.nextTick(s(v,t,1))}:p&&p.now?n=function(t){p.now(s(v,t,1))}:_?(o=(r=new _).port2,r.port1.onmessage=g,n=s(o.postMessage,o,1)):h.addEventListener&&"function"==typeof postMessage&&!h.importScripts?(n=function(t){h.postMessage(t+"","*")},h.addEventListener("message",g,!1)):n="onreadystatechange"in c("script")?function(t){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),v.call(t)}}:function(t){setTimeout(s(v,t,1),0)}),t.exports={set:f,clear:m}},function(t,e,i){"use strict";var n=i(50),r=i(155),o=i(69),s=i(31);t.exports=i(112)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(t,e,i){"use strict";var n=i(17),r=i(63),o=i(12);t.exports=function(t){for(var e=n(this),i=o(e.length),s=arguments.length,a=r(s>1?arguments[1]:void 0,i),u=s>2?arguments[2]:void 0,c=void 0===u?i:r(u,i);c>a;)e[a++]=t;return e}},function(t,e,i){var n=i(318);t.exports=function(t,e){return new(n(t))(e)}},function(t,e,i){var n=i(73),r=i(11)("iterator"),o=i(69);t.exports=i(37).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||o[n(t)]}},function(t,e,i){"use strict";var n=i(13),r=i(66);t.exports=function(t,e,i){e in t?n.f(t,e,r(0,i)):t[e]=i}},function(t,e,i){var n=i(69),r=i(11)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||o[r]===t)}},function(t,e,i){var n=i(11)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[n]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,i){var n=i(90),r=i(43);t.exports=function(t,e,i){if(n(e))throw TypeError("String#"+i+" doesn't accept regex!");return String(r(t))}},function(t,e,i){"use strict";var n=i(62),r=i(66),o=i(71),s={};i(28)(s,i(11)("iterator"),function(){return this}),t.exports=function(t,e,i){t.prototype=n(s,{next:r(1,i)}),o(t,e+" Iterator")}},function(t,e,i){"use strict";var n=i(51),r=i(0),o=i(27),s=i(28),a=i(69),u=i(111),c=i(71),h=i(29),l=i(11)("iterator"),f=!([].keys&&"next"in[].keys()),m=function(){return this};t.exports=function(t,e,i,_,p,d,y){u(i,e,_);var v,g,b,x=function(t){if(!f&&t in B)return B[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},w=e+" Iterator",A="values"==p,S=!1,B=t.prototype,I=B[l]||B["@@iterator"]||p&&B[p],O=I||x(p),P=p?A?x("entries"):O:void 0,M="Array"==e&&B.entries||I;if(M&&(b=h(M.call(new t)))!==Object.prototype&&b.next&&(c(b,w,!0),n||"function"==typeof b[l]||s(b,l,m)),A&&I&&"values"!==I.name&&(S=!0,O=function(){return I.call(this)}),n&&!y||!f&&!S&&B[l]||s(B,l,O),a[e]=O,a[w]=m,p)if(v={values:A?O:x("values"),keys:d?O:x("keys"),entries:P},y)for(g in v)g in B||o(B,g,v[g]);else r(r.P+r.F*(f||S),e,v);return v}},function(t,e,i){var n=i(42),r=i(43);t.exports=function(t){return function(e,i){var o,s,a=String(r(e)),u=n(i),c=a.length;return u<0||u>=c?t?"":void 0:(o=a.charCodeAt(u))<55296||o>56319||u+1===c||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):o:t?a.slice(u,u+2):s-56320+(o-55296<<10)+65536}}},function(t,e){var i=Math.expm1;t.exports=!i||i(10)>22025.465794806718||i(10)<22025.465794806718||-2e-17!=i(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:i},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,i){"use strict";var n=i(42),r=i(43);t.exports=function(t){var e=String(r(this)),i="",o=n(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(i+=e);return i}},function(t,e,i){var n=i(7),r=i(119).set;t.exports=function(t,e,i){var o,s=e.constructor;return s!==i&&"function"==typeof s&&(o=s.prototype)!==i.prototype&&n(o)&&r&&r(t,o),t}},function(t,e){t.exports="\t\n\v\f\r \u2028\u2029\ufeff"},function(t,e,i){var n=i(7),r=i(3),o=function(t,e){if(r(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=i(36)(Function.call,i(30).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return o(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:o}},function(t,e,i){var n=i(5).document;t.exports=n&&n.documentElement},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,i){var n=i(94)("keys"),r=i(65);t.exports=function(t){return n[t]||(n[t]=r(t))}},function(t,e,i){var n=i(5),r=i(37),o=i(51),s=i(171),a=i(13).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=o?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},function(t,e,i){var n=i(7),r=i(5).document,o=n(r)&&n(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=s(i(39)),o=s(i(56));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"shaperenderer","renderer",t));return i.color="blue",i.outlineColor="black",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),n(e,[{key:"onDraw",value:function(t,e){if(null!=this.color?e.fillStyle=this.color:e.fillStyle="red",null!=this.shape){var i=this.gameObject.drawPos;this.shape.draw(e,i,this.gameObject.rotation,t.scaleRatio),e.fill(),0!=this.outlineWidth&&(e.strokeStyle=this.outlineColor,e.lineWidth=this.outlineWidth,e.stroke())}}}],[{key:"fromJSON",value:function(t){var i="string"==typeof t?JSON.parse(t):t;return new e({shape:o.default.fromJSON(i.shape),color:i.color,outlineColor:i.outlineColor,outlineWidth:i.outlineWidth})}}]),e}();e.default=a,r.default.registerComponent("shaperenderer",a)},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=y;var r=i(4),o=i(16),s=i(15),a=i(9),u=i(2),c=i(1),h=i(20),l=i(21),f=i(25),m=i(8),_=(i(18),i(10),i(23),i(22),i(24)),p=0;y.TYPE="prismatic-joint",y._super=_,y.prototype=s(y._super.prototype);var d={enableLimit:!1,lowerTranslation:0,upperTranslation:0,enableMotor:!1,maxMotorForce:0,motorSpeed:0};function y(t,e,i,n,r){if(!(this instanceof y))return new y(t,e,i,n,r);t=o(t,d),_.call(this,t,e,i),this.m_type=y.TYPE,this.m_localAnchorA=t.localAnchorA||e.getLocalPoint(n),this.m_localAnchorB=t.localAnchorB||i.getLocalPoint(n),this.m_localXAxisA=t.localAxisA||e.getLocalVector(r),this.m_localXAxisA.normalize(),this.m_localYAxisA=c.cross(1,this.m_localXAxisA),this.m_referenceAngle=i.getAngle()-e.getAngle(),this.m_impulse=h(),this.m_motorMass=0,this.m_motorImpulse=0,this.m_lowerTranslation=t.lowerTranslation,this.m_upperTranslation=t.upperTranslation,this.m_maxMotorForce=t.maxMotorForce,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=p,this.m_axis=c.zero(),this.m_perp=c.zero(),this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_axis,this.m_perp,this.m_s1,this.m_s2,this.m_a1,this.m_a2,this.m_K=new f,this.m_motorMass}y.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},y.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},y.prototype.getLocalAxisA=function(){return this.m_localXAxisA},y.prototype.getReferenceAngle=function(){return this.m_referenceAngle},y.prototype.getJointTranslation=function(){var t=this.m_bodyA.getWorldPoint(this.m_localAnchorA),e=this.m_bodyB.getWorldPoint(this.m_localAnchorB),i=c.sub(e,t),n=this.m_bodyA.getWorldVector(this.m_localXAxisA);return c.dot(i,n)},y.prototype.getJointSpeed=function(){var t=this.m_bodyA,e=this.m_bodyB,i=Mul(t.m_xf.q,this.m_localAnchorA-t.m_sweep.localCenter),n=Mul(e.m_xf.q,this.m_localAnchorB-e.m_sweep.localCenter),r=t.m_sweep.c+i,o=e.m_sweep.c+n-r,s=Mul(t.m_xf.q,this.m_localXAxisA),a=t.m_linearVelocity,u=e.m_linearVelocity,c=t.m_angularVelocity,h=e.m_angularVelocity;return Dot(o,Cross(c,s))+Dot(s,u+Cross(h,n)-a-Cross(c,i))},y.prototype.isLimitEnabled=function(){return this.m_enableLimit},y.prototype.enableLimit=function(t){t!=this.m_enableLimit&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableLimit=t,this.m_impulse.z=0)},y.prototype.getLowerLimit=function(){return this.m_lowerTranslation},y.prototype.getUpperLimit=function(){return this.m_upperTranslation},y.prototype.setLimits=function(t,e){n&&r.assert(t<=e),t==this.m_lowerTranslation&&e==this.m_upperTranslation||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e,this.m_impulse.z=0)},y.prototype.isMotorEnabled=function(){return this.m_enableMotor},y.prototype.enableMotor=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},y.prototype.setMotorSpeed=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},y.prototype.setMaxMotorForce=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorForce=t},y.prototype.getMotorSpeed=function(){return this.m_motorSpeed},y.prototype.getMotorForce=function(t){return t*this.m_motorImpulse},y.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},y.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},y.prototype.getReactionForce=function(t){return t*(this.m_impulse.x*this.m_perp+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis)},y.prototype.getReactionTorque=function(t){return t*this.m_impulse.y},y.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,r=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,h=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,f=m.neo(i),_=m.neo(s),d=m.mul(f,c.sub(this.m_localAnchorA,this.m_localCenterA)),y=m.mul(_,c.sub(this.m_localAnchorB,this.m_localCenterB)),v=c.zero();v.wAdd(1,o,1,y),v.wSub(1,e,1,d);var g=this.m_invMassA,b=this.m_invMassB,x=this.m_invIA,w=this.m_invIB;this.m_axis=m.mul(f,this.m_localXAxisA),this.m_a1=c.cross(c.add(v,d),this.m_axis),this.m_a2=c.cross(y,this.m_axis),this.m_motorMass=g+b+x*this.m_a1*this.m_a1+w*this.m_a2*this.m_a2,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),this.m_perp=m.mul(f,this.m_localYAxisA),this.m_s1=c.cross(c.add(v,d),this.m_perp),this.m_s2=c.cross(y,this.m_perp);c.cross(d,this.m_perp);var A=g+b+x*this.m_s1*this.m_s1+w*this.m_s2*this.m_s2,S=x*this.m_s1+w*this.m_s2,B=x*this.m_s1*this.m_a1+w*this.m_s2*this.m_a2,I=x+w;0==I&&(I=1);var O=x*this.m_a1+w*this.m_a2,P=g+b+x*this.m_a1*this.m_a1+w*this.m_a2*this.m_a2;if(this.m_K.ex.set(A,S,B),this.m_K.ey.set(S,I,O),this.m_K.ez.set(B,O,P),this.m_enableLimit){var M=c.dot(this.m_axis,v);u.abs(this.m_upperTranslation-this.m_lowerTranslation)<2*a.linearSlop?this.m_limitState=3:M<=this.m_lowerTranslation?1!=this.m_limitState&&(this.m_limitState=1,this.m_impulse.z=0):M>=this.m_upperTranslation?2!=this.m_limitState&&(this.m_limitState=2,this.m_impulse.z=0):(this.m_limitState=p,this.m_impulse.z=0)}else this.m_limitState=p,this.m_impulse.z=0;if(0==this.m_enableMotor&&(this.m_motorImpulse=0),t.warmStarting){this.m_impulse.mul(t.dtRatio),this.m_motorImpulse*=t.dtRatio;var E=c.wAdd(this.m_impulse.x,this.m_perp,this.m_motorImpulse+this.m_impulse.z,this.m_axis),C=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,k=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2;n.wSub(g,E),r-=x*C,h.wAdd(b,E),l+=w*k}else this.m_impulse.setZero(),this.m_motorImpulse=0;this.m_bodyA.c_velocity.v.set(n),this.m_bodyA.c_velocity.w=r,this.m_bodyB.c_velocity.v.set(h),this.m_bodyB.c_velocity.w=l},y.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=this.m_invMassA,s=this.m_invMassB,a=this.m_invIA,l=this.m_invIB;if(this.m_enableMotor&&3!=this.m_limitState){var f=c.dot(this.m_axis,c.sub(n,e))+this.m_a2*r-this.m_a1*i,m=this.m_motorMass*(this.m_motorSpeed-f),_=this.m_motorImpulse,d=t.dt*this.m_maxMotorForce;this.m_motorImpulse=u.clamp(this.m_motorImpulse+m,-d,d),m=this.m_motorImpulse-_;var y=c.zero().wSet(m,this.m_axis),v=m*this.m_a1,g=m*this.m_a2;e.wSub(o,y),i-=a*v,n.wAdd(s,y),r+=l*g}var b=c.zero();if(b.x+=c.dot(this.m_perp,n)+this.m_s2*r,b.x-=c.dot(this.m_perp,e)+this.m_s1*i,b.y=r-i,this.m_enableLimit&&this.m_limitState!=p){var x=0;x+=c.dot(this.m_axis,n)+this.m_a2*r,x-=c.dot(this.m_axis,e)+this.m_a1*i;f=h(b.x,b.y,x);var w=h(this.m_impulse),A=this.m_K.solve33(h.neg(f));this.m_impulse.add(A),1==this.m_limitState?this.m_impulse.z=u.max(this.m_impulse.z,0):2==this.m_limitState&&(this.m_impulse.z=u.min(this.m_impulse.z,0));var S=c.wAdd(-1,b,-(this.m_impulse.z-w.z),c.neo(this.m_K.ez.x,this.m_K.ez.y)),B=c.add(this.m_K.solve22(S),c.neo(w.x,w.y));this.m_impulse.x=B.x,this.m_impulse.y=B.y,A=h.sub(this.m_impulse,w);y=c.wAdd(A.x,this.m_perp,A.z,this.m_axis),v=A.x*this.m_s1+A.y+A.z*this.m_a1,g=A.x*this.m_s2+A.y+A.z*this.m_a2;e.wSub(o,y),i-=a*v,n.wAdd(s,y),r+=l*g}else{A=this.m_K.solve22(c.neg(b));this.m_impulse.x+=A.x,this.m_impulse.y+=A.y;y=c.zero().wAdd(A.x,this.m_perp),v=A.x*this.m_s1+A.y,g=A.x*this.m_s2+A.y;e.wSub(o,y),i-=a*v,n.wAdd(s,y),r+=l*g}this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=r},y.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyB.c_position.c,r=this.m_bodyB.c_position.a,o=m.neo(i),s=m.neo(r),_=this.m_invMassA,p=this.m_invMassB,d=this.m_invIA,y=this.m_invIB,v=m.mul(o,c.sub(this.m_localAnchorA,this.m_localCenterA)),g=m.mul(s,c.sub(this.m_localAnchorB,this.m_localCenterB)),b=c.sub(c.add(n,g),c.add(e,v)),x=m.mul(o,this.m_localXAxisA),w=c.cross(c.add(b,v),x),A=c.cross(g,x),S=m.mul(o,this.m_localYAxisA),B=c.cross(c.add(b,v),S),I=c.cross(g,S),O=h(),P=c.zero();P.x=c.dot(S,b),P.y=r-i-this.m_referenceAngle;var M=u.abs(P.x),E=u.abs(P.y),C=a.linearSlop,k=a.maxLinearCorrection,T=!1,j=0;if(this.m_enableLimit){var z=c.dot(x,b);u.abs(this.m_upperTranslation-this.m_lowerTranslation)<2*C?(j=u.clamp(z,-k,k),M=u.max(M,u.abs(z)),T=!0):z<=this.m_lowerTranslation?(j=u.clamp(z-this.m_lowerTranslation+C,-k,0),M=u.max(M,this.m_lowerTranslation-z),T=!0):z>=this.m_upperTranslation&&(j=u.clamp(z-this.m_upperTranslation-C,0,k),M=u.max(M,z-this.m_upperTranslation),T=!0)}if(T){var D=_+p+d*B*B+y*I*I,L=d*B+y*I,R=d*B*w+y*I*A;0==(N=d+y)&&(N=1);var F=d*w+y*A,q=_+p+d*w*w+y*A*A;(U=new f).ex.set(D,L,R),U.ey.set(L,N,F),U.ez.set(R,F,q);var V=h();V.x=P.x,V.y=P.y,V.z=j,O=U.solve33(h.neg(V))}else{var N,U;D=_+p+d*B*B+y*I*I,L=d*B+y*I;0==(N=d+y)&&(N=1),(U=new l).ex.set(D,L),U.ey.set(L,N);var G=U.solve(c.neg(P));O.x=G.x,O.y=G.y,O.z=0}var J=c.wAdd(O.x,S,O.z,x),W=O.x*B+O.y+O.z*w,Y=O.x*I+O.y+O.z*A;return e.wSub(_,J),i-=d*W,n.wAdd(p,J),r+=y*Y,this.m_bodyA.c_position.c=e,this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c=n,this.m_bodyB.c_position.a=r,M<=a.linearSlop&&E<=a.angularSlop}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=y;var r=i(4),o=i(16),s=i(15),a=i(9),u=i(2),c=i(1),h=i(20),l=i(21),f=i(25),m=i(8),_=(i(18),i(10),i(23),i(22),i(24)),p=0;y.TYPE="revolute-joint",y._super=_,y.prototype=s(y._super.prototype);var d={lowerAngle:0,upperAngle:0,maxMotorTorque:0,motorSpeed:0,enableLimit:!1,enableMotor:!1};function y(t,e,i,n){if(!(this instanceof y))return new y(t,e,i,n);t=o(t,d),_.call(this,t,e,i),this.m_type=y.TYPE,this.m_localAnchorA=t.localAnchorA||e.getLocalPoint(n),this.m_localAnchorB=t.localAnchorB||i.getLocalPoint(n),this.m_referenceAngle=i.getAngle()-e.getAngle(),this.m_impulse=h(),this.m_motorImpulse=0,this.m_lowerAngle=t.lowerAngle,this.m_upperAngle=t.upperAngle,this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass=new f,this.m_motorMass,this.m_limitState=p}y.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},y.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},y.prototype.getReferenceAngle=function(){return this.m_referenceAngle},y.prototype.getJointAngle=function(){var t=this.m_bodyA;return this.m_bodyB.m_sweep.a-t.m_sweep.a-this.m_referenceAngle},y.prototype.getJointSpeed=function(){var t=this.m_bodyA;return this.m_bodyB.m_angularVelocity-t.m_angularVelocity},y.prototype.isMotorEnabled=function(){return this.m_enableMotor},y.prototype.enableMotor=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},y.prototype.getMotorTorque=function(t){return t*this.m_motorImpulse},y.prototype.setMotorSpeed=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},y.prototype.getMotorSpeed=function(){return this.m_motorSpeed},y.prototype.setMaxMotorTorque=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorTorque=t},y.prototype.isLimitEnabled=function(){return this.m_enableLimit},y.prototype.enableLimit=function(t){t!=this.m_enableLimit&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableLimit=t,this.m_impulse.z=0)},y.prototype.getLowerLimit=function(){return this.m_lowerAngle},y.prototype.getUpperLimit=function(){return this.m_upperAngle},y.prototype.setLimits=function(t,e){n&&r.assert(t<=e),t==this.m_lowerAngle&&e==this.m_upperAngle||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_impulse.z=0,this.m_lowerAngle=t,this.m_upperAngle=e)},y.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},y.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},y.prototype.getReactionForce=function(t){return t*c.neo(this.m_impulse.x,this.m_impulse.y)},y.prototype.getReactionTorque=function(t){return t*this.m_impulse.z},y.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_position.a,o=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,h=m.neo(e),l=m.neo(r);this.m_rA=m.mul(h,c.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=m.mul(l,c.sub(this.m_localAnchorB,this.m_localCenterB));var f=this.m_invMassA,_=this.m_invMassB,d=this.m_invIA,y=this.m_invIB,v=d+y==0;if(this.m_mass.ex.x=f+_+this.m_rA.y*this.m_rA.y*d+this.m_rB.y*this.m_rB.y*y,this.m_mass.ey.x=-this.m_rA.y*this.m_rA.x*d-this.m_rB.y*this.m_rB.x*y,this.m_mass.ez.x=-this.m_rA.y*d-this.m_rB.y*y,this.m_mass.ex.y=this.m_mass.ey.x,this.m_mass.ey.y=f+_+this.m_rA.x*this.m_rA.x*d+this.m_rB.x*this.m_rB.x*y,this.m_mass.ez.y=this.m_rA.x*d+this.m_rB.x*y,this.m_mass.ex.z=this.m_mass.ez.x,this.m_mass.ey.z=this.m_mass.ez.y,this.m_mass.ez.z=d+y,this.m_motorMass=d+y,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),(0==this.m_enableMotor||v)&&(this.m_motorImpulse=0),this.m_enableLimit&&0==v){var g=r-e-this.m_referenceAngle;u.abs(this.m_upperAngle-this.m_lowerAngle)<2*a.angularSlop?this.m_limitState=3:g<=this.m_lowerAngle?(1!=this.m_limitState&&(this.m_impulse.z=0),this.m_limitState=1):g>=this.m_upperAngle?(2!=this.m_limitState&&(this.m_impulse.z=0),this.m_limitState=2):(this.m_limitState=p,this.m_impulse.z=0)}else this.m_limitState=p;if(t.warmStarting){this.m_impulse.mul(t.dtRatio),this.m_motorImpulse*=t.dtRatio;var b=c.neo(this.m_impulse.x,this.m_impulse.y);i.wSub(f,b),n-=d*(c.cross(this.m_rA,b)+this.m_motorImpulse+this.m_impulse.z),o.wAdd(_,b),s+=y*(c.cross(this.m_rB,b)+this.m_motorImpulse+this.m_impulse.z)}else this.m_impulse.setZero(),this.m_motorImpulse=0;this.m_bodyA.c_velocity.v=i,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=s},y.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=this.m_invMassA,s=this.m_invMassB,a=this.m_invIA,l=this.m_invIB,f=a+l==0;if(this.m_enableMotor&&3!=this.m_limitState&&0==f){var m=r-i-this.m_motorSpeed,_=-this.m_motorMass*m,d=this.m_motorImpulse,y=t.dt*this.m_maxMotorTorque;this.m_motorImpulse=u.clamp(this.m_motorImpulse+_,-y,y),i-=a*(_=this.m_motorImpulse-d),r+=l*_}if(this.m_enableLimit&&this.m_limitState!=p&&0==f){var v=c.zero();v.wAdd(1,n,1,c.cross(r,this.m_rB)),v.wSub(1,e,1,c.cross(i,this.m_rA));var g=r-i;m=h(v.x,v.y,g),_=h.neg(this.m_mass.solve33(m));if(3==this.m_limitState)this.m_impulse.add(_);else if(1==this.m_limitState){if(this.m_impulse.z+_.z<0){var b=c.wAdd(-1,v,this.m_impulse.z,c.neo(this.m_mass.ez.x,this.m_mass.ez.y)),x=this.m_mass.solve22(b);_.x=x.x,_.y=x.y,_.z=-this.m_impulse.z,this.m_impulse.x+=x.x,this.m_impulse.y+=x.y,this.m_impulse.z=0}else this.m_impulse.add(_)}else if(2==this.m_limitState){if(this.m_impulse.z+_.z>0){b=c.wAdd(-1,v,this.m_impulse.z,c.neo(this.m_mass.ez.x,this.m_mass.ez.y)),x=this.m_mass.solve22(b);_.x=x.x,_.y=x.y,_.z=-this.m_impulse.z,this.m_impulse.x+=x.x,this.m_impulse.y+=x.y,this.m_impulse.z=0}else this.m_impulse.add(_)}var w=c.neo(_.x,_.y);e.wSub(o,w),i-=a*(c.cross(this.m_rA,w)+_.z),n.wAdd(s,w),r+=l*(c.cross(this.m_rB,w)+_.z)}else{(m=c.zero()).wAdd(1,n,1,c.cross(r,this.m_rB)),m.wSub(1,e,1,c.cross(i,this.m_rA));_=this.m_mass.solve22(c.neg(m));this.m_impulse.x+=_.x,this.m_impulse.y+=_.y,e.wSub(o,_),i-=a*c.cross(this.m_rA,_),n.wAdd(s,_),r+=l*c.cross(this.m_rB,_)}this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=r},y.prototype.solvePositionConstraints=function(t){var e,i=this.m_bodyA.c_position.c,n=this.m_bodyA.c_position.a,r=this.m_bodyB.c_position.c,o=this.m_bodyB.c_position.a,s=m.neo(n),h=m.neo(o),f=0,_=this.m_invIA+this.m_invIB==0;if(this.m_enableLimit&&this.m_limitState!=p&&0==_){var d=o-n-this.m_referenceAngle,y=0;if(3==this.m_limitState){var v=u.clamp(d-this.m_lowerAngle,-a.maxAngularCorrection,a.maxAngularCorrection);y=-this.m_motorMass*v,f=u.abs(v)}else if(1==this.m_limitState){f=-(v=d-this.m_lowerAngle),v=u.clamp(v+a.angularSlop,-a.maxAngularCorrection,0),y=-this.m_motorMass*v}else if(2==this.m_limitState){f=v=d-this.m_upperAngle,v=u.clamp(v-a.angularSlop,0,a.maxAngularCorrection),y=-this.m_motorMass*v}n-=this.m_invIA*y,o+=this.m_invIB*y}s.set(n),h.set(o);var g=m.mul(s,c.sub(this.m_localAnchorA,this.m_localCenterA)),b=m.mul(h,c.sub(this.m_localAnchorB,this.m_localCenterB));(v=c.zero()).wAdd(1,r,1,b),v.wSub(1,i,1,g),e=v.length();var x=this.m_invMassA,w=this.m_invMassB,A=this.m_invIA,S=this.m_invIB,B=new l;B.ex.x=x+w+A*g.y*g.y+S*b.y*b.y,B.ex.y=-A*g.x*g.y-S*b.x*b.y,B.ey.x=B.ex.y,B.ey.y=x+w+A*g.x*g.x+S*b.x*b.x;var I=c.neg(B.solve(v));return i.wSub(x,I),n-=A*c.cross(g,I),r.wAdd(w,I),o+=S*c.cross(b,I),this.m_bodyA.c_position.c.set(i),this.m_bodyA.c_position.a=n,this.m_bodyB.c_position.c.set(r),this.m_bodyB.c_position.a=o,e<=a.linearSlop&&f<=a.angularSlop}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=function(t,e){var i=s.now();++a.toiCalls,t.state=v.e_unknown,t.t=e.tMax;var c=e.proxyA,h=e.proxyB,l=e.sweepA,d=e.sweepB;l.normalize(),d.normalize();var b=e.tMax,x=c.m_radius+h.m_radius,w=u.max(r.linearSlop,x-3*r.linearSlop),A=.25*r.linearSlop;n&&o.assert(w>A);var S=0,B=r.maxTOIIterations,I=0,O=new y,P=new _;for(P.proxyA=e.proxyA,P.proxyB=e.proxyB,P.useRadii=!1;;){var M=f.identity(),E=f.identity();l.getTransform(M,S),d.getTransform(E,S),P.transformA=M,P.transformB=E;var C=new p;if(m(C,O,P),C.distance<=0){t.state=v.e_overlapped,t.t=0;break}if(C.distance<w+A){t.state=v.e_touching,t.t=S;break}var k=new g;k.initialize(O,c,l,h,d,S);for(var T=!1,j=b,z=0;;){var D=k.findMinSeparation(j);k.indexA,k.indexB;if(D>w+A){t.state=v.e_separated,t.t=b,T=!0;break}if(D>w-A){S=j;break}var L=k.evaluate(S);k.indexA,k.indexB;if(L<w-A){t.state=v.e_failed,t.t=S,T=!0;break}if(L<=w+A){t.state=v.e_touching,t.t=S,T=!0;break}for(var R=0,F=S,q=j;;){var V;V=1&R?F+(w-L)*(q-F)/(D-L):.5*(F+q),++R,++a.toiRootIters;var N=k.evaluate(V);k.indexA,k.indexB;if(u.abs(N-w)<A){j=V;break}if(N>w?(F=V,L=N):(q=V,D=N),50==R)break}if(a.toiMaxRootIters=u.max(a.toiMaxRootIters,R),++z==r.maxPolygonVertices)break}if(++I,++a.toiIters,T)break;if(I==B){t.state=v.e_failed,t.t=S;break}}a.toiMaxIters=u.max(a.toiMaxIters,I);var U=s.diff(i);a.toiMaxTime=u.max(a.toiMaxTime,U),a.toiTime+=U},t.exports.Input=function(){this.proxyA=new d,this.proxyB=new d,this.sweepA=new l,this.sweepB=new l,this.tMax},t.exports.Output=v;var r=i(9),o=i(4),s=i(194),a=i(96),u=i(2),c=i(1),h=(i(20),i(21),i(25),i(8)),l=i(18),f=i(10),m=(i(23),i(22),i(78)),_=m.Input,p=m.Output,d=m.Proxy,y=m.Cache;function v(){this.state,this.t}v.e_unknown=0,v.e_failed=1,v.e_overlapped=2,v.e_touching=3,v.e_separated=4,a.toiTime=0,a.toiMaxTime=0,a.toiCalls=0,a.toiIters=0,a.toiMaxIters=0,a.toiRootIters=0,a.toiMaxRootIters=0;function g(){this.m_proxyA=new d,this.m_proxyB=new d,this.m_sweepA,this.m_sweepB,this.m_type,this.m_localPoint=c.zero(),this.m_axis=c.zero()}g.prototype.initialize=function(t,e,i,r,s,a){this.m_proxyA=e,this.m_proxyB=r;var u=t.count;n&&o.assert(0<u&&u<3),this.m_sweepA=i,this.m_sweepB=s;var l=f.identity(),m=f.identity();if(this.m_sweepA.getTransform(l,a),this.m_sweepB.getTransform(m,a),1==u){this.m_type=1;var _=this.m_proxyA.getVertex(t.indexA[0]),p=this.m_proxyB.getVertex(t.indexB[0]),d=f.mul(l,_),y=f.mul(m,p);return this.m_axis.wSet(1,y,-1,d),A=this.m_axis.normalize()}if(t.indexA[0]==t.indexA[1]){this.m_type=3;var v=r.getVertex(t.indexB[0]),g=r.getVertex(t.indexB[1]);this.m_axis=c.cross(c.sub(g,v),1),this.m_axis.normalize();var b=h.mul(m.q,this.m_axis);this.m_localPoint=c.mid(v,g);y=f.mul(m,this.m_localPoint),_=e.getVertex(t.indexA[0]),d=f.mul(l,_);return(A=c.dot(d,b)-c.dot(y,b))<0&&(this.m_axis=c.neg(this.m_axis),A=-A),A}this.m_type=2;var x=this.m_proxyA.getVertex(t.indexA[0]),w=this.m_proxyA.getVertex(t.indexA[1]);this.m_axis=c.cross(c.sub(w,x),1),this.m_axis.normalize();b=h.mul(l.q,this.m_axis);this.m_localPoint=c.mid(x,w);var A;d=f.mul(l,this.m_localPoint),p=this.m_proxyB.getVertex(t.indexB[0]),y=f.mul(m,p);return(A=c.dot(y,b)-c.dot(d,b))<0&&(this.m_axis=c.neg(this.m_axis),A=-A),A},g.prototype.compute=function(t,e){var i=f.identity(),r=f.identity();switch(this.m_sweepA.getTransform(i,e),this.m_sweepB.getTransform(r,e),this.m_type){case 1:if(t){var s=h.mulT(i.q,this.m_axis),a=h.mulT(r.q,c.neg(this.m_axis));this.indexA=this.m_proxyA.getSupport(s),this.indexB=this.m_proxyB.getSupport(a)}var u=this.m_proxyA.getVertex(this.indexA),l=this.m_proxyB.getVertex(this.indexB),m=f.mul(i,u),_=f.mul(r,l);return c.dot(_,this.m_axis)-c.dot(m,this.m_axis);case 2:var p=h.mul(i.q,this.m_axis);m=f.mul(i,this.m_localPoint);if(t){a=h.mulT(r.q,c.neg(p));this.indexA=-1,this.indexB=this.m_proxyB.getSupport(a)}l=this.m_proxyB.getVertex(this.indexB),_=f.mul(r,l);return c.dot(_,p)-c.dot(m,p);case 3:p=h.mul(r.q,this.m_axis),_=f.mul(r,this.m_localPoint);if(t){s=h.mulT(i.q,c.neg(p));this.indexB=-1,this.indexA=this.m_proxyA.getSupport(s)}u=this.m_proxyA.getVertex(this.indexA),m=f.mul(i,u);return c.dot(m,p)-c.dot(_,p);default:return n&&o.assert(!1),t&&(this.indexA=-1,this.indexB=-1),0}},g.prototype.findMinSeparation=function(t){return this.compute(!0,t)},g.prototype.evaluate=function(t){return this.compute(!1,t)}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT,r=i(9),o=i(4),s=i(196),a=i(1),u=i(2),c=i(38);function h(t){this.id=t,this.aabb=new c,this.userData=null,this.parent=null,this.child1=null,this.child2=null,this.height=-1,this.toString=function(){return this.id+": "+this.userData}}function l(){this.m_root=null,this.m_nodes={},this.m_lastProxyId=0,this.m_pool=new s({create:function(){return new h}})}t.exports=l,h.prototype.isLeaf=function(){return null==this.child1},l.prototype.getUserData=function(t){var e=this.m_nodes[t];return n&&o.assert(!!e),e.userData},l.prototype.getFatAABB=function(t){var e=this.m_nodes[t];return n&&o.assert(!!e),e.aabb},l.prototype.allocateNode=function(){var t=this.m_pool.allocate();return t.id=++this.m_lastProxyId,t.userData=null,t.parent=null,t.child1=null,t.child2=null,t.height=-1,this.m_nodes[t.id]=t,t},l.prototype.freeNode=function(t){this.m_pool.release(t),t.height=-1,delete this.m_nodes[t.id]},l.prototype.createProxy=function(t,e){n&&o.assert(c.isValid(t));var i=this.allocateNode();return i.aabb.set(t),c.extend(i.aabb,r.aabbExtension),i.userData=e,i.height=0,this.insertLeaf(i),i.id},l.prototype.destroyProxy=function(t){var e=this.m_nodes[t];n&&o.assert(!!e),n&&o.assert(e.isLeaf()),this.removeLeaf(e),this.freeNode(e)},l.prototype.moveProxy=function(t,e,i){n&&o.assert(c.isValid(e)),n&&o.assert(!i||a.isValid(i));var s=this.m_nodes[t];return n&&o.assert(!!s),n&&o.assert(s.isLeaf()),!s.aabb.contains(e)&&(this.removeLeaf(s),s.aabb.set(e),e=s.aabb,c.extend(e,r.aabbExtension),i.x<0?e.lowerBound.x+=i.x*r.aabbMultiplier:e.upperBound.x+=i.x*r.aabbMultiplier,i.y<0?e.lowerBound.y+=i.y*r.aabbMultiplier:e.upperBound.y+=i.y*r.aabbMultiplier,this.insertLeaf(s),!0)},l.prototype.insertLeaf=function(t){if(n&&o.assert(c.isValid(t.aabb)),null==this.m_root)return this.m_root=t,void(this.m_root.parent=null);for(var e=t.aabb,i=this.m_root;0==i.isLeaf();){var r=i.child1,s=i.child2,a=i.aabb.getPerimeter(),h=new c;h.combine(i.aabb,e);var l,f,m=h.getPerimeter(),_=2*m,p=2*(m-a);if(r.isLeaf()){(y=new c).combine(e,r.aabb),l=y.getPerimeter()+p}else{(y=new c).combine(e,r.aabb);var d=r.aabb.getPerimeter();l=y.getPerimeter()-d+p}if(s.isLeaf()){(y=new c).combine(e,s.aabb),f=y.getPerimeter()+p}else{var y;(y=new c).combine(e,s.aabb);d=s.aabb.getPerimeter();f=y.getPerimeter()-d+p}if(_<l&&_<f)break;i=l<f?r:s}var v=i,g=v.parent,b=this.allocateNode();for(b.parent=g,b.userData=null,b.aabb.combine(e,v.aabb),b.height=v.height+1,null!=g?(g.child1==v?g.child1=b:g.child2=b,b.child1=v,b.child2=t,v.parent=b,t.parent=b):(b.child1=v,b.child2=t,v.parent=b,t.parent=b,this.m_root=b),i=t.parent;null!=i;){r=(i=this.balance(i)).child1,s=i.child2;n&&o.assert(null!=r),n&&o.assert(null!=s),i.height=1+u.max(r.height,s.height),i.aabb.combine(r.aabb,s.aabb),i=i.parent}},l.prototype.removeLeaf=function(t){if(t!=this.m_root){var e,i=t.parent,n=i.parent;if(e=i.child1==t?i.child2:i.child1,null!=n){n.child1==i?n.child1=e:n.child2=e,e.parent=n,this.freeNode(i);for(var r=n;null!=r;){var o=(r=this.balance(r)).child1,s=r.child2;r.aabb.combine(o.aabb,s.aabb),r.height=1+u.max(o.height,s.height),r=r.parent}}else this.m_root=e,e.parent=null,this.freeNode(i)}else this.m_root=null},l.prototype.balance=function(t){n&&o.assert(null!=t);var e=t;if(e.isLeaf()||e.height<2)return t;var i=e.child1,r=e.child2,s=r.height-i.height;if(s>1){var a=r.child1,c=r.child2;return r.child1=e,r.parent=e.parent,e.parent=r,null!=r.parent?r.parent.child1==t?r.parent.child1=r:r.parent.child2=r:this.m_root=r,a.height>c.height?(r.child2=a,e.child2=c,c.parent=e,e.aabb.combine(i.aabb,c.aabb),r.aabb.combine(e.aabb,a.aabb),e.height=1+u.max(i.height,c.height),r.height=1+u.max(e.height,a.height)):(r.child2=c,e.child2=a,a.parent=e,e.aabb.combine(i.aabb,a.aabb),r.aabb.combine(e.aabb,c.aabb),e.height=1+u.max(i.height,a.height),r.height=1+u.max(e.height,c.height)),r}if(s<-1){var h=i.child1,l=i.child2;return i.child1=e,i.parent=e.parent,e.parent=i,null!=i.parent?i.parent.child1==e?i.parent.child1=i:i.parent.child2=i:this.m_root=i,h.height>l.height?(i.child2=h,e.child1=l,l.parent=e,e.aabb.combine(r.aabb,l.aabb),i.aabb.combine(e.aabb,h.aabb),e.height=1+u.max(r.height,l.height),i.height=1+u.max(e.height,h.height)):(i.child2=l,e.child1=h,h.parent=e,e.aabb.combine(r.aabb,h.aabb),i.aabb.combine(e.aabb,l.aabb),e.height=1+u.max(r.height,h.height),i.height=1+u.max(e.height,l.height)),i}return e},l.prototype.getHeight=function(){return null==this.m_root?0:this.m_root.height},l.prototype.getAreaRatio=function(){if(null==this.m_root)return 0;for(var t,e=this.m_root.aabb.getPerimeter(),i=0,n=_.allocate().preorder();t=n.next();)t.height<0||(i+=t.aabb.getPerimeter());return _.release(n),i/e},l.prototype.computeHeight=function(t){var e;if((e=void 0!==t?this.m_nodes[t]:this.m_root).isLeaf())return 0;var i=ComputeHeight(e.child1),n=ComputeHeight(e.child2);return 1+u.max(i,n)},l.prototype.validateStructure=function(t){if(null!=t){t==this.m_root&&n&&o.assert(null==t.parent);var e=t.child1,i=t.child2;if(t.isLeaf())return n&&o.assert(null==e),n&&o.assert(null==i),void(n&&o.assert(0==t.height));n&&o.assert(e.parent==t),n&&o.assert(i.parent==t),this.validateStructure(e),this.validateStructure(i)}},l.prototype.validateMetrics=function(t){if(null!=t){var e=t.child1,i=t.child2;if(t.isLeaf())return n&&o.assert(null==e),n&&o.assert(null==i),void(n&&o.assert(0==t.height));var r=this.m_nodes[e].height,s=this.m_nodes[i].height,a=1+u.max(r,s);n&&o.assert(t.height==a);var h=new c;h.combine(e.aabb,i.aabb),n&&o.assert(c.areEqual(h,t.aabb)),this.validateMetrics(e),this.validateMetrics(i)}},l.prototype.validate=function(){ValidateStructure(this.m_root),ValidateMetrics(this.m_root),n&&o.assert(this.getHeight()==this.computeHeight())},l.prototype.getMaxBalance=function(){for(var t,e=0,i=_.allocate().preorder();t=i.next();)if(!(t.height<=1)){n&&o.assert(0==t.isLeaf());var r=u.abs(t.child2.height-t.child1.height);e=u.max(e,r)}return _.release(i),e},l.prototype.rebuildBottomUp=function(){for(var t,e=[],i=0,n=_.allocate().preorder();t=n.next();)t.height<0||(t.isLeaf()?(t.parent=null,e[i]=t,++i):this.freeNode(t));for(_.release(n);i>1;){for(var r=1/0,o=-1,s=-1,a=0;a<i;++a)for(var h=e[a].aabb,l=a+1;l<i;++l){var f=e[l].aabb,m=new c;m.combine(h,f);var p=m.getPerimeter();p<r&&(o=a,s=l,r=p)}var d=e[o],y=e[s],v=this.allocateNode();v.child1=d,v.child2=y,v.height=1+u.max(d.height,y.height),v.aabb.combine(d.aabb,y.aabb),v.parent=null,d.parent=v,y.parent=v,e[s]=e[i-1],e[o]=v,--i}this.m_root=e[0],this.validate()},l.prototype.shiftOrigin=function(t){for(var e,i=_.allocate().preorder();e=i.next();){var n=e.aabb;n.lowerBound.x-=t.x,n.lowerBound.y-=t.y,n.lowerBound.x-=t.x,n.lowerBound.y-=t.y}_.release(i)},l.prototype.query=function(t,e){n&&o.assert("function"==typeof e);var i=m.allocate();for(i.push(this.m_root);i.length>0;){var r=i.pop();if(null!=r)if(c.testOverlap(r.aabb,t))if(r.isLeaf()){if(0==e(r.id))return}else i.push(r.child1),i.push(r.child2)}m.release(i)},l.prototype.rayCast=function(t,e){n&&o.assert("function"==typeof e);var i=t.p1,r=t.p2,s=a.sub(r,i);n&&o.assert(s.lengthSquared()>0),s.normalize();var h=a.cross(1,s),l=a.abs(h),_=t.maxFraction,p=new c,d=a.wAdd(1-_,i,_,r);p.combinePoints(i,d);var y=m.allocate(),v=f.allocate();for(y.push(this.m_root);y.length>0;){var g=y.pop();if(null!=g&&0!=c.testOverlap(g.aabb,p)){var b=g.aabb.getCenter(),x=g.aabb.getExtents();if(!(u.abs(a.dot(h,a.sub(i,b)))-a.dot(l,x)>0))if(g.isLeaf()){v.p1=a.clone(t.p1),v.p2=a.clone(t.p2),v.maxFraction=_;var w=e(v,g.id);if(0==w)return;w>0&&(_=w,d=a.wAdd(1-_,i,_,r),p.combinePoints(i,d))}else y.push(g.child1),y.push(g.child2)}}m.release(y),f.release(v)};var f=new s({create:function(){return{}},release:function(t){}}),m=new s({create:function(){return[]},release:function(t){t.length=0}}),_=new s({create:function(){return new function(){var t=[],e=[];return{preorder:function(i){return t.length=0,t.push(i),e.length=0,e.push(0),this},next:function(){for(;t.length>0;){var i=t.length-1,n=t[i];if(0===e[i])return e[i]=1,n;if(1===e[i]&&(e[i]=2,n.child1))return t.push(n.child1),e.push(1),n.child1;if(2===e[i]&&(e[i]=3,n.child2))return t.push(n.child2),e.push(1),n.child2;t.pop(),e.pop()}},close:function(){t.length=0}}}},release:function(t){t.close()}})},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=f;var r=i(16),o=i(4),s=i(1),a=i(197),u=i(195),c=i(97),h=i(48),l={gravity:s.zero(),allowSleep:!0,warmStarting:!0,continuousPhysics:!0,subStepping:!1,blockSolve:!0,velocityIterations:8,positionIterations:3};function f(t){if(!(this instanceof f))return new f(t);t&&s.isValid(t)&&(t={gravity:t}),t=r(t,l),this.m_solver=new u(this),this.m_broadPhase=new a,this.m_contactList=null,this.m_contactCount=0,this.m_bodyList=null,this.m_bodyCount=0,this.m_jointList=null,this.m_jointCount=0,this.m_stepComplete=!0,this.m_allowSleep=t.allowSleep,this.m_gravity=s.clone(t.gravity),this.m_clearForces=!0,this.m_newFixture=!1,this.m_locked=!1,this.m_warmStarting=t.warmStarting,this.m_continuousPhysics=t.continuousPhysics,this.m_subStepping=t.subStepping,this.m_blockSolve=t.blockSolve,this.m_velocityIterations=t.velocityIterations,this.m_positionIterations=t.positionIterations,this.m_t=0,this.m_stepCount=0,this.addPair=this.createContact.bind(this)}f.prototype.getBodyList=function(){return this.m_bodyList},f.prototype.getJointList=function(){return this.m_jointList},f.prototype.getContactList=function(){return this.m_contactList},f.prototype.getBodyCount=function(){return this.m_bodyCount},f.prototype.getJointCount=function(){return this.m_jointCount},f.prototype.getContactCount=function(){return this.m_contactCount},f.prototype.setGravity=function(t){this.m_gravity=t},f.prototype.getGravity=function(){return this.m_gravity},f.prototype.isLocked=function(){return this.m_locked},f.prototype.setAllowSleeping=function(t){if(t!=this.m_allowSleep&&(this.m_allowSleep=t,0==this.m_allowSleep))for(var e=this.m_bodyList;e;e=e.m_next)e.setAwake(!0)},f.prototype.getAllowSleeping=function(){return this.m_allowSleep},f.prototype.setWarmStarting=function(t){this.m_warmStarting=t},f.prototype.getWarmStarting=function(){return this.m_warmStarting},f.prototype.setContinuousPhysics=function(t){this.m_continuousPhysics=t},f.prototype.getContinuousPhysics=function(){return this.m_continuousPhysics},f.prototype.setSubStepping=function(t){this.m_subStepping=t},f.prototype.getSubStepping=function(){return this.m_subStepping},f.prototype.setAutoClearForces=function(t){this.m_clearForces=t},f.prototype.getAutoClearForces=function(){return this.m_clearForces},f.prototype.clearForces=function(){for(var t=this.m_bodyList;t;t=t.getNext())t.m_force.setZero(),t.m_torque=0},f.prototype.queryAABB=function(t,e){n&&o.assert("function"==typeof e);var i=this.m_broadPhase;this.m_broadPhase.query(t,function(t){var n=i.getUserData(t);return e(n.fixture)})},f.prototype.rayCast=function(t,e,i){n&&o.assert("function"==typeof i);var r=this.m_broadPhase;this.m_broadPhase.rayCast({maxFraction:1,p1:t,p2:e},function(t,e){var n=r.getUserData(e),o=n.fixture,a=n.childIndex,u={};if(o.rayCast(u,t,a)){var c=u.fraction,h=s.add(s.mul(1-c,t.p1),s.mul(c,t.p2));return i(o,h,u.normal,c)}return t.maxFraction})},f.prototype.getProxyCount=function(){return this.m_broadPhase.getProxyCount()},f.prototype.getTreeHeight=function(){return this.m_broadPhase.getTreeHeight()},f.prototype.getTreeBalance=function(){return this.m_broadPhase.getTreeBalance()},f.prototype.getTreeQuality=function(){return this.m_broadPhase.getTreeQuality()},f.prototype.shiftOrigin=function(t){if(n&&o.assert(0==this.m_locked),!this.m_locked){for(var e=this.m_bodyList;e;e=e.m_next)e.m_xf.p.sub(t),e.m_sweep.c0.sub(t),e.m_sweep.c.sub(t);for(var i=this.m_jointList;i;i=i.m_next)i.shiftOrigin(t);this.m_broadPhase.shiftOrigin(t)}},f.prototype.createBody=function(t,e){if(n&&o.assert(0==this.isLocked()),this.isLocked())return null;t&&s.isValid(t)&&(t={position:t,angle:e});var i=new c(this,t);return i.m_prev=null,i.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=i),this.m_bodyList=i,++this.m_bodyCount,i},f.prototype.createDynamicBody=function(t,e){return t?s.isValid(t)&&(t={position:t,angle:e}):t={},t.type="dynamic",this.createBody(t)},f.prototype.createKinematicBody=function(t,e){return t?s.isValid(t)&&(t={position:t,angle:e}):t={},t.type="kinematic",this.createBody(t)},f.prototype.destroyBody=function(t){if(n&&o.assert(this.m_bodyCount>0),n&&o.assert(0==this.isLocked()),!this.isLocked()){if(t.m_destroyed)return!1;for(var e=t.m_jointList;e;){var i=e;e=e.next,this.publish("remove-joint",i.joint),this.destroyJoint(i.joint),t.m_jointList=e}t.m_jointList=null;for(var r=t.m_contactList;r;){var s=r;r=r.next,this.destroyContact(s.contact),t.m_contactList=r}t.m_contactList=null;for(var a=t.m_fixtureList;a;){var u=a;a=a.m_next,this.publish("remove-fixture",u),u.destroyProxies(this.m_broadPhase),t.m_fixtureList=a}return t.m_fixtureList=null,t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_bodyList&&(this.m_bodyList=t.m_next),t.m_destroyed=!0,--this.m_bodyCount,!0}},f.prototype.createJoint=function(t){if(n&&o.assert(!!t.m_bodyA),n&&o.assert(!!t.m_bodyB),n&&o.assert(0==this.isLocked()),this.isLocked())return null;if(t.m_prev=null,t.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=t),this.m_jointList=t,++this.m_jointCount,t.m_edgeA.joint=t,t.m_edgeA.other=t.m_bodyB,t.m_edgeA.prev=null,t.m_edgeA.next=t.m_bodyA.m_jointList,t.m_bodyA.m_jointList&&(t.m_bodyA.m_jointList.prev=t.m_edgeA),t.m_bodyA.m_jointList=t.m_edgeA,t.m_edgeB.joint=t,t.m_edgeB.other=t.m_bodyA,t.m_edgeB.prev=null,t.m_edgeB.next=t.m_bodyB.m_jointList,t.m_bodyB.m_jointList&&(t.m_bodyB.m_jointList.prev=t.m_edgeB),t.m_bodyB.m_jointList=t.m_edgeB,0==t.m_collideConnected)for(var e=t.m_bodyB.getContactList();e;e=e.next)e.other==t.m_bodyA&&e.contact.flagForFiltering();return t},f.prototype.destroyJoint=function(t){if(n&&o.assert(0==this.isLocked()),!this.isLocked()){t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_jointList&&(this.m_jointList=t.m_next);var e=t.m_bodyA,i=t.m_bodyB;if(e.setAwake(!0),i.setAwake(!0),t.m_edgeA.prev&&(t.m_edgeA.prev.next=t.m_edgeA.next),t.m_edgeA.next&&(t.m_edgeA.next.prev=t.m_edgeA.prev),t.m_edgeA==e.m_jointList&&(e.m_jointList=t.m_edgeA.next),t.m_edgeA.prev=null,t.m_edgeA.next=null,t.m_edgeB.prev&&(t.m_edgeB.prev.next=t.m_edgeB.next),t.m_edgeB.next&&(t.m_edgeB.next.prev=t.m_edgeB.prev),t.m_edgeB==i.m_jointList&&(i.m_jointList=t.m_edgeB.next),t.m_edgeB.prev=null,t.m_edgeB.next=null,n&&o.assert(this.m_jointCount>0),--this.m_jointCount,0==t.m_collideConnected)for(var r=i.getContactList();r;)r.other==e&&r.contact.flagForFiltering(),r=r.next;this.publish("remove-joint",t)}};var m=new u.TimeStep;f.prototype.step=function(t,e,i){if((0|e)!==e&&(e=0),e=e||this.m_velocityIterations,i=i||this.m_positionIterations,this.m_stepCount++,this.m_newFixture&&(this.findNewContacts(),this.m_newFixture=!1),this.m_locked=!0,m.reset(t),m.velocityIterations=e,m.positionIterations=i,m.warmStarting=this.m_warmStarting,m.blockSolve=this.m_blockSolve,this.updateContacts(),this.m_stepComplete&&t>0){this.m_solver.solveWorld(m);for(var n=this.m_bodyList;n;n=n.getNext())0!=n.m_islandFlag&&(n.isStatic()||n.synchronizeFixtures());this.findNewContacts()}this.m_continuousPhysics&&t>0&&this.m_solver.solveWorldTOI(m),this.m_clearForces&&this.clearForces(),this.m_locked=!1},f.prototype.findNewContacts=function(){this.m_broadPhase.updatePairs(this.addPair)},f.prototype.createContact=function(t,e){var i=t.fixture,n=e.fixture,r=t.childIndex,o=e.childIndex,s=i.getBody(),a=n.getBody();if(s!=a){for(var u=a.getContactList();u;){if(u.other==s){var c=u.contact.getFixtureA(),l=u.contact.getFixtureB(),f=u.contact.getChildIndexA(),m=u.contact.getChildIndexB();if(c==i&&l==n&&f==r&&m==o)return;if(c==n&&l==i&&f==o&&m==r)return}u=u.next}if(0!=a.shouldCollide(s)&&0!=n.shouldCollide(i)){var _=h.create(i,r,n,o);null!=_&&(_.m_prev=null,null!=this.m_contactList&&(_.m_next=this.m_contactList,this.m_contactList.m_prev=_),this.m_contactList=_,++this.m_contactCount)}}},f.prototype.updateContacts=function(){for(var t,e=this.m_contactList;t=e;){e=t.getNext();var i=t.getFixtureA(),n=t.getFixtureB(),r=t.getChildIndexA(),o=t.getChildIndexB(),s=i.getBody(),a=n.getBody();if(t.m_filterFlag){if(0==a.shouldCollide(s)){this.destroyContact(t);continue}if(0==n.shouldCollide(i)){this.destroyContact(t);continue}t.m_filterFlag=!1}var u=s.isAwake()&&!s.isStatic(),c=a.isAwake()&&!a.isStatic();if(0!=u||0!=c){var h=i.m_proxies[r].proxyId,l=n.m_proxies[o].proxyId;0!=this.m_broadPhase.testOverlap(h,l)?t.update(this):this.destroyContact(t)}}},f.prototype.destroyContact=function(t){h.destroy(t,this),t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t==this.m_contactList&&(this.m_contactList=t.m_next),--this.m_contactCount},f.prototype._listeners=null,f.prototype.on=function(t,e){return"string"!=typeof t||"function"!=typeof e?this:(this._listeners||(this._listeners={}),this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e),this)},f.prototype.off=function(t,e){if("string"!=typeof t||"function"!=typeof e)return this;var i=this._listeners&&this._listeners[t];if(!i||!i.length)return this;var n=i.indexOf(e);return n>=0&&i.splice(n,1),this},f.prototype.publish=function(t,e,i,n){var r=this._listeners&&this._listeners[t];if(!r||!r.length)return 0;for(var o=0;o<r.length;o++)r[o].call(this,e,i,n);return r.length},f.prototype.beginContact=function(t){this.publish("begin-contact",t)},f.prototype.endContact=function(t){this.publish("end-contact",t)},f.prototype.preSolve=function(t,e){this.publish("pre-solve",t,e)},f.prototype.postSolve=function(t,e){this.publish("post-solve",t,e)}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=l;var r=i(4),o=i(16),s=i(2),a=i(1),u=i(38),c={userData:null,friction:.2,restitution:0,density:0,isSensor:!1,filterGroupIndex:0,filterCategoryBits:1,filterMaskBits:65535};function h(t,e){this.aabb=new u,this.fixture=t,this.childIndex=e,this.proxyId}function l(t,e,i){e.shape?(i=e,e=e.shape):"number"==typeof i&&(i={density:i}),i=o(i,c),this.m_body=t,this.m_friction=i.friction,this.m_restitution=i.restitution,this.m_density=i.density,this.m_isSensor=i.isSensor,this.m_filterGroupIndex=i.filterGroupIndex,this.m_filterCategoryBits=i.filterCategoryBits,this.m_filterMaskBits=i.filterMaskBits,this.m_shape=e,this.m_next=null,this.m_proxies=[],this.m_proxyCount=0;for(var n=this.m_shape.getChildCount(),r=0;r<n;++r)this.m_proxies[r]=new h(this,r);this.m_userData=i.userData}l.prototype.getType=function(){return this.m_shape.getType()},l.prototype.getShape=function(){return this.m_shape},l.prototype.isSensor=function(){return this.m_isSensor},l.prototype.setSensor=function(t){t!=this.m_isSensor&&(this.m_body.setAwake(!0),this.m_isSensor=t)},l.prototype.getUserData=function(){return this.m_userData},l.prototype.setUserData=function(t){this.m_userData=t},l.prototype.getBody=function(){return this.m_body},l.prototype.getNext=function(){return this.m_next},l.prototype.getDensity=function(){return this.m_density},l.prototype.setDensity=function(t){n&&r.assert(s.isFinite(t)&&t>=0),this.m_density=t},l.prototype.getFriction=function(){return this.m_friction},l.prototype.setFriction=function(t){this.m_friction=t},l.prototype.getRestitution=function(){return this.m_restitution},l.prototype.setRestitution=function(t){this.m_restitution=t},l.prototype.testPoint=function(t){return this.m_shape.testPoint(this.m_body.getTransform(),t)},l.prototype.rayCast=function(t,e,i){return this.m_shape.rayCast(t,e,this.m_body.getTransform(),i)},l.prototype.getMassData=function(t){this.m_shape.computeMass(t,this.m_density)},l.prototype.getAABB=function(t){return n&&r.assert(0<=t&&t<this.m_proxyCount),this.m_proxies[t].aabb},l.prototype.createProxies=function(t,e){n&&r.assert(0==this.m_proxyCount),this.m_proxyCount=this.m_shape.getChildCount();for(var i=0;i<this.m_proxyCount;++i){var o=this.m_proxies[i];this.m_shape.computeAABB(o.aabb,e,i),o.proxyId=t.createProxy(o.aabb,o)}},l.prototype.destroyProxies=function(t){for(var e=0;e<this.m_proxyCount;++e){var i=this.m_proxies[e];t.destroyProxy(i.proxyId),i.proxyId=null}this.m_proxyCount=0},l.prototype.synchronize=function(t,e,i){for(var n=0;n<this.m_proxyCount;++n){var r=this.m_proxies[n],o=new u,s=new u;this.m_shape.computeAABB(o,e,r.childIndex),this.m_shape.computeAABB(s,i,r.childIndex),r.aabb.combine(o,s);var c=a.sub(i.p,e.p);t.moveProxy(r.proxyId,r.aabb,c)}},l.prototype.setFilterData=function(t){this.m_filterGroupIndex=t.groupIndex,this.m_filterCategoryBits=t.categoryBits,this.m_filterMaskBits=t.maskBits,this.refilter()},l.prototype.getFilterGroupIndex=function(){return this.m_filterGroupIndex},l.prototype.getFilterCategoryBits=function(){return this.m_filterCategoryBits},l.prototype.getFilterMaskBits=function(){return this.m_filterMaskBits},l.prototype.refilter=function(){if(null!=this.m_body){for(var t=this.m_body.getContactList();t;){var e=t.contact,i=e.getFixtureA(),n=e.getFixtureB();i!=this&&n!=this||e.flagForFiltering(),t=t.next}var r=this.m_body.getWorld();if(null!=r)for(var o=r.m_broadPhase,s=0;s<this.m_proxyCount;++s)o.touchProxy(this.m_proxies[s].proxyId)}},l.prototype.shouldCollide=function(t){return t.m_filterGroupIndex==this.m_filterGroupIndex&&0!=t.m_filterGroupIndex?t.m_filterGroupIndex>0:0!=(t.m_filterMaskBits&this.m_filterCategoryBits)&&0!=(t.m_filterCategoryBits&this.m_filterMaskBits)}},function(t,e,i){e.internal={},e.Math=i(2),e.Vec2=i(1),e.Transform=i(10),e.Rot=i(8),e.AABB=i(38),e.Shape=i(33),e.Fixture=i(131),e.Body=i(97),e.Contact=i(48),e.Joint=i(24),e.World=i(130),e.Circle=i(77),e.Edge=i(76),e.Polygon=i(72),e.Chain=i(95),e.Box=i(193),i(192),i(191),e.internal.CollidePolygons=i(190),i(189),i(188),e.DistanceJoint=i(187),e.FrictionJoint=i(186),e.GearJoint=i(185),e.MotorJoint=i(184),e.MouseJoint=i(183),e.PrismaticJoint=i(126),e.PulleyJoint=i(182),e.RevoluteJoint=i(127),e.RopeJoint=i(181),e.WeldJoint=i(180),e.WheelJoint=i(179),e.internal.Sweep=i(18),e.internal.stats=i(96),e.internal.Manifold=i(53),e.internal.Distance=i(78),e.internal.TimeOfImpact=i(128),e.internal.DynamicTree=i(129),e.internal.Settings=i(9)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=a(i(39)),o=a(i(132)),s=a(i(49));function a(t){return t&&t.__esModule?t:{default:t}}function u(t){return t.map(function(t){var e=new o.default.Vec2;return e.set(t.x,-t.y),e})}var c={circle:function(t){return{class:o.default.Circle,params:[t.radius]}},rectangle:function(t){return{class:o.default.Polygon,params:[u(t.vertices),t.vertices.length]}},regularpolygon:function(t){return{class:o.default.Polygon,params:[u(t.vertices),t.vertices.length]}}},h=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"physicsbody","physicsbody",t));return i.bodyType="dynamic",i.friction=.3,i.density=1,i.body=null,i.fixture=null,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),n(e,[{key:"onAdd",value:function(t,e){var i=this;this.collider=e.getComponent("collider");var n=this.collider;if(n&&n.shape&&!this.body){this.shape=n.shape;var r={};r.position=new o.default.Vec2(e.x,e.y),r.type=this.bodyType;var s=t.world.createBody(r),a=null;if(Object.keys(c).every(function(t){return i.shape.type!==t||(a=c[t](i.shape),!1)}),!a)return console.warn("Invalid shape used in PhysicsBody"),!1;var u=new(Function.prototype.bind.apply(a.class,[null].concat(function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}(a.params)))),h={};h.shape=u,h.density=this.density,h.friction=this.friction;var l=s.createFixture(h);s.setAngle(e.rotation),this.body=s,this.fixture=l}return!0}},{key:"onProcess",value:function(t){var e=this.gameObject;if(!this.collider){if(e.getComponent("collider"))return this.onAdd(t,e),void this.onProcess(t);throw"error: GameObject must have a collider for physics processing"}if(this.forcePos)this.body.setLinearVelocity(o.default.Vec2(0,0)),this.body.setAngularVelocity(0);else{var i=this.body.getPosition();e.pos=s.default.from(i),e.rotation=this.body.getAngle(),e.speed=s.default.from(this.body.getLinearVelocity())}}},{key:"toJSON",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"toJSON",this).call(this,t,i,n,r,["forcePos","shape","collider"])}}],[{key:"fromJSON",value:function(t){var i="string"==typeof t?JSON.parse(t):t;return new e({friction:i.friction,density:i.density,bodyType:i.bodyType})}}]),e}();e.default=h,r.default.registerComponent("physicsbody",h)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=s(i(39)),o=s(i(79));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"generator","generator",t));return i.lastGenerate=null,i.numGenerated=0,i.timeSaved=0,i.limit=0,i.delay=1e3,i.addToGame=!0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),n(e,[{key:"onGenerate",value:function(t,e,i){}},{key:"onComplete",value:function(t){}},{key:"onProcess",value:function(t){this.gameObject;if(this.lastGenerate){for(var e=t.time-this.lastGenerate+this.timeSaved;e>this.delay&&(0===this.limit||this.numGenerated<this.limit);){var i=o.default.create(this.generateParams);i.pos=this._gameObject.pos,this.onGenerate(i,t,this),this.addToGame&&t.addGameObject(i),this.numGenerated++,this.lastGenerate=t.time,this.numGenerated===this.limit&&(this.onComplete&&this.onComplete(t),this.destroyOnComplete&&this._gameObject.removeComponent("generator")),e-=this.delay}this.timeSaved+=e}else this.lastGenerate=t.time}},{key:"toJSON",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"toJSON",this).call(this,t,i,n,r,["lastGenerate","numGenerated","timeSaved"])}}],[{key:"fromJSON",value:function(t){var i="string"==typeof t?JSON.parse(t):t;return new e({limit:i.limit,delay:i.delay,destroyOnComplete:i.destroyOnComplete})}}]),e}();e.default=a,r.default.registerComponent("generator",a)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=s(i(39)),o=s(i(49));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"draghandler","draghandler",t));return i.mouseVelocity=new o.default(0,0),i.lastVelocities=[],i.lastPos=new o.default(0,0),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),n(e,[{key:"onDragStart",value:function(){}},{key:"onDrag",value:function(){}},{key:"onDragEnd",value:function(){}},{key:"onObjDragStart",value:function(t,e){this.dragging=!0,this.lastPos=t.pos,this.lastVelocities=[]}},{key:"onObjDrag",value:function(t,i){t.pos=i.screenCoordToWorld(i.mousePos);var n=t.pos.subtract(this.lastPos);this.lastVelocities.push(n),this.lastVelocities.length>e.MAX_VEL_FRAMES&&this.lastVelocities.shift(),this.mouseVelocity=new o.default(0,0);for(var r=0;r<this.lastVelocities.length;r++)this.mouseVelocity=this.mouseVelocity.add(this.lastVelocities[r]);this.mouseVelocity=this.mouseVelocity.scale(i.timeDelta/this.lastVelocities.length),this.lastPos=t.pos}},{key:"onObjDragEnd",value:function(t,e){if(this.throwable){var i=t.getComponent("physicsbody");i&&"dynamic"===i.bodyType&&(t.speed=this.mouseVelocity)}this.dragging=!1}},{key:"onAdd",value:function(t,e){e.onDragStart=this.onObjDragStart.bind(this),e.onDrag=this.onObjDrag.bind(this),e.onDragEnd=this.onObjDragEnd.bind(this),this.lastPos=e.pos}},{key:"toJSON",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"toJSON",this).call(this,t,i,n,r,["dragging","mouseVelocity","lastVelocities","lastPos"])}}],[{key:"fromJSON",value:function(t){return new e("string"==typeof t?JSON.parse(t):t)}}]),e}();e.default=a,a.MAX_VEL_FRAMES=2,r.default.registerComponent("draghandler",a)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=s(i(39)),o=s(i(56));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"collider","collider",t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),n(e,[{key:"onAdd",value:function(t,e){var i=e.getComponent("physicsbody");return i&&!i.collider&&(i.onAdd(t,e)||e.removeComponent("physicsbody")),!0}}],[{key:"fromJSON",value:function(t){var i="string"==typeof t?JSON.parse(t):t;return new e({shape:o.default.fromJSON(i.shape)})}}]),e}();e.default=a,r.default.registerComponent("collider",a)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Stack=e.OrderedSet=e.OrderedMap=e.Set=e.List=e.Map=void 0;c(i(55));var n=c(i(204)),r=c(i(203)),o=c(i(202)),s=c(i(201)),a=c(i(200)),u=c(i(199));function c(t){return t&&t.__esModule?t:{default:t}}e.Map=n.default,e.List=r.default,e.Set=s.default,e.OrderedMap=o.default,e.OrderedSet=a.default,e.Stack=u.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(i(39)),o=i(45);function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}console.log("component from statecontroller",r.default);var a=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(this,t),this.name=name,this.state=i}return n(t,[{key:"onProcess",value:function(t){}},{key:"onChangeTo",value:function(t){}},{key:"onChangeFrom",value:function(t){}}]),n(t,[{key:"toJSON",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,o.deepSerialize)({name:this.name,state:this.state},[],t,e,i,n)}}],[{key:"fromJSON",value:function(e){var i="string"==typeof e?JSON.parse(e):e;return new t(i.name,i.state)}}]),t}(),u=function(t){function e(t){s(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"statecontroller","controller",t)),n=i.states;return i.stateMap={},n.forEach(function(t){i.stateMap[t.name]=t}),i.currentState=i.stateMap[i.defaultState],i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),n(e,[{key:"setState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this.currentState,n=this.states[t];null!==i&&i.onChangeFrom(n),this.currentState=n,null!==e&&(n.state=e),n.onChangeTo(i)}},{key:"onProcess",value:function(t){this.currentState.onProcess(t)}}],[{key:"fromJSON",value:function(t){for(var i="string"==typeof t?JSON.parse(t):t,n={},r=Object.keys(i.states),o=0;o<r;o++){var s=r[o];n[s]=a.fromJSON(i.states[s])}return new e({states:n,defaultState:i.defaultState})}}]),e}();e.default=u,u.State=a,r.default.registerComponent("statecontroller",u)},function(t,e){t.exports=Math.scale||function(t,e,i,n,r){return 0===arguments.length||t!=t||e!=e||i!=i||n!=n||r!=r?NaN:t===1/0||t===-1/0?t:(t-e)*(r-n)/(i-e)+n}},function(t,e,i){var n=i(58);t.exports=function(t,e){var i=[];return n(t,!1,i.push,i,e),i}},function(t,e,i){var n=i(73),r=i(140);t.exports=function(t){return function(){if(n(this)!=t)throw TypeError(t+"#toJSON isn't generic");return r(this)}}},function(t,e,i){var n=i(64),r=i(31),o=i(74).f;t.exports=function(t){return function(e){for(var i,s=r(e),a=n(s),u=a.length,c=0,h=[];u>c;)o.call(s,i=a[c++])&&h.push(t?[i,s[i]]:s[i]);return h}}},function(t,e,i){var n=i(12),r=i(116),o=i(43);t.exports=function(t,e,i,s){var a=String(o(t)),u=a.length,c=void 0===i?" ":String(i),h=n(e);if(h<=u||""==c)return a;var l=h-u,f=r.call(c,Math.ceil(l/c.length));return f.length>l&&(f=f.slice(0,l)),s?f+a:a+f}},function(t,e,i){"use strict";var n=i(91),r=i(7),o=i(12),s=i(36),a=i(11)("isConcatSpreadable");t.exports=function t(e,i,u,c,h,l,f,m){for(var _,p,d=h,y=0,v=!!f&&s(f,m,3);y<c;){if(y in u){if(_=v?v(u[y],y,i):u[y],p=!1,r(_)&&(p=void 0!==(p=_[a])?!!p:n(_)),p&&l>0)d=t(e,i,_,o(_.length),d,l-1)-1;else{if(d>=9007199254740991)throw TypeError();e[d]=_}d++}y++}return d}},function(t,e,i){var n=i(61),r=i(92),o=i(3),s=i(5).Reflect;t.exports=s&&s.ownKeys||function(t){var e=n.f(o(t)),i=r.f;return i?e.concat(i(t)):e}},function(t,e,i){var n=i(42),r=i(12);t.exports=function(t){if(void 0===t)return 0;var e=n(t),i=r(e);if(e!==i)throw RangeError("Wrong length!");return i}},function(t,e,i){"use strict";var n=i(57),r=i(52).getWeak,o=i(3),s=i(7),a=i(59),u=i(58),c=i(40),h=i(32),l=i(68),f=c(5),m=c(6),_=0,p=function(t){return t._l||(t._l=new d)},d=function(){this.a=[]},y=function(t,e){return f(t.a,function(t){return t[0]===e})};d.prototype={get:function(t){var e=y(this,t);if(e)return e[1]},has:function(t){return!!y(this,t)},set:function(t,e){var i=y(this,t);i?i[1]=e:this.a.push([t,e])},delete:function(t){var e=m(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,i,o){var c=t(function(t,n){a(t,c,e,"_i"),t._t=e,t._i=_++,t._l=void 0,void 0!=n&&u(n,i,t[o],t)});return n(c.prototype,{delete:function(t){if(!s(t))return!1;var i=r(t);return!0===i?p(l(this,e)).delete(t):i&&h(i,this._i)&&delete i[this._i]},has:function(t){if(!s(t))return!1;var i=r(t);return!0===i?p(l(this,e)).has(t):i&&h(i,this._i)}}),c},def:function(t,e,i){var n=r(o(e),!0);return!0===n?p(t).set(e,i):n[t._i]=i,t},ufstore:p}},function(t,e,i){"use strict";var n,r=i(40)(0),o=i(27),s=i(52),a=i(167),u=i(147),c=i(7),h=i(6),l=i(68),f=s.getWeak,m=Object.isExtensible,_=u.ufstore,p={},d=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},y={get:function(t){if(c(t)){var e=f(t);return!0===e?_(l(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(l(this,"WeakMap"),t,e)}},v=t.exports=i(84)("WeakMap",d,y,u,!0,!0);h(function(){return 7!=(new v).set((Object.freeze||Object)(p),7).get(p)})&&(a((n=u.getConstructor(d,"WeakMap")).prototype,y),s.NEED=!0,r(["delete","has","get","set"],function(t){var e=v.prototype,i=e[t];o(e,t,function(e,r){if(c(e)&&!m(e)){this._f||(this._f=new n);var o=this._f[t](e,r);return"set"==t?this:o}return i.call(this,e,r)})}))},function(t,e,i){"use strict";var n=i(150),r=i(68);t.exports=i(84)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(r(this,"Set"),t=0===t?0:t,t)}},n)},function(t,e,i){"use strict";var n=i(13).f,r=i(62),o=i(57),s=i(36),a=i(59),u=i(58),c=i(112),h=i(155),l=i(60),f=i(14),m=i(52).fastKey,_=i(68),p=f?"_s":"size",d=function(t,e){var i,n=m(e);if("F"!==n)return t._i[n];for(i=t._f;i;i=i.n)if(i.k==e)return i};t.exports={getConstructor:function(t,e,i,c){var h=t(function(t,n){a(t,h,e,"_i"),t._t=e,t._i=r(null),t._f=void 0,t._l=void 0,t[p]=0,void 0!=n&&u(n,i,t[c],t)});return o(h.prototype,{clear:function(){for(var t=_(this,e),i=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete i[n.i];t._f=t._l=void 0,t[p]=0},delete:function(t){var i=_(this,e),n=d(i,t);if(n){var r=n.n,o=n.p;delete i._i[n.i],n.r=!0,o&&(o.n=r),r&&(r.p=o),i._f==n&&(i._f=r),i._l==n&&(i._l=o),i[p]--}return!!n},forEach:function(t){_(this,e);for(var i,n=s(t,arguments.length>1?arguments[1]:void 0,3);i=i?i.n:this._f;)for(n(i.v,i.k,this);i&&i.r;)i=i.p},has:function(t){return!!d(_(this,e),t)}}),f&&n(h.prototype,"size",{get:function(){return _(this,e)[p]}}),h},def:function(t,e,i){var n,r,o=d(t,e);return o?o.v=i:(t._l=o={i:r=m(e,!0),k:e,v:i,p:n=t._l,n:void 0,r:!1},t._f||(t._f=o),n&&(n.n=o),t[p]++,"F"!==r&&(t._i[r]=o)),t},getEntry:d,setStrong:function(t,e,i){c(t,e,function(t,i){this._t=_(t,e),this._k=i,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?h(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,h(1))},i?"entries":"values",!i,!0),l(e)}}},function(t,e,i){"use strict";var n=i(150),r=i(68);t.exports=i(84)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=n.getEntry(r(this,"Map"),t);return e&&e.v},set:function(t,e){return n.def(r(this,"Map"),0===t?0:t,e)}},n,!0)},function(t,e,i){var n=i(3),r=i(7),o=i(100);t.exports=function(t,e){if(n(t),r(e)&&e.constructor===t)return e;var i=o.f(t);return(0,i.resolve)(e),i.promise}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,i){i(14)&&"g"!=/./g.flags&&i(13).f(RegExp.prototype,"flags",{configurable:!0,get:i(88)})},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,i){"use strict";var n=i(17),r=i(63),o=i(12);t.exports=[].copyWithin||function(t,e){var i=n(this),s=o(i.length),a=r(t,s),u=r(e,s),c=arguments.length>2?arguments[2]:void 0,h=Math.min((void 0===c?s:r(c,s))-u,s-a),l=1;for(u<a&&a<u+h&&(l=-1,u+=h-1,a+=h-1);h-- >0;)u in i?i[a]=i[u]:delete i[a],a+=l,u+=l;return i}},function(t,e,i){var n=i(19),r=i(17),o=i(75),s=i(12);t.exports=function(t,e,i,a,u){n(e);var c=r(t),h=o(c),l=s(c.length),f=u?l-1:0,m=u?-1:1;if(i<2)for(;;){if(f in h){a=h[f],f+=m;break}if(f+=m,u?f<0:l<=f)throw TypeError("Reduce of empty array with no initial value")}for(;u?f>=0:l>f;f+=m)f in h&&(a=e(a,h[f],f,c));return a}},function(t,e,i){var n=i(3);t.exports=function(t,e,i,r){try{return r?e(n(i)[0],i[1]):e(i)}catch(e){var o=t.return;throw void 0!==o&&n(o.call(t)),e}}},function(t,e,i){var n=i(115),r=Math.pow,o=r(2,-52),s=r(2,-23),a=r(2,127)*(2-s),u=r(2,-126);t.exports=Math.fround||function(t){var e,i,r=Math.abs(t),c=n(t);return r<u?c*function(t){return t+1/o-1/o}(r/u/s)*u*s:(i=(e=(1+s/o)*r)-(e-r))>a||i!=i?c*(1/0):c*i}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,i){var n=i(7),r=Math.floor;t.exports=function(t){return!n(t)&&isFinite(t)&&r(t)===t}},function(t,e,i){var n=i(35);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=n(t))throw TypeError(e);return+t}},function(t,e,i){var n=i(5).parseFloat,r=i(70).trim;t.exports=1/n(i(118)+"-0")!=-1/0?function(t){var e=r(String(t),3),i=n(e);return 0===i&&"-"==e.charAt(0)?-0:i}:n},function(t,e,i){var n=i(5).parseInt,r=i(70).trim,o=i(118),s=/^[-+]?0[xX]/;t.exports=8!==n(o+"08")||22!==n(o+"0x16")?function(t,e){var i=r(String(t),3);return n(i,e>>>0||(s.test(i)?16:10))}:n},function(t,e){t.exports=function(t,e,i){var n=void 0===i;switch(e.length){case 0:return n?t():t.call(i);case 1:return n?t(e[0]):t.call(i,e[0]);case 2:return n?t(e[0],e[1]):t.call(i,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(i,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(i,e[0],e[1],e[2],e[3])}return t.apply(i,e)}},function(t,e,i){"use strict";var n=i(19),r=i(7),o=i(165),s=[].slice,a={};t.exports=Function.bind||function(t){var e=n(this),i=s.call(arguments,1),u=function(){var n=i.concat(s.call(arguments));return this instanceof u?function(t,e,i){if(!(e in a)){for(var n=[],r=0;r<e;r++)n[r]="a["+r+"]";a[e]=Function("F,a","return new F("+n.join(",")+")")}return a[e](t,i)}(e,n.length,n):o(e,n,t)};return r(e.prototype)&&(u.prototype=e.prototype),u}},function(t,e,i){"use strict";var n=i(64),r=i(92),o=i(74),s=i(17),a=i(75),u=Object.assign;t.exports=!u||i(6)(function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach(function(t){e[t]=t}),7!=u({},t)[i]||Object.keys(u({},e)).join("")!=n})?function(t,e){for(var i=s(t),u=arguments.length,c=1,h=r.f,l=o.f;u>c;)for(var f,m=a(arguments[c++]),_=h?n(m).concat(h(m)):n(m),p=_.length,d=0;p>d;)l.call(m,f=_[d++])&&(i[f]=m[f]);return i}:u},function(t,e,i){var n=i(31),r=i(61).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?function(t){try{return r(t)}catch(t){return s.slice()}}(t):r(n(t))}},function(t,e,i){var n=i(13),r=i(3),o=i(64);t.exports=i(14)?Object.defineProperties:function(t,e){r(t);for(var i,s=o(e),a=s.length,u=0;a>u;)n.f(t,i=s[u++],e[i]);return t}},function(t,e,i){var n=i(32),r=i(31),o=i(93)(!1),s=i(122)("IE_PROTO");t.exports=function(t,e){var i,a=r(t),u=0,c=[];for(i in a)i!=s&&n(a,i)&&c.push(i);for(;e.length>u;)n(a,i=e[u++])&&(~o(c,i)||c.push(i));return c}},function(t,e,i){e.f=i(11)},function(t,e,i){t.exports=!i(14)&&!i(6)(function(){return 7!=Object.defineProperty(i(124)("div"),"a",{get:function(){return 7}}).a})},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.filesToLoad=e,this.totalLength=0,this.files=[],this.isImage=[],this.progress=[]}return n(t,[{key:"onComplete",value:function(t){}},{key:"onProgress",value:function(t,e,i){}}]),n(t,[{key:"loadFileSizes",value:function(t){var e=this,i=this,n=0;this.totalLength=0;for(var r=function(){var r=o;(s=new XMLHttpRequest).onreadystatechange=function(){this.readyState==XMLHttpRequest.DONE&&(i.isImage[r]=-1!==this.getResponseHeader("Content-Type").indexOf("image"),function(e){i.totalLength+=e,++n==i.filesToLoad.length&&t&&t()}(parseInt(this.getResponseHeader("Content-Length"))))},s.open("HEAD",e.filesToLoad[o],!0),s.send(null)},o=0;o<this.filesToLoad.length;o++){var s;r()}}},{key:"loadImage",value:function(){}},{key:"loadContent",value:function(){var t=this,e=this;this.totalLoaded=0;var i=0;this.files=[];for(var n=function(){t.progress[r]=0;var n=r;o=function(t){e.totalLoaded+=t.loaded-e.progress[n],e.onProgress&&e.onProgress(e.totalLoaded/e.totalLength*100,e.totalLoaded,e.totalLength),e.progress[n]=t.loaded},t.isImage[r]?(console.log("loading image: "+t.filesToLoad[r]),(s=new Image).addEventListener("progress",o,!1),s.addEventListener("load",function(){e.files[n]=this,++i==e.filesToLoad.length&&e.onComplete&&e.onComplete(e.files)},!1),s.src=t.filesToLoad[r]):((a=new XMLHttpRequest).onreadystatechange=function(){this.readyState==XMLHttpRequest.DONE&&(e.files[n]=this.responseText,++i==e.filesToLoad.length&&e.onComplete&&e.onComplete(e.files))},a.addEventListener("progress",o,!1),console.log("loading file: "+t.filesToLoad[r]),a.open("GET",t.filesToLoad[r],!0),a.send(null))},r=0;r<this.filesToLoad.length;r++){var o,s,a;n()}}},{key:"start",value:function(){this.loadFileSizes(this.loadContent.bind(this))}}]),t}();e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(i(79));var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return n(t,null,[{key:"createUIComponent",value:function(e){if(e)return e=Object.assign({},t.DEFAULT_PARAMS,e),r.default.create(e)}},{key:"createButton",value:function(t){}}]),t}();e.default=o,o.DEFAULT_PARAMS={fixedPosition:!0,components:{collider:{},spriterenderer:{}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function t(e,i,n,r){var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var s=Object.getPrototypeOf(e);null!==s&&t(s,i,n,r)}else if("value"in o&&o.writable)o.value=n;else{var a=o.set;void 0!==a&&a.call(r,n)}return n},o=u(i(56)),s=u(i(49)),a=i(45);function u(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{width:t,height:i,vertices:n||function(){for(var e=Math.sqrt(Math.pow(t/2,2)+Math.pow(i/2,2)),n=Math.PI/4,r=[],o=0;o<4;o++)r.push(new s.default(e*Math.cos(-n),-e*Math.sin(-n))),n+=Math.PI/2;return r}()},5));if(void 0===o.width||null===o.width||void 0===o.height||null===o.height)throw"Invalid Rectangle: width="+o.width+" height="+o.height;return r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"toJSON",o._toJSON,o),o.toJSON=o._toJSON,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),n(e,[{key:"contains",value:function(t,e,i){var n=i.rotate(t,e);return n.x>=t.x-this.width/2&&n.y>=t.y-this.height/2&&n.x<=t.x+this.width/2&&n.y<=t.y+this.height/2}},{key:"draw",value:function(t,e,i,n){var r=this.width,o=this.height,s=e.x,a=e.y;t.translate(s/n,a/n),t.rotate(-i),t.beginPath();var u=-r/2,c=-o/2;t.rect(u/n,c/n,r/n,o/n),t.closePath(),t.rotate(i),t.translate(-s/n,-a/n)}},{key:"getRotated",value:function(t){return this}},{key:"_toJSON",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,a.deepSerialize)({type:this.type,width:this.width,height:this.height,vertices:this.vertices},[],t,e,i,n)}},{key:"type",get:function(){return"rectangle"}},{key:"width",get:function(){return this.get("width")}},{key:"height",get:function(){return this.get("height")}}],[{key:"fromJSON",value:function(t){var i="string"==typeof t?JSON.parse(t):t,n=i.vertices?i.vertices:null;return new e(i.width,i.height,n)}},{key:"initialize",value:function(){o.default.registerShape("rectangle",e)}}]),e}();e.default=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(i(56)),o=i(45);var s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{radius:t/2,diameter:t},10));if(void 0===i.radius||null===i.radius)throw"Invalid Circle: radius="+i.radius;return i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,r.default),n(e,[{key:"contains",value:function(t,e,i){return t.distance(i)<=this.radius}},{key:"draw",value:function(t,e,i,n){t.beginPath(),t.arc(e.x/n,e.y/n,this.radius/n,0,2*Math.PI),t.closePath()}},{key:"getRotated",value:function(t){return this}},{key:"toJSON",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,o.deepSerialize)({type:this.type,radius:this.radius},[],t,e,i,n)}},{key:"type",get:function(){return"circle"}},{key:"radius",get:function(){return this.get("radius")}},{key:"diameter",get:function(){return this.get("diameter")}}],[{key:"fromJSON",value:function(t){return new e(("string"==typeof t?JSON.parse(t):t).radius)}},{key:"initialize",value:function(){r.default.registerShape("circle",e)}}]),e}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function t(e,i,n,r){var o=Object.getOwnPropertyDescriptor(e,i);if(void 0===o){var s=Object.getPrototypeOf(e);null!==s&&t(s,i,n,r)}else if("value"in o&&o.writable)o.value=n;else{var a=o.set;void 0!==a&&a.call(r,n)}return n},o=u(i(56)),s=u(i(49)),a=i(45);function u(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{numSides:t,diameter:i,vertices:null!=n?n:function(){for(var e=[],n=0,r=0,o=2*Math.PI/t,a=Math.tan(o/2)*(i/2)*2/2/Math.sin(o/2),u=Math.PI/2,c=0;c<t;c++)n=a*Math.cos(-u),r=-a*Math.sin(-u),e.push(new s.default(n,r)),u+=o;return e}()}));if(void 0===o.numSides||null===o.numSides||void 0===o.diameter||null===o.diameter||void 0===o.vertices||null===o.vertices||0===o.vertices.length)throw"Invalid RegularPolygon: numSides="+o.numSides+" size="+o.diameter+(o.vertices?" numVertices="+o.vertices.length:"");return r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"toJSON",o._toJSON,o),o.toJSON=o._toJSON,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),n(e,[{key:"contains",value:function(t,e,i){for(var n=new s.default(i.x-t.x,i.y-t.y),r=this.vertices,o=new s.default(0,0),a=[],u=Math.cos(e),c=Math.sin(e),h=0;h<r.length;h++){var l=r[h],f=r[h+1];h==r.length-1&&(f=r[0]);var m=new s.default(l.x+f.x,l.y+f.y);a[h]=new s.default(m.x*u-m.y*c,-m.x*c-m.y*u)}var _=s.default.distance(o,n);for(h=0;h<a.length;h++){if(s.default.distance(a[h],n)<_)return!1}return!0}},{key:"draw",value:function(t,e,i,n){var r=this.numSides,o=(this.diameter,this.vertices);t.beginPath(),t.moveTo((o[0].x+e.x)/n,(o[0].y+e.y)/n);for(var a=Math.cos(-i),u=Math.sin(-i),c=0;c<r;c++){var h=o[c],l=new s.default(h.x*a-h.y*u,h.x*u+h.y*a);t[0==c?"moveTo":"lineTo"]((l.x+e.x)/n,(l.y+e.y)/n)}t.closePath()}},{key:"getRotated",value:function(t){var i=Math.cos(t),n=Math.sin(t),r=[];return this.vertices.forEach(function(t){r.push(new s.default(t.x*i-t.y*n,t.x*n+t.y*i))}),new e(this.numSides,this.diameter,r)}},{key:"_toJSON",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,a.deepSerialize)({type:this.type,numSides:this.numSides,diameter:this.diameter,vertices:this.vertices},[],t,e,i,n)}},{key:"type",get:function(){return"regularpolygon"}},{key:"numSides",get:function(){return this.get("numSides")}},{key:"diameter",get:function(){return this.get("diameter")}}],[{key:"fromJSON",value:function(t){var i="string"==typeof t?JSON.parse(t):t,n=null;if(i.vertices){n=[];for(var r=0;r<i.vertices.length;r++)n.push(s.default.from(i.vertices[r]))}return new e(i.numSides,i.diameter,n)}},{key:"initialize",value:function(){o.default.registerShape("regularpolygon",e)}}]),e}();e.default=c},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=l;var n=i(16),r=i(15),o=i(9),s=i(2),a=i(1),u=(i(20),i(21),i(25),i(8)),c=(i(18),i(10),i(23),i(22),i(24));l.TYPE="wheel-joint",l._super=c,l.prototype=r(l._super.prototype);var h={enableMotor:!1,maxMotorTorque:0,motorSpeed:0,frequencyHz:2,dampingRatio:.7};function l(t,e,i,r,o){if(!(this instanceof l))return new l(t,e,i,r,o);t=n(t,h),c.call(this,t,e,i),this.m_type=l.TYPE,this.m_localAnchorA=e.getLocalPoint(r),this.m_localAnchorB=i.getLocalPoint(r),this.m_localXAxisA=e.getLocalVector(o||a.neo(1,0)),this.m_localYAxisA=a.cross(1,this.m_localXAxisA),this.m_mass=0,this.m_impulse=0,this.m_motorMass=0,this.m_motorImpulse=0,this.m_springMass=0,this.m_springImpulse=0,this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableMotor=t.enableMotor,this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_bias=0,this.m_gamma=0,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_ax=a.zero(),this.m_ay=a.zero(),this.m_sAx,this.m_sBx,this.m_sAy,this.m_sBy}l.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},l.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},l.prototype.getLocalAxisA=function(){return this.m_localXAxisA},l.prototype.getJointTranslation=function(){var t=this.m_bodyA,e=this.m_bodyB,i=t.getWorldPoint(this.m_localAnchorA),n=e.getWorldPoint(this.m_localAnchorB)-i,r=t.getWorldVector(this.m_localXAxisA);return Dot(n,r)},l.prototype.getJointSpeed=function(){var t=this.m_bodyA.m_angularVelocity;return this.m_bodyB.m_angularVelocity-t},l.prototype.isMotorEnabled=function(){return this.m_enableMotor},l.prototype.enableMotor=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_enableMotor=t},l.prototype.setMotorSpeed=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_motorSpeed=t},l.prototype.getMotorSpeed=function(){return this.m_motorSpeed},l.prototype.setMaxMotorTorque=function(t){this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_maxMotorTorque=t},l.prototype.getMaxMotorTorque=function(){return this.m_maxMotorTorque},l.prototype.getMotorTorque=function(t){return t*this.m_motorImpulse},l.prototype.setSpringFrequencyHz=function(t){this.m_frequencyHz=t},l.prototype.getSpringFrequencyHz=function(){return this.m_frequencyHz},l.prototype.setSpringDampingRatio=function(t){this.m_dampingRatio=t},l.prototype.getSpringDampingRatio=function(){return this.m_dampingRatio},l.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},l.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},l.prototype.getReactionForce=function(t){return t*(this.m_impulse*this.m_ay+this.m_springImpulse*this.m_ax)},l.prototype.getReactionTorque=function(t){return t*this.m_motorImpulse},l.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_invMassA,i=this.m_invMassB,n=this.m_invIA,r=this.m_invIB,o=this.m_bodyA.c_position.c,c=this.m_bodyA.c_position.a,h=this.m_bodyA.c_velocity.v,l=this.m_bodyA.c_velocity.w,f=this.m_bodyB.c_position.c,m=this.m_bodyB.c_position.a,_=this.m_bodyB.c_velocity.v,p=this.m_bodyB.c_velocity.w,d=u.neo(c),y=u.neo(m),v=u.mul(d,a.sub(this.m_localAnchorA,this.m_localCenterA)),g=u.mul(y,a.sub(this.m_localAnchorB,this.m_localCenterB));if((A=a.zero()).wAdd(1,f,1,g),A.wSub(1,o,1,v),this.m_ay=u.mul(d,this.m_localYAxisA),this.m_sAy=a.cross(a.add(A,v),this.m_ay),this.m_sBy=a.cross(g,this.m_ay),this.m_mass=e+i+n*this.m_sAy*this.m_sAy+r*this.m_sBy*this.m_sBy,this.m_mass>0&&(this.m_mass=1/this.m_mass),this.m_springMass=0,this.m_bias=0,this.m_gamma=0,this.m_frequencyHz>0){this.m_ax=u.mul(d,this.m_localXAxisA),this.m_sAx=a.cross(a.add(A,v),this.m_ax),this.m_sBx=a.cross(g,this.m_ax);var b=e+i+n*this.m_sAx*this.m_sAx+r*this.m_sBx*this.m_sBx;if(b>0){this.m_springMass=1/b;var x=a.dot(A,this.m_ax),w=2*s.PI*this.m_frequencyHz,A=2*this.m_springMass*this.m_dampingRatio*w,S=this.m_springMass*w*w,B=t.dt;this.m_gamma=B*(A+B*S),this.m_gamma>0&&(this.m_gamma=1/this.m_gamma),this.m_bias=x*B*S*this.m_gamma,this.m_springMass=b+this.m_gamma,this.m_springMass>0&&(this.m_springMass=1/this.m_springMass)}}else this.m_springImpulse=0;if(this.m_enableMotor?(this.m_motorMass=n+r,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass)):(this.m_motorMass=0,this.m_motorImpulse=0),t.warmStarting){this.m_impulse*=t.dtRatio,this.m_springImpulse*=t.dtRatio,this.m_motorImpulse*=t.dtRatio;var I=a.wAdd(this.m_impulse,this.m_ay,this.m_springImpulse,this.m_ax),O=this.m_impulse*this.m_sAy+this.m_springImpulse*this.m_sAx+this.m_motorImpulse,P=this.m_impulse*this.m_sBy+this.m_springImpulse*this.m_sBx+this.m_motorImpulse;h.wSub(this.m_invMassA,I),l-=this.m_invIA*O,_.wAdd(this.m_invMassB,I),p+=this.m_invIB*P}else this.m_impulse=0,this.m_springImpulse=0,this.m_motorImpulse=0;this.m_bodyA.c_velocity.v.set(h),this.m_bodyA.c_velocity.w=l,this.m_bodyB.c_velocity.v.set(_),this.m_bodyB.c_velocity.w=p},l.prototype.solveVelocityConstraints=function(t){var e=this.m_invMassA,i=this.m_invMassB,n=this.m_invIA,r=this.m_invIB,o=this.m_bodyA.c_velocity.v,u=this.m_bodyA.c_velocity.w,c=this.m_bodyB.c_velocity.v,h=this.m_bodyB.c_velocity.w,l=a.dot(this.m_ax,c)-a.dot(this.m_ax,o)+this.m_sBx*h-this.m_sAx*u,f=-this.m_springMass*(l+this.m_bias+this.m_gamma*this.m_springImpulse);this.m_springImpulse+=f;var m=a.zero().wSet(f,this.m_ax),_=f*this.m_sAx,p=f*this.m_sBx;o.wSub(e,m),u-=n*_,c.wAdd(i,m);l=(h+=r*p)-u-this.m_motorSpeed,f=-this.m_motorMass*l;var d=this.m_motorImpulse,y=t.dt*this.m_maxMotorTorque;this.m_motorImpulse=s.clamp(this.m_motorImpulse+f,-y,y),u-=n*(f=this.m_motorImpulse-d),h+=r*f;l=a.dot(this.m_ay,c)-a.dot(this.m_ay,o)+this.m_sBy*h-this.m_sAy*u,f=-this.m_mass*l;this.m_impulse+=f;m=a.zero().wSet(f,this.m_ay),_=f*this.m_sAy,p=f*this.m_sBy;o.wSub(e,m),u-=n*_,c.wAdd(i,m),h+=r*p,this.m_bodyA.c_velocity.v.set(o),this.m_bodyA.c_velocity.w=u,this.m_bodyB.c_velocity.v.set(c),this.m_bodyB.c_velocity.w=h},l.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyB.c_position.c,r=this.m_bodyB.c_position.a,c=u.neo(i),h=u.neo(r),l=u.mul(c,a.sub(this.m_localAnchorA,this.m_localCenterA)),f=u.mul(h,a.sub(this.m_localAnchorB,this.m_localCenterB)),m=a.zero();m.wAdd(1,n,1,f),m.wSub(1,e,1,l);var _,p=u.mul(c,this.m_localYAxisA),d=a.cross(a.add(m,l),p),y=a.cross(f,p),v=a.dot(m,p),g=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_sAy*this.m_sAy+this.m_invIB*this.m_sBy*this.m_sBy;_=0!=g?-v/g:0;var b=a.zero().wSet(_,p),x=_*d,w=_*y;return e.wSub(this.m_invMassA,b),i-=this.m_invIA*x,n.wAdd(this.m_invMassB,b),r+=this.m_invIB*w,this.m_bodyA.c_position.c.set(e),this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c.set(n),this.m_bodyB.c_position.a=r,s.abs(v)<=o.linearSlop}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=m;var n=i(16),r=i(15),o=i(9),s=i(2),a=i(1),u=i(20),c=(i(21),i(25)),h=i(8),l=(i(18),i(10),i(23),i(22),i(24));m.TYPE="weld-joint",m._super=l,m.prototype=r(m._super.prototype);var f={frequencyHz:0,dampingRatio:0};function m(t,e,i,r){if(!(this instanceof m))return new m(t,e,i,r);t=n(t,f),l.call(this,t,e,i),this.m_type=m.TYPE,this.m_localAnchorA=e.getLocalPoint(r),this.m_localAnchorB=i.getLocalPoint(r),this.m_referenceAngle=i.getAngle()-e.getAngle(),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_impulse=u(),this.m_bias=0,this.m_gamma=0,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass=new c}m.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},m.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},m.prototype.getReferenceAngle=function(){return this.m_referenceAngle},m.prototype.setFrequency=function(t){this.m_frequencyHz=t},m.prototype.getFrequency=function(){return this.m_frequencyHz},m.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},m.prototype.getDampingRatio=function(){return this.m_dampingRatio},m.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},m.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},m.prototype.getReactionForce=function(t){return t*a.neo(this.m_impulse.x,this.m_impulse.y)},m.prototype.getReactionTorque=function(t){return t*this.m_impulse.z},m.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_position.a,o=this.m_bodyB.c_velocity.v,u=this.m_bodyB.c_velocity.w,l=h.neo(e),f=h.neo(r);this.m_rA=h.mul(l,a.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=h.mul(f,a.sub(this.m_localAnchorB,this.m_localCenterB));var m=this.m_invMassA,_=this.m_invMassB,p=this.m_invIA,d=this.m_invIB,y=new c;if(y.ex.x=m+_+this.m_rA.y*this.m_rA.y*p+this.m_rB.y*this.m_rB.y*d,y.ey.x=-this.m_rA.y*this.m_rA.x*p-this.m_rB.y*this.m_rB.x*d,y.ez.x=-this.m_rA.y*p-this.m_rB.y*d,y.ex.y=y.ey.x,y.ey.y=m+_+this.m_rA.x*this.m_rA.x*p+this.m_rB.x*this.m_rB.x*d,y.ez.y=this.m_rA.x*p+this.m_rB.x*d,y.ex.z=y.ez.x,y.ey.z=y.ez.y,y.ez.z=p+d,this.m_frequencyHz>0){y.getInverse22(this.m_mass);var v=p+d,g=v>0?1/v:0,b=r-e-this.m_referenceAngle,x=2*s.PI*this.m_frequencyHz,w=2*g*this.m_dampingRatio*x,A=g*x*x,S=t.dt;this.m_gamma=S*(w+S*A),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=b*S*A*this.m_gamma,v+=this.m_gamma,this.m_mass.ez.z=0!=v?1/v:0}else 0==y.ez.z?(y.getInverse22(this.m_mass),this.m_gamma=0,this.m_bias=0):(y.getSymInverse33(this.m_mass),this.m_gamma=0,this.m_bias=0);if(t.warmStarting){this.m_impulse.mul(t.dtRatio);var B=a.neo(this.m_impulse.x,this.m_impulse.y);i.wSub(m,B),n-=p*(a.cross(this.m_rA,B)+this.m_impulse.z),o.wAdd(_,B),u+=d*(a.cross(this.m_rB,B)+this.m_impulse.z)}else this.m_impulse.setZero();this.m_bodyA.c_velocity.v=i,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=u},m.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=this.m_invMassA,s=this.m_invMassB,h=this.m_invIA,l=this.m_invIB;if(this.m_frequencyHz>0){var f=r-i,m=-this.m_mass.ez.z*(f+this.m_bias+this.m_gamma*this.m_impulse.z);this.m_impulse.z+=m,i-=h*m,r+=l*m,(d=a.zero()).wAdd(1,n,1,a.cross(r,this.m_rB)),d.wSub(1,e,1,a.cross(i,this.m_rA));var _=a.neg(c.mul(this.m_mass,d));this.m_impulse.x+=_.x,this.m_impulse.y+=_.y;var p=a.clone(_);e.wSub(o,p),i-=h*a.cross(this.m_rA,p),n.wAdd(s,p),r+=l*a.cross(this.m_rB,p)}else{var d;(d=a.zero()).wAdd(1,n,1,a.cross(r,this.m_rB)),d.wSub(1,e,1,a.cross(i,this.m_rA));f=r-i;var y=u(d.x,d.y,f),v=u.neg(c.mul(this.m_mass,y));this.m_impulse.add(v);p=a.neo(v.x,v.y);e.wSub(o,p),i-=h*(a.cross(this.m_rA,p)+v.z),n.wAdd(s,p),r+=l*(a.cross(this.m_rB,p)+v.z)}this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=r},m.prototype.solvePositionConstraints=function(t){var e,i,n=this.m_bodyA.c_position.c,r=this.m_bodyA.c_position.a,l=this.m_bodyB.c_position.c,f=this.m_bodyB.c_position.a,m=h.neo(r),_=h.neo(f),p=this.m_invMassA,d=this.m_invMassB,y=this.m_invIA,v=this.m_invIB,g=h.mul(m,a.sub(this.m_localAnchorA,this.m_localCenterA)),b=h.mul(_,a.sub(this.m_localAnchorB,this.m_localCenterB)),x=new c;if(x.ex.x=p+d+g.y*g.y*y+b.y*b.y*v,x.ey.x=-g.y*g.x*y-b.y*b.x*v,x.ez.x=-g.y*y-b.y*v,x.ex.y=x.ey.x,x.ey.y=p+d+g.x*g.x*y+b.x*b.x*v,x.ez.y=g.x*y+b.x*v,x.ex.z=x.ez.x,x.ey.z=x.ez.y,x.ez.z=y+v,this.m_frequencyHz>0){(A=a.zero()).wAdd(1,l,1,b),A.wSub(1,n,1,g),e=A.length(),i=0;var w=a.neg(x.solve22(A));n.wSub(p,w),r-=y*a.cross(g,w),l.wAdd(d,w),f+=v*a.cross(b,w)}else{var A;(A=a.zero()).wAdd(1,l,1,b),A.wSub(1,n,1,g);var S=f-r-this.m_referenceAngle;e=A.length(),i=s.abs(S);var B=u(A.x,A.y,S),I=u();if(x.ez.z>0)I=u.neg(x.solve33(B));else{var O=a.neg(x.solve22(A));I.set(O.x,O.y,0)}w=a.neo(I.x,I.y);n.wSub(p,w),r-=y*(a.cross(g,w)+I.z),l.wAdd(d,w),f+=v*(a.cross(b,w)+I.z)}return this.m_bodyA.c_position.c=n,this.m_bodyA.c_position.a=r,this.m_bodyB.c_position.c=l,this.m_bodyB.c_position.a=f,e<=o.linearSlop&&i<=o.angularSlop}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=f;var n=i(16),r=i(15),o=i(9),s=i(2),a=i(1),u=(i(20),i(21),i(25),i(8)),c=(i(18),i(10),i(23),i(22),i(24)),h=0;f.TYPE="rope-joint",f._super=c,f.prototype=r(f._super.prototype);var l={maxLength:0};function f(t,e,i,r){if(!(this instanceof f))return new f(t,e,i,r);t=n(t,l),c.call(this,t,e,i),this.m_type=f.TYPE,this.m_localAnchorA=t.localAnchorA||e.getLocalPoint(r),this.m_localAnchorB=t.localAnchorB||i.getLocalPoint(r),this.m_maxLength=t.maxLength,this.m_mass=0,this.m_impulse=0,this.m_length=0,this.m_state=h,this.m_u,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass}f.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},f.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},f.prototype.setMaxLength=function(t){this.m_maxLength=t},f.prototype.getMaxLength=function(){return this.m_maxLength},f.prototype.getLimitState=function(){return this.m_state},f.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},f.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},f.prototype.getReactionForce=function(t){return t*this.m_impulse*this.m_u},f.prototype.getReactionTorque=function(t){return 0},f.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,r=this.m_bodyA.c_velocity.w,s=this.m_bodyB.c_position.c,c=this.m_bodyB.c_position.a,l=this.m_bodyB.c_velocity.v,f=this.m_bodyB.c_velocity.w,m=u.neo(i),_=u.neo(c);this.m_rA=u.mulSub(m,this.m_localAnchorA,this.m_localCenterA),this.m_rB=u.mulSub(_,this.m_localAnchorB,this.m_localCenterB),this.m_u=a.zero(),this.m_u.wAdd(1,s,1,this.m_rB),this.m_u.wSub(1,e,1,this.m_rA),this.m_length=this.m_u.length();var p=this.m_length-this.m_maxLength;if(this.m_state=p>0?2:h,!(this.m_length>o.linearSlop))return this.m_u.setZero(),this.m_mass=0,void(this.m_impulse=0);this.m_u.mul(1/this.m_length);var d=a.cross(this.m_rA,this.m_u),y=a.cross(this.m_rB,this.m_u),v=this.m_invMassA+this.m_invIA*d*d+this.m_invMassB+this.m_invIB*y*y;if(this.m_mass=0!=v?1/v:0,t.warmStarting){this.m_impulse*=t.dtRatio;var g=a.mul(this.m_impulse,this.m_u);n.wSub(this.m_invMassA,g),r-=this.m_invIA*a.cross(this.m_rA,g),l.wAdd(this.m_invMassB,g),f+=this.m_invIB*a.cross(this.m_rB,g)}else this.m_impulse=0;this.m_bodyA.c_velocity.v.set(n),this.m_bodyA.c_velocity.w=r,this.m_bodyB.c_velocity.v.set(l),this.m_bodyB.c_velocity.w=f},f.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=a.addCross(e,i,this.m_rA),u=a.addCross(n,r,this.m_rB),c=this.m_length-this.m_maxLength,h=a.dot(this.m_u,a.sub(u,o));c<0&&(h+=t.inv_dt*c);var l=-this.m_mass*h,f=this.m_impulse;this.m_impulse=s.min(0,this.m_impulse+l),l=this.m_impulse-f;var m=a.mul(l,this.m_u);e.wSub(this.m_invMassA,m),i-=this.m_invIA*a.cross(this.m_rA,m),n.wAdd(this.m_invMassB,m),r+=this.m_invIB*a.cross(this.m_rB,m),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=r},f.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyB.c_position.c,r=this.m_bodyB.c_position.a,c=u.neo(i),h=u.neo(r),l=u.mulSub(c,this.m_localAnchorA,this.m_localCenterA),f=u.mulSub(h,this.m_localAnchorB,this.m_localCenterB),m=a.zero();m.wAdd(1,n,1,f),m.wSub(1,e,1,l);var _=m.normalize(),p=_-this.m_maxLength;p=s.clamp(p,0,o.maxLinearCorrection);var d=-this.m_mass*p,y=a.mul(d,m);return e.wSub(this.m_invMassA,y),i-=this.m_invIA*a.cross(l,y),n.wAdd(this.m_invMassB,y),r+=this.m_invIB*a.cross(f,y),this.m_bodyA.c_position.c.set(e),this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c.set(n),this.m_bodyB.c_position.a=r,_-this.m_maxLength<o.linearSlop}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=_;var r=i(4),o=i(16),s=i(15),a=i(9),u=i(2),c=i(1),h=i(20),l=(i(21),i(25),i(8)),f=(i(18),i(10),i(23),i(22),i(24));_.TYPE="pulley-joint",_.MIN_PULLEY_LENGTH=2,_._super=f,_.prototype=s(_._super.prototype);var m={collideConnected:!0};function _(t,e,i,s,a,h,l,p){if(!(this instanceof _))return new _(t,e,i,s,a,h,l,p);t=o(t,m),f.call(this,t,e,i),this.m_type=_.TYPE,this.m_groundAnchorA=s,this.m_groundAnchorB=a,this.m_localAnchorA=e.getLocalPoint(h),this.m_localAnchorB=i.getLocalPoint(l),this.m_lengthA=c.distance(h,s),this.m_lengthB=c.distance(l,a),this.m_ratio=t.ratio||p,n&&r.assert(p>u.EPSILON),this.m_constant=this.m_lengthA+this.m_ratio*this.m_lengthB,this.m_impulse=0,this.m_uA,this.m_uB,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass}_.prototype.getGroundAnchorA=function(){return this.m_groundAnchorA},_.prototype.getGroundAnchorB=function(){return this.m_groundAnchorB},_.prototype.getLengthA=function(){return this.m_lengthA},_.prototype.getLengthB=function(){return this.m_lengthB},_.prototype.getRatio=function(){return this.m_ratio},_.prototype.getCurrentLengthA=function(){var t=this.m_bodyA.getWorldPoint(this.m_localAnchorA),e=this.m_groundAnchorA;return c.distance(t,e)},_.prototype.getCurrentLengthB=function(){var t=this.m_bodyB.getWorldPoint(this.m_localAnchorB),e=this.m_groundAnchorB;return c.distance(t,e)},_.prototype.shiftOrigin=function(t){this.m_groundAnchorA-=t,this.m_groundAnchorB-=t},_.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},_.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},_.prototype.getReactionForce=function(t){return h.mul(t*this.m_impulse,this.m_uB)},_.prototype.getReactionTorque=function(t){return 0},_.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,r=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,u=this.m_bodyB.c_velocity.v,h=this.m_bodyB.c_velocity.w,f=l.neo(i),m=l.neo(s);this.m_rA=l.mul(f,c.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=l.mul(m,c.sub(this.m_localAnchorB,this.m_localCenterB)),this.m_uA=c.sub(c.add(e,this.m_rA),this.m_groundAnchorA),this.m_uB=c.sub(c.add(o,this.m_rB),this.m_groundAnchorB);var _=this.m_uA.length(),p=this.m_uB.length();_>10*a.linearSlop?this.m_uA.mul(1/_):this.m_uA.setZero(),p>10*a.linearSlop?this.m_uB.mul(1/p):this.m_uB.setZero();var d=c.cross(this.m_rA,this.m_uA),y=c.cross(this.m_rB,this.m_uB),v=this.m_invMassA+this.m_invIA*d*d,g=this.m_invMassB+this.m_invIB*y*y;if(this.m_mass=v+this.m_ratio*this.m_ratio*g,this.m_mass>0&&(this.m_mass=1/this.m_mass),t.warmStarting){this.m_impulse*=t.dtRatio;var b=c.mul(-this.m_impulse,this.m_uA),x=c.mul(-this.m_ratio*this.m_impulse,this.m_uB);n.wAdd(this.m_invMassA,b),r+=this.m_invIA*c.cross(this.m_rA,b),u.wAdd(this.m_invMassB,x),h+=this.m_invIB*c.cross(this.m_rB,x)}else this.m_impulse=0;this.m_bodyA.c_velocity.v=n,this.m_bodyA.c_velocity.w=r,this.m_bodyB.c_velocity.v=u,this.m_bodyB.c_velocity.w=h},_.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=c.add(e,c.cross(i,this.m_rA)),s=c.add(n,c.cross(r,this.m_rB)),a=-c.dot(this.m_uA,o)-this.m_ratio*c.dot(this.m_uB,s),u=-this.m_mass*a;this.m_impulse+=u;var h=c.zero().wSet(-u,this.m_uA),l=c.zero().wSet(-this.m_ratio*u,this.m_uB);e.wAdd(this.m_invMassA,h),i+=this.m_invIA*c.cross(this.m_rA,h),n.wAdd(this.m_invMassB,l),r+=this.m_invIB*c.cross(this.m_rB,l),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=r},_.prototype.solvePositionConstraints=function(t){var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyB.c_position.c,r=this.m_bodyB.c_position.a,o=l.neo(i),s=l.neo(r),h=l.mul(o,c.sub(this.m_localAnchorA,this.m_localCenterA)),f=l.mul(s,c.sub(this.m_localAnchorB,this.m_localCenterB)),m=c.sub(c.add(e,this.m_rA),this.m_groundAnchorA),_=c.sub(c.add(n,this.m_rB),this.m_groundAnchorB),p=m.length(),d=_.length();p>10*a.linearSlop?m.mul(1/p):m.setZero(),d>10*a.linearSlop?_.mul(1/d):_.setZero();var y=c.cross(h,m),v=c.cross(f,_),g=this.m_invMassA+this.m_invIA*y*y,b=this.m_invMassB+this.m_invIB*v*v,x=g+this.m_ratio*this.m_ratio*b;x>0&&(x=1/x);var w=this.m_constant-p-this.m_ratio*d,A=u.abs(w),S=-x*w,B=c.zero().wSet(-S,m),I=c.zero().wSet(-this.m_ratio*S,_);return e.wAdd(this.m_invMassA,B),i+=this.m_invIA*c.cross(h,B),n.wAdd(this.m_invMassB,I),r+=this.m_invIB*c.cross(f,I),this.m_bodyA.c_position.c=e,this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c=n,this.m_bodyB.c_position.a=r,A<a.linearSlop}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=_;var r=i(4),o=i(16),s=i(15),a=i(2),u=i(1),c=(i(20),i(21)),h=(i(25),i(8)),l=(i(18),i(10)),f=(i(23),i(22),i(24));_.TYPE="mouse-joint",_._super=f,_.prototype=s(_._super.prototype);var m={maxForce:0,frequencyHz:5,dampingRatio:.7};function _(t,e,i,s){if(!(this instanceof _))return new _(t,e,i,s);t=o(t,m),f.call(this,t,e,i),this.m_type=_.TYPE,n&&r.assert(a.isFinite(t.maxForce)&&t.maxForce>=0),n&&r.assert(a.isFinite(t.frequencyHz)&&t.frequencyHz>=0),n&&r.assert(a.isFinite(t.dampingRatio)&&t.dampingRatio>=0),this.m_targetA=u.clone(s),this.m_localAnchorB=l.mulT(this.m_bodyB.getTransform(),this.m_targetA),this.m_maxForce=t.maxForce,this.m_impulse=u.zero(),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_beta=0,this.m_gamma=0,this.m_rB=u.zero(),this.m_localCenterB=u.zero(),this.m_invMassB=0,this.m_invIB=0,this.mass=new c,this.m_C=u.zero()}_.prototype.setTarget=function(t){0==this.m_bodyB.isAwake()&&this.m_bodyB.setAwake(!0),this.m_targetA=u.clone(t)},_.prototype.getTarget=function(){return this.m_targetA},_.prototype.setMaxForce=function(t){this.m_maxForce=t},_.getMaxForce=function(){return this.m_maxForce},_.prototype.setFrequency=function(t){this.m_frequencyHz=t},_.prototype.getFrequency=function(){return this.m_frequencyHz},_.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},_.prototype.getDampingRatio=function(){return this.m_dampingRatio},_.prototype.getAnchorA=function(){return u.clone(this.m_targetA)},_.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},_.prototype.getReactionForce=function(t){return u.mul(t,this.m_impulse)},_.prototype.getReactionTorque=function(t){return 0*t},_.prototype.shiftOrigin=function(t){this.m_targetA.sub(t)},_.prototype.initVelocityConstraints=function(t){this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyB.c_position,i=this.m_bodyB.c_velocity,o=e.c,s=e.a,l=i.v,f=i.w,m=h.neo(s),_=this.m_bodyB.getMass(),p=2*a.PI*this.m_frequencyHz,d=2*_*this.m_dampingRatio*p,y=_*(p*p),v=t.dt;n&&r.assert(d+v*y>a.EPSILON),this.m_gamma=v*(d+v*y),0!=this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_beta=v*y*this.m_gamma,this.m_rB=h.mul(m,u.sub(this.m_localAnchorB,this.m_localCenterB));var g=new c;g.ex.x=this.m_invMassB+this.m_invIB*this.m_rB.y*this.m_rB.y+this.m_gamma,g.ex.y=-this.m_invIB*this.m_rB.x*this.m_rB.y,g.ey.x=g.ex.y,g.ey.y=this.m_invMassB+this.m_invIB*this.m_rB.x*this.m_rB.x+this.m_gamma,this.m_mass=g.getInverse(),this.m_C.set(o),this.m_C.wAdd(1,this.m_rB,-1,this.m_targetA),this.m_C.mul(this.m_beta),f*=.98,t.warmStarting?(this.m_impulse.mul(t.dtRatio),l.wAdd(this.m_invMassB,this.m_impulse),f+=this.m_invIB*u.cross(this.m_rB,this.m_impulse)):this.m_impulse.setZero(),i.v.set(l),i.w=f},_.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyB.c_velocity,i=u.clone(e.v),n=e.w,r=u.cross(n,this.m_rB);r.add(i),r.wAdd(1,this.m_C,this.m_gamma,this.m_impulse),r.neg();var o=c.mul(this.m_mass,r),s=u.clone(this.m_impulse);this.m_impulse.add(o);var a=t.dt*this.m_maxForce;this.m_impulse.clamp(a),o=u.sub(this.m_impulse,s),i.wAdd(this.m_invMassB,o),n+=this.m_invIB*u.cross(this.m_rB,o),e.v.set(i),e.w=n},_.prototype.solvePositionConstraints=function(t){return!0}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=m;var r=i(4),o=i(16),s=i(15),a=(i(9),i(2)),u=i(1),c=(i(20),i(21)),h=(i(25),i(8)),l=(i(18),i(10),i(23),i(22),i(24));m.TYPE="motor-joint",m._super=l,m.prototype=s(m._super.prototype);var f={maxForce:1,maxTorque:1,correctionFactor:.3};function m(t,e,i){if(!(this instanceof m))return new m(t,e,i);t=o(t,f),l.call(this,t,e,i),this.m_type=m.TYPE;var n=i.getPosition();this.m_linearOffset=e.getLocalPoint(n);var r=e.getAngle(),s=i.getAngle();this.m_angularOffset=s-r,this.m_linearImpulse=u.zero(),this.m_angularImpulse=0,this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque,this.m_correctionFactor=t.correctionFactor,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_linearError,this.m_angularError,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_linearMass,this.m_angularMass}m.prototype.setMaxForce=function(t){n&&r.assert(IsValid(t)&&t>=0),this.m_maxForce=t},m.prototype.getMaxForce=function(){return this.m_maxForce},m.prototype.setMaxTorque=function(t){n&&r.assert(IsValid(t)&&t>=0),this.m_maxTorque=t},m.prototype.getMaxTorque=function(){return this.m_maxTorque},m.prototype.setCorrectionFactor=function(t){n&&r.assert(IsValid(t)&&0<=t&&t<=1),this.m_correctionFactor=t},m.prototype.getCorrectionFactor=function(){return this.m_correctionFactor},m.prototype.setLinearOffset=function(t){t.x==this.m_linearOffset.x&&t.y==this.m_linearOffset.y||(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_linearOffset=t)},m.prototype.getLinearOffset=function(){return this.m_linearOffset},m.prototype.setAngularOffset=function(t){t!=this.m_angularOffset&&(this.m_bodyA.setAwake(!0),this.m_bodyB.setAwake(!0),this.m_angularOffset=t)},m.prototype.getAngularOffset=function(){return this.m_angularOffset},m.prototype.getAnchorA=function(){return this.m_bodyA.getPosition()},m.prototype.getAnchorB=function(){return this.m_bodyB.getPosition()},m.prototype.getReactionForce=function(t){return t*this.m_linearImpulse},m.prototype.getReactionTorque=function(t){return t*this.m_angularImpulse},m.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,r=this.m_bodyA.c_velocity.w,o=this.m_bodyB.c_position.c,s=this.m_bodyB.c_position.a,a=this.m_bodyB.c_velocity.v,l=this.m_bodyB.c_velocity.w,f=h.neo(i),m=h.neo(s);this.m_rA=h.mul(f,u.neg(this.m_localCenterA)),this.m_rB=h.mul(m,u.neg(this.m_localCenterB));var _=this.m_invMassA,p=this.m_invMassB,d=this.m_invIA,y=this.m_invIB,v=new c;if(v.ex.x=_+p+d*this.m_rA.y*this.m_rA.y+y*this.m_rB.y*this.m_rB.y,v.ex.y=-d*this.m_rA.x*this.m_rA.y-y*this.m_rB.x*this.m_rB.y,v.ey.x=v.ex.y,v.ey.y=_+p+d*this.m_rA.x*this.m_rA.x+y*this.m_rB.x*this.m_rB.x,this.m_linearMass=v.getInverse(),this.m_angularMass=d+y,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),this.m_linearError=u.zero(),this.m_linearError.wAdd(1,o,1,this.m_rB),this.m_linearError.wSub(1,e,1,this.m_rA),this.m_linearError.sub(h.mul(f,this.m_linearOffset)),this.m_angularError=s-i-this.m_angularOffset,t.warmStarting){this.m_linearImpulse.mul(t.dtRatio),this.m_angularImpulse*=t.dtRatio;var g=u.neo(this.m_linearImpulse.x,this.m_linearImpulse.y);n.wSub(_,g),r-=d*(u.cross(this.m_rA,g)+this.m_angularImpulse),a.wAdd(p,g),l+=y*(u.cross(this.m_rB,g)+this.m_angularImpulse)}else this.m_linearImpulse.setZero(),this.m_angularImpulse=0;this.m_bodyA.c_velocity.v=n,this.m_bodyA.c_velocity.w=r,this.m_bodyB.c_velocity.v=a,this.m_bodyB.c_velocity.w=l},m.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=this.m_invMassA,s=this.m_invMassB,h=this.m_invIA,l=this.m_invIB,f=t.dt,m=t.inv_dt,_=r-i+m*this.m_correctionFactor*this.m_angularError,p=-this.m_angularMass*_,d=this.m_angularImpulse,y=f*this.m_maxTorque;this.m_angularImpulse=a.clamp(this.m_angularImpulse+p,-y,y),i-=h*(p=this.m_angularImpulse-d),r+=l*p,(_=u.zero()).wAdd(1,n,1,u.cross(r,this.m_rB)),_.wSub(1,e,1,u.cross(i,this.m_rA)),_.wAdd(m*this.m_correctionFactor,this.m_linearError);p=u.neg(c.mul(this.m_linearMass,_)),d=u.clone(this.m_linearImpulse);this.m_linearImpulse.add(p);y=f*this.m_maxForce;this.m_linearImpulse.clamp(y),p=u.sub(this.m_linearImpulse,d),e.wSub(o,p),i-=h*u.cross(this.m_rA,p),n.wAdd(s,p),r+=l*u.cross(this.m_rB,p),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=r},m.prototype.solvePositionConstraints=function(t){return!0}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=p;var r=i(4),o=i(16),s=i(15),a=i(9),u=i(2),c=i(1),h=(i(20),i(21),i(25),i(8)),l=(i(18),i(10),i(23),i(22),i(24)),f=i(127),m=i(126);p.TYPE="gear-joint",p._super=l,p.prototype=s(p._super.prototype);var _={ratio:1};function p(t,e,i,s,a,u){if(!(this instanceof p))return new p(t,e,i,s,a,u);var d,y;t=o(t,_),l.call(this,t,e,i),this.m_type=p.TYPE,n&&r.assert(s.m_type==f.TYPE||s.m_type==m.TYPE),n&&r.assert(a.m_type==f.TYPE||a.m_type==m.TYPE),this.m_joint1=s,this.m_joint2=a,this.m_type1=this.m_joint1.getType(),this.m_type2=this.m_joint2.getType(),this.m_bodyC=this.m_joint1.getBodyA(),this.m_bodyA=this.m_joint1.getBodyB();var v=this.m_bodyA.m_xf,g=this.m_bodyA.m_sweep.a,b=this.m_bodyC.m_xf,x=this.m_bodyC.m_sweep.a;if(this.m_type1==f.TYPE){var w=s;this.m_localAnchorC=w.m_localAnchorA,this.m_localAnchorA=w.m_localAnchorB,this.m_referenceAngleA=w.m_referenceAngle,this.m_localAxisC=c.zero(),d=g-x-this.m_referenceAngleA}else{var A=s;this.m_localAnchorC=A.m_localAnchorA,this.m_localAnchorA=A.m_localAnchorB,this.m_referenceAngleA=A.m_referenceAngle,this.m_localAxisC=A.m_localXAxisA;var S=this.m_localAnchorC,B=h.mulT(b.q,c.add(h.mul(v.q,this.m_localAnchorA),c.sub(v.p,b.p)));d=c.dot(B,this.m_localAxisC)-c.dot(S,this.m_localAxisC)}this.m_bodyD=this.m_joint2.getBodyA(),this.m_bodyB=this.m_joint2.getBodyB();var I=this.m_bodyB.m_xf,O=this.m_bodyB.m_sweep.a,P=this.m_bodyD.m_xf,M=this.m_bodyD.m_sweep.a;if(this.m_type2==f.TYPE){w=a;this.m_localAnchorD=w.m_localAnchorA,this.m_localAnchorB=w.m_localAnchorB,this.m_referenceAngleB=w.m_referenceAngle,this.m_localAxisD=c.zero(),y=O-M-this.m_referenceAngleB}else{A=a;this.m_localAnchorD=A.m_localAnchorA,this.m_localAnchorB=A.m_localAnchorB,this.m_referenceAngleB=A.m_referenceAngle,this.m_localAxisD=A.m_localXAxisA;var E=this.m_localAnchorD,C=h.mulT(P.q,c.add(h.mul(I.q,this.m_localAnchorB),c.sub(I.p,P.p)));y=c.dot(C,this.m_localAxisD)-c.dot(E,this.m_localAxisD)}this.m_ratio=u||t.ratio,this.m_constant=d+this.m_ratio*y,this.m_impulse=0,this.m_lcA,this.m_lcB,this.m_lcC,this.m_lcD,this.m_mA,this.m_mB,this.m_mC,this.m_mD,this.m_iA,this.m_iB,this.m_iC,this.m_iD,this.m_JvAC,this.m_JvBD,this.m_JwA,this.m_JwB,this.m_JwC,this.m_JwD,this.m_mass}p.prototype.getJoint1=function(){return this.m_joint1},p.prototype.getJoint2=function(){return this.m_joint2},p.prototype.setRatio=function(t){n&&r.assert(u.isFinite(t)),this.m_ratio=t},p.prototype.getRatio=function(){return this.m_ratio},p.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},p.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},p.prototype.getReactionForce=function(t){return t*(this.m_impulse*this.m_JvAC)},p.prototype.getReactionTorque=function(t){return t*(this.m_impulse*this.m_JwA)},p.prototype.initVelocityConstraints=function(t){this.m_lcA=this.m_bodyA.m_sweep.localCenter,this.m_lcB=this.m_bodyB.m_sweep.localCenter,this.m_lcC=this.m_bodyC.m_sweep.localCenter,this.m_lcD=this.m_bodyD.m_sweep.localCenter,this.m_mA=this.m_bodyA.m_invMass,this.m_mB=this.m_bodyB.m_invMass,this.m_mC=this.m_bodyC.m_invMass,this.m_mD=this.m_bodyD.m_invMass,this.m_iA=this.m_bodyA.m_invI,this.m_iB=this.m_bodyB.m_invI,this.m_iC=this.m_bodyC.m_invI,this.m_iD=this.m_bodyD.m_invI;var e=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_position.a,o=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,a=this.m_bodyC.c_position.a,u=this.m_bodyC.c_velocity.v,l=this.m_bodyC.c_velocity.w,m=this.m_bodyD.c_position.a,_=this.m_bodyD.c_velocity.v,p=this.m_bodyD.c_velocity.w,d=h.neo(e),y=h.neo(r),v=h.neo(a),g=h.neo(m);if(this.m_mass=0,this.m_type1==f.TYPE)this.m_JvAC=c.zero(),this.m_JwA=1,this.m_JwC=1,this.m_mass+=this.m_iA+this.m_iC;else{var b=h.mul(v,this.m_localAxisC),x=h.mulSub(v,this.m_localAnchorC,this.m_lcC),w=h.mulSub(d,this.m_localAnchorA,this.m_lcA);this.m_JvAC=b,this.m_JwC=c.cross(x,b),this.m_JwA=c.cross(w,b),this.m_mass+=this.m_mC+this.m_mA+this.m_iC*this.m_JwC*this.m_JwC+this.m_iA*this.m_JwA*this.m_JwA}if(this.m_type2==f.TYPE)this.m_JvBD=c.zero(),this.m_JwB=this.m_ratio,this.m_JwD=this.m_ratio,this.m_mass+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD);else{b=h.mul(g,this.m_localAxisD);var A=h.mulSub(g,this.m_localAnchorD,this.m_lcD),S=h.mulSub(y,this.m_localAnchorB,this.m_lcB);this.m_JvBD=c.mul(this.m_ratio,b),this.m_JwD=this.m_ratio*c.cross(A,b),this.m_JwB=this.m_ratio*c.cross(S,b),this.m_mass+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*this.m_JwD*this.m_JwD+this.m_iB*this.m_JwB*this.m_JwB}this.m_mass=this.m_mass>0?1/this.m_mass:0,t.warmStarting?(i.wAdd(this.m_mA*this.m_impulse,this.m_JvAC),n+=this.m_iA*this.m_impulse*this.m_JwA,o.wAdd(this.m_mB*this.m_impulse,this.m_JvBD),s+=this.m_iB*this.m_impulse*this.m_JwB,u.wSub(this.m_mC*this.m_impulse,this.m_JvAC),l-=this.m_iC*this.m_impulse*this.m_JwC,_.wSub(this.m_mD*this.m_impulse,this.m_JvBD),p-=this.m_iD*this.m_impulse*this.m_JwD):this.m_impulse=0,this.m_bodyA.c_velocity.v.set(i),this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v.set(o),this.m_bodyB.c_velocity.w=s,this.m_bodyC.c_velocity.v.set(u),this.m_bodyC.c_velocity.w=l,this.m_bodyD.c_velocity.v.set(_),this.m_bodyD.c_velocity.w=p},p.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=this.m_bodyC.c_velocity.v,s=this.m_bodyC.c_velocity.w,a=this.m_bodyD.c_velocity.v,u=this.m_bodyD.c_velocity.w,h=c.dot(this.m_JvAC,e)-c.dot(this.m_JvAC,o)+c.dot(this.m_JvBD,n)-c.dot(this.m_JvBD,a);h+=this.m_JwA*i-this.m_JwC*s+(this.m_JwB*r-this.m_JwD*u);var l=-this.m_mass*h;this.m_impulse+=l,e.wAdd(this.m_mA*l,this.m_JvAC),i+=this.m_iA*l*this.m_JwA,n.wAdd(this.m_mB*l,this.m_JvBD),r+=this.m_iB*l*this.m_JwB,o.wSub(this.m_mC*l,this.m_JvAC),s-=this.m_iC*l*this.m_JwC,a.wSub(this.m_mD*l,this.m_JvBD),u-=this.m_iD*l*this.m_JwD,this.m_bodyA.c_velocity.v.set(e),this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v.set(n),this.m_bodyB.c_velocity.w=r,this.m_bodyC.c_velocity.v.set(o),this.m_bodyC.c_velocity.w=s,this.m_bodyD.c_velocity.v.set(a),this.m_bodyD.c_velocity.w=u},p.prototype.solvePositionConstraints=function(t){var e,i,n,r,o,s,u,l,m=this.m_bodyA.c_position.c,_=this.m_bodyA.c_position.a,p=this.m_bodyB.c_position.c,d=this.m_bodyB.c_position.a,y=this.m_bodyC.c_position.c,v=this.m_bodyC.c_position.a,g=this.m_bodyD.c_position.c,b=this.m_bodyD.c_position.a,x=h.neo(_),w=h.neo(d),A=h.neo(v),S=h.neo(b),B=0;if(this.m_type1==f.TYPE)n=c.zero(),o=1,u=1,B+=this.m_iA+this.m_iC,e=_-v-this.m_referenceAngleA;else{var I=h.mul(A,this.m_localAxisC),O=h.mulSub(A,this.m_localAnchorC,this.m_lcC),P=h.mulSub(x,this.m_localAnchorA,this.m_lcA);n=I,u=c.cross(O,I),o=c.cross(P,I),B+=this.m_mC+this.m_mA+this.m_iC*u*u+this.m_iA*o*o;var M=c.sub(this.m_localAnchorC,this.m_lcC),E=h.mulT(A,c.add(P,c.sub(m,y)));e=c.dot(c.sub(E,M),this.m_localAxisC)}if(this.m_type2==f.TYPE)r=c.zero(),s=this.m_ratio,l=this.m_ratio,B+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD),i=d-b-this.m_referenceAngleB;else{I=h.mul(S,this.m_localAxisD);var C=h.mulSub(S,this.m_localAnchorD,this.m_lcD),k=h.mulSub(w,this.m_localAnchorB,this.m_lcB);r=c.mul(this.m_ratio,I),l=this.m_ratio*c.cross(C,I),s=this.m_ratio*c.cross(k,I),B+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*l*l+this.m_iB*s*s;var T=c.sub(this.m_localAnchorD,this.m_lcD),j=h.mulT(S,c.add(k,c.sub(p,g)));i=c.dot(j,this.m_localAxisD)-c.dot(T,this.m_localAxisD)}var z=e+this.m_ratio*i-this.m_constant,D=0;return B>0&&(D=-z/B),m.wAdd(this.m_mA*D,n),_+=this.m_iA*D*o,p.wAdd(this.m_mB*D,r),d+=this.m_iB*D*s,y.wSub(this.m_mC*D,n),v-=this.m_iC*D*u,g.wSub(this.m_mD*D,r),b-=this.m_iD*D*l,this.m_bodyA.c_position.c.set(m),this.m_bodyA.c_position.a=_,this.m_bodyB.c_position.c.set(p),this.m_bodyB.c_position.a=d,this.m_bodyC.c_position.c.set(y),this.m_bodyC.c_position.a=v,this.m_bodyD.c_position.c.set(g),this.m_bodyD.c_position.a=b,0<a.linearSlop}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT;t.exports=m;var r=i(4),o=i(16),s=i(15),a=(i(9),i(2)),u=i(1),c=(i(20),i(21)),h=(i(25),i(8)),l=(i(18),i(10),i(23),i(22),i(24));m.TYPE="friction-joint",m._super=l,m.prototype=s(m._super.prototype);var f={maxForce:0,maxTorque:0};function m(t,e,i,n){if(!(this instanceof m))return new m(t,e,i,n);t=o(t,f),l.call(this,t,e,i),this.m_type=m.TYPE,n?(this.m_localAnchorA=e.getLocalPoint(n),this.m_localAnchorB=i.getLocalPoint(n)):(this.m_localAnchorA=u.zero(),this.m_localAnchorB=u.zero()),this.m_linearImpulse=u.zero(),this.m_angularImpulse=0,this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_linearMass,this.m_angularMass}m.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},m.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},m.prototype.setMaxForce=function(t){n&&r.assert(IsValid(t)&&t>=0),this.m_maxForce=t},m.prototype.getMaxForce=function(){return this.m_maxForce},m.prototype.setMaxTorque=function(t){n&&r.assert(IsValid(t)&&t>=0),this.m_maxTorque=t},m.prototype.getMaxTorque=function(){return this.m_maxTorque},m.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},m.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},m.prototype.getReactionForce=function(t){return t*this.m_linearImpulse},m.prototype.getReactionTorque=function(t){return t*this.m_angularImpulse},m.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.a,i=this.m_bodyA.c_velocity.v,n=this.m_bodyA.c_velocity.w,r=this.m_bodyB.c_position.a,o=this.m_bodyB.c_velocity.v,s=this.m_bodyB.c_velocity.w,a=h.neo(e),l=h.neo(r);this.m_rA=h.mul(a,u.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=h.mul(l,u.sub(this.m_localAnchorB,this.m_localCenterB));var f=this.m_invMassA,m=this.m_invMassB,_=this.m_invIA,p=this.m_invIB,d=new c;if(d.ex.x=f+m+_*this.m_rA.y*this.m_rA.y+p*this.m_rB.y*this.m_rB.y,d.ex.y=-_*this.m_rA.x*this.m_rA.y-p*this.m_rB.x*this.m_rB.y,d.ey.x=d.ex.y,d.ey.y=f+m+_*this.m_rA.x*this.m_rA.x+p*this.m_rB.x*this.m_rB.x,this.m_linearMass=d.getInverse(),this.m_angularMass=_+p,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),t.warmStarting){this.m_linearImpulse.mul(t.dtRatio),this.m_angularImpulse*=t.dtRatio;var y=u.neo(this.m_linearImpulse.x,this.m_linearImpulse.y);i.wSub(f,y),n-=_*(u.cross(this.m_rA,y)+this.m_angularImpulse),o.wAdd(m,y),s+=p*(u.cross(this.m_rB,y)+this.m_angularImpulse)}else this.m_linearImpulse.setZero(),this.m_angularImpulse=0;this.m_bodyA.c_velocity.v=i,this.m_bodyA.c_velocity.w=n,this.m_bodyB.c_velocity.v=o,this.m_bodyB.c_velocity.w=s},m.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=this.m_invMassA,s=this.m_invMassB,h=this.m_invIA,l=this.m_invIB,f=t.dt,m=r-i,_=-this.m_angularMass*m,p=this.m_angularImpulse,d=f*this.m_maxTorque;this.m_angularImpulse=a.clamp(this.m_angularImpulse+_,-d,d),i-=h*(_=this.m_angularImpulse-p),r+=l*_;m=u.sub(u.add(n,u.cross(r,this.m_rB)),u.add(e,u.cross(i,this.m_rA))),_=u.neg(c.mul(this.m_linearMass,m)),p=this.m_linearImpulse;this.m_linearImpulse.add(_);d=f*this.m_maxForce;this.m_linearImpulse.lengthSquared()>d*d&&(this.m_linearImpulse.normalize(),this.m_linearImpulse.mul(d)),_=u.sub(this.m_linearImpulse,p),e.wSub(o,_),i-=h*u.cross(this.m_rA,_),n.wAdd(s,_),r+=l*u.cross(this.m_rB,_),this.m_bodyA.c_velocity.v=e,this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v=n,this.m_bodyB.c_velocity.w=r},m.prototype.solvePositionConstraints=function(t){return!0}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=l;var n=i(16),r=i(15),o=i(9),s=i(2),a=i(1),u=(i(20),i(21),i(25),i(8)),c=(i(18),i(10),i(23),i(22),i(24));l.TYPE="distance-joint",l._super=c,l.prototype=r(l._super.prototype);var h={frequencyHz:0,dampingRatio:0};function l(t,e,i,r,o){if(!(this instanceof l))return new l(t,e,i,r,o);t=n(t,h),c.call(this,t,e,r),this.m_type=l.TYPE,this.m_localAnchorA=t.localAnchorA||e.getLocalPoint(i),this.m_localAnchorB=t.localAnchorB||r.getLocalPoint(o),this.m_length=a.distance(o,i),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_impulse=0,this.m_gamma=0,this.m_bias=0,this.m_u,this.m_rA,this.m_rB,this.m_localCenterA,this.m_localCenterB,this.m_invMassA,this.m_invMassB,this.m_invIA,this.m_invIB,this.m_mass}l.prototype.getLocalAnchorA=function(){return this.m_localAnchorA},l.prototype.getLocalAnchorB=function(){return this.m_localAnchorB},l.prototype.setLength=function(t){this.m_length=t},l.prototype.getLength=function(){return this.m_length},l.prototype.setFrequency=function(t){this.m_frequencyHz=t},l.prototype.getFrequency=function(){return this.m_frequencyHz},l.prototype.setDampingRatio=function(t){this.m_dampingRatio=t},l.prototype.getDampingRatio=function(){return this.m_dampingRatio},l.prototype.getAnchorA=function(){return this.m_bodyA.getWorldPoint(this.m_localAnchorA)},l.prototype.getAnchorB=function(){return this.m_bodyB.getWorldPoint(this.m_localAnchorB)},l.prototype.getReactionForce=function(t){return a.mul(t*this.m_impulse,this.m_u)},l.prototype.getReactionTorque=function(t){return 0},l.prototype.initVelocityConstraints=function(t){this.m_localCenterA=this.m_bodyA.m_sweep.localCenter,this.m_localCenterB=this.m_bodyB.m_sweep.localCenter,this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyA.c_velocity.v,r=this.m_bodyA.c_velocity.w,c=this.m_bodyB.c_position.c,h=this.m_bodyB.c_position.a,l=this.m_bodyB.c_velocity.v,f=this.m_bodyB.c_velocity.w,m=u.neo(i),_=u.neo(h);this.m_rA=u.mul(m,a.sub(this.m_localAnchorA,this.m_localCenterA)),this.m_rB=u.mul(_,a.sub(this.m_localAnchorB,this.m_localCenterB)),this.m_u=a.sub(a.add(c,this.m_rB),a.add(e,this.m_rA));var p=this.m_u.length();p>o.linearSlop?this.m_u.mul(1/p):this.m_u.set(0,0);var d=a.cross(this.m_rA,this.m_u),y=a.cross(this.m_rB,this.m_u),v=this.m_invMassA+this.m_invIA*d*d+this.m_invMassB+this.m_invIB*y*y;if(this.m_mass=0!=v?1/v:0,this.m_frequencyHz>0){var g=p-this.m_length,b=2*s.PI*this.m_frequencyHz,x=2*this.m_mass*this.m_dampingRatio*b,w=this.m_mass*b*b,A=t.dt;this.m_gamma=A*(x+A*w),this.m_gamma=0!=this.m_gamma?1/this.m_gamma:0,this.m_bias=g*A*w*this.m_gamma,v+=this.m_gamma,this.m_mass=0!=v?1/v:0}else this.m_gamma=0,this.m_bias=0;if(t.warmStarting){this.m_impulse*=t.dtRatio;var S=a.mul(this.m_impulse,this.m_u);n.wSub(this.m_invMassA,S),r-=this.m_invIA*a.cross(this.m_rA,S),l.wAdd(this.m_invMassB,S),f+=this.m_invIB*a.cross(this.m_rB,S)}else this.m_impulse=0;this.m_bodyA.c_velocity.v.set(n),this.m_bodyA.c_velocity.w=r,this.m_bodyB.c_velocity.v.set(l),this.m_bodyB.c_velocity.w=f},l.prototype.solveVelocityConstraints=function(t){var e=this.m_bodyA.c_velocity.v,i=this.m_bodyA.c_velocity.w,n=this.m_bodyB.c_velocity.v,r=this.m_bodyB.c_velocity.w,o=a.add(e,a.cross(i,this.m_rA)),s=a.add(n,a.cross(r,this.m_rB)),u=a.dot(this.m_u,s)-a.dot(this.m_u,o),c=-this.m_mass*(u+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=c;var h=a.mul(c,this.m_u);e.wSub(this.m_invMassA,h),i-=this.m_invIA*a.cross(this.m_rA,h),n.wAdd(this.m_invMassB,h),r+=this.m_invIB*a.cross(this.m_rB,h),this.m_bodyA.c_velocity.v.set(e),this.m_bodyA.c_velocity.w=i,this.m_bodyB.c_velocity.v.set(n),this.m_bodyB.c_velocity.w=r},l.prototype.solvePositionConstraints=function(t){if(this.m_frequencyHz>0)return!0;var e=this.m_bodyA.c_position.c,i=this.m_bodyA.c_position.a,n=this.m_bodyB.c_position.c,r=this.m_bodyB.c_position.a,c=u.neo(i),h=u.neo(r),l=u.mulSub(c,this.m_localAnchorA,this.m_localCenterA),f=u.mulSub(h,this.m_localAnchorB,this.m_localCenterB),m=a.sub(a.add(n,f),a.add(e,l)),_=m.normalize()-this.m_length;_=s.clamp(_,-o.maxLinearCorrection,o.maxLinearCorrection);var p=-this.m_mass*_,d=a.mul(p,m);return e.wSub(this.m_invMassA,d),i-=this.m_invIA*a.cross(l,d),n.wAdd(this.m_invMassB,d),r+=this.m_invIB*a.cross(f,d),this.m_bodyA.c_position.c.set(e),this.m_bodyA.c_position.a=i,this.m_bodyB.c_position.c.set(n),this.m_bodyB.c_position.a=r,s.abs(_)<o.linearSlop}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT,r=i(4),o=(i(15),i(2)),s=i(10),a=i(1),u=i(8),c=i(9),h=(i(33),i(48)),l=i(53),f=i(76),m=i(95),_=i(72);h.addType(f.TYPE,_.TYPE,function(t,e,i,o,s,a,u){n&&r.assert(i.getType()==f.TYPE),n&&r.assert(a.getType()==_.TYPE),A(t,i.getShape(),e,a.getShape(),s)}),h.addType(m.TYPE,_.TYPE,function(t,e,i,o,s,a,u){n&&r.assert(i.getType()==m.TYPE),n&&r.assert(a.getType()==_.TYPE);var c=i.getShape(),h=new f;c.getChildEdge(h,o),A(t,h,e,a.getShape(),s)});var p=-1,d=1,y=2;function v(){this.type,this.index,this.separation}var g=new v,b=new v,x=new function(){this.vertices=[],this.normals=[],this.count=0},w=new function(){this.i1,this.i2,this.v1,this.v2,this.normal=a.zero(),this.sideNormal1=a.zero(),this.sideOffset1,this.sideNormal2=a.zero(),this.sideOffset2};function A(t,e,i,n,r){var h=s.mulT(i,r),f=s.mul(h,n.m_centroid),m=e.m_vertex0,_=e.m_vertex1,v=e.m_vertex2,A=e.m_vertex3,S=e.m_hasVertex0,B=e.m_hasVertex3,I=a.sub(v,_);I.normalize();var O,P=a.neo(I.y,-I.x),M=a.dot(P,a.sub(f,_)),E=0,C=0,k=!1,T=!1;if(S){var j=a.sub(_,m);j.normalize();var z=a.neo(j.y,-j.x);k=a.cross(j,I)>=0,E=a.dot(z,f)-a.dot(z,m)}if(B){var D=a.sub(A,v);D.normalize();var L=a.neo(D.y,-D.x);T=a.cross(I,D)>0,C=a.dot(L,f)-a.dot(L,v)}var R=a.zero(),F=a.zero(),q=a.zero();S&&B?k&&T?(O=E>=0||M>=0||C>=0)?(R.set(P),F.set(z),q.set(L)):(R.wSet(-1,P),F.wSet(-1,P),q.wSet(-1,P)):k?(O=E>=0||M>=0&&C>=0)?(R.set(P),F.set(z),q.set(P)):(R.wSet(-1,P),F.wSet(-1,L),q.wSet(-1,P)):T?(O=C>=0||E>=0&&M>=0)?(R.set(P),F.set(P),q.set(L)):(R.wSet(-1,P),F.wSet(-1,P),q.wSet(-1,z)):(O=E>=0&&M>=0&&C>=0)?(R.set(P),F.set(P),q.set(P)):(R.wSet(-1,P),F.wSet(-1,L),q.wSet(-1,z)):S?k?(O=E>=0||M>=0)?(R.set(P),F.set(z),q.wSet(-1,P)):(R.wSet(-1,P),F.set(P),q.wSet(-1,P)):(O=E>=0&&M>=0)?(R.set(P),F.set(P),q.wSet(-1,P)):(R.wSet(-1,P),F.set(P),q.wSet(-1,z)):B?T?(O=M>=0||C>=0)?(R.set(P),F.wSet(-1,P),q.set(L)):(R.wSet(-1,P),F.wSet(-1,P),q.set(P)):(O=M>=0&&C>=0)?(R.set(P),F.wSet(-1,P),q.set(P)):(R.wSet(-1,P),F.wSet(-1,L),q.set(P)):(O=M>=0)?(R.set(P),F.wSet(-1,P),q.wSet(-1,P)):(R.wSet(-1,P),F.set(P),q.set(P)),x.count=n.m_count;for(var V=0;V<n.m_count;++V)x.vertices[V]=s.mul(h,n.m_vertices[V]),x.normals[V]=u.mul(h.q,n.m_normals[V]);var N=2*c.polygonRadius;t.pointCount=0,g.type=d,g.index=O?0:1,g.separation=1/0;for(V=0;V<x.count;++V){(G=a.dot(R,a.sub(x.vertices[V],_)))<g.separation&&(g.separation=G)}if(g.type!=p&&!(g.separation>N)){b.type=p,b.index=-1,b.separation=-1/0;var U=a.neo(-R.y,R.x);for(V=0;V<x.count;++V){var G,J=a.neg(x.normals[V]),W=a.dot(J,a.sub(x.vertices[V],_)),Y=a.dot(J,a.sub(x.vertices[V],v));if((G=o.min(W,Y))>N){b.type=y,b.index=V,b.separation=G;break}if(a.dot(J,U)>=0){if(a.dot(a.sub(J,q),R)<-c.angularSlop)continue}else if(a.dot(a.sub(J,F),R)<-c.angularSlop)continue;G>b.separation&&(b.type=y,b.index=V,b.separation=G)}if(!(b.type!=p&&b.separation>N)){var H;H=b.type==p?g:b.separation>.98*g.separation+.001?b:g;var K=[new l.clipVertex,new l.clipVertex];if(H.type==d){t.type=l.e_faceA;var Z=0,X=a.dot(R,x.normals[0]);for(V=1;V<x.count;++V){var $=a.dot(R,x.normals[V]);$<X&&(X=$,Z=V)}var Q=Z,tt=Q+1<x.count?Q+1:0;K[0].v=x.vertices[Q],K[0].id.cf.indexA=0,K[0].id.cf.indexB=Q,K[0].id.cf.typeA=l.e_face,K[0].id.cf.typeB=l.e_vertex,K[1].v=x.vertices[tt],K[1].id.cf.indexA=0,K[1].id.cf.indexB=tt,K[1].id.cf.typeA=l.e_face,K[1].id.cf.typeB=l.e_vertex,O?(w.i1=0,w.i2=1,w.v1=_,w.v2=v,w.normal.set(P)):(w.i1=1,w.i2=0,w.v1=v,w.v2=_,w.normal.wSet(-1,P))}else t.type=l.e_faceB,K[0].v=_,K[0].id.cf.indexA=0,K[0].id.cf.indexB=H.index,K[0].id.cf.typeA=l.e_vertex,K[0].id.cf.typeB=l.e_face,K[1].v=v,K[1].id.cf.indexA=0,K[1].id.cf.indexB=H.index,K[1].id.cf.typeA=l.e_vertex,K[1].id.cf.typeB=l.e_face,w.i1=H.index,w.i2=w.i1+1<x.count?w.i1+1:0,w.v1=x.vertices[w.i1],w.v2=x.vertices[w.i2],w.normal.set(x.normals[w.i1]);w.sideNormal1.set(w.normal.y,-w.normal.x),w.sideNormal2.wSet(-1,w.sideNormal1),w.sideOffset1=a.dot(w.sideNormal1,w.v1),w.sideOffset2=a.dot(w.sideNormal2,w.v2);var et=[new l.clipVertex,new l.clipVertex],it=[new l.clipVertex,new l.clipVertex];if(!(l.clipSegmentToLine(et,K,w.sideNormal1,w.sideOffset1,w.i1)<c.maxManifoldPoints||l.clipSegmentToLine(it,et,w.sideNormal2,w.sideOffset2,w.i2)<c.maxManifoldPoints)){H.type==d?(t.localNormal=a.clone(w.normal),t.localPoint=a.clone(w.v1)):(t.localNormal=a.clone(n.m_normals[w.i1]),t.localPoint=a.clone(n.m_vertices[w.i1]));var nt=0;for(V=0;V<c.maxManifoldPoints;++V){if(a.dot(w.normal,a.sub(it[V].v,w.v1))<=N){var rt=t.points[nt];H.type==d?(rt.localPoint=s.mulT(h,it[V].v),rt.id=it[V].id):(rt.localPoint=it[V].v,rt.id.cf.typeA=it[V].id.cf.typeB,rt.id.cf.typeB=it[V].id.cf.typeA,rt.id.cf.indexA=it[V].id.cf.indexB,rt.id.cf.indexB=it[V].id.cf.indexA),++nt}}t.pointCount=nt}}}}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT,r=i(4),o=i(2),s=i(10),a=(i(8),i(1)),u=(i(38),i(9),i(53)),c=i(48),h=(i(33),i(77)),l=i(72);c.addType(l.TYPE,h.TYPE,function(t,e,i,c,f,m,_){n&&r.assert(i.getType()==l.TYPE),n&&r.assert(m.getType()==h.TYPE),function(t,e,i,n,r){t.pointCount=0;for(var c=s.mul(r,n.m_p),h=s.mulT(i,c),l=0,f=-1/0,m=e.m_radius+n.m_radius,_=e.m_count,p=e.m_vertices,d=e.m_normals,y=0;y<_;++y){var v=a.dot(d[y],a.sub(h,p[y]));if(v>m)return;v>f&&(f=v,l=y)}var g=l,b=g+1<_?g+1:0,x=p[g],w=p[b];if(f<o.EPSILON)return t.pointCount=1,t.type=u.e_faceA,t.localNormal.set(d[l]),t.localPoint.wSet(.5,x,.5,w),t.points[0].localPoint=n.m_p,void(t.points[0].id.key=0);var A=a.dot(a.sub(h,x),a.sub(w,x)),S=a.dot(a.sub(h,w),a.sub(x,w));if(A<=0){if(a.distanceSquared(h,x)>m*m)return;t.pointCount=1,t.type=u.e_faceA,t.localNormal.wSet(1,h,-1,x),t.localNormal.normalize(),t.localPoint=x,t.points[0].localPoint.set(n.m_p),t.points[0].id.key=0}else if(S<=0){if(a.distanceSquared(h,w)>m*m)return;t.pointCount=1,t.type=u.e_faceA,t.localNormal.wSet(1,h,-1,w),t.localNormal.normalize(),t.localPoint.set(w),t.points[0].localPoint.set(n.m_p),t.points[0].id.key=0}else{var B=a.mid(x,w),f=a.dot(h,d[g])-a.dot(B,d[g]);if(f>m)return;t.pointCount=1,t.type=u.e_faceA,t.localNormal.set(d[g]),t.localPoint.set(B),t.points[0].localPoint.set(n.m_p),t.points[0].id.key=0}}(t,i.getShape(),e,m.getShape(),f)})},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT,r=i(4),o=(i(2),i(10)),s=i(8),a=i(1),u=(i(38),i(9)),c=i(53),h=i(48),l=(i(33),i(72));function f(t,e,i,n){for(var r=t.m_count,u=i.m_count,c=t.m_normals,h=t.m_vertices,l=i.m_vertices,m=o.mulT(n,e),_=0,p=-1/0,d=0;d<r;++d){for(var y=s.mul(m.q,c[d]),v=o.mul(m,h[d]),g=1/0,b=0;b<u;++b){var x=a.dot(y,l[b])-a.dot(y,v);x<g&&(g=x)}g>p&&(p=g,_=d)}f._maxSeparation=p,f._bestIndex=_}function m(t,e,i,h,l){t.pointCount=0;var m=e.m_radius+h.m_radius;f(e,i,h,l);var _=f._bestIndex,p=f._maxSeparation;if(!(p>m)){f(h,l,e,i);var d=f._bestIndex,y=f._maxSeparation;if(!(y>m)){var v,g,b,x,w,A;y>p+.1*u.linearSlop?(v=h,g=e,b=l,x=i,w=d,t.type=c.e_faceB,A=1):(v=e,g=h,b=i,x=l,w=_,t.type=c.e_faceA,A=0);var S=[new c.clipVertex,new c.clipVertex];!function(t,e,i,u,h,l){var f=e.m_normals,m=h.m_count,_=h.m_vertices,p=h.m_normals;n&&r.assert(0<=u&&u<e.m_count);for(var d=s.mulT(l.q,s.mul(i.q,f[u])),y=0,v=1/0,g=0;g<m;++g){var b=a.dot(d,p[g]);b<v&&(v=b,y=g)}var x=y,w=x+1<m?x+1:0;t[0].v=o.mul(l,_[x]),t[0].id.cf.indexA=u,t[0].id.cf.indexB=x,t[0].id.cf.typeA=c.e_face,t[0].id.cf.typeB=c.e_vertex,t[1].v=o.mul(l,_[w]),t[1].id.cf.indexA=u,t[1].id.cf.indexB=w,t[1].id.cf.typeA=c.e_face,t[1].id.cf.typeB=c.e_vertex}(S,v,b,w,g,x);var B=v.m_count,I=v.m_vertices,O=w,P=w+1<B?w+1:0,M=I[O],E=I[P],C=a.sub(E,M);C.normalize();var k=a.cross(C,1),T=a.wAdd(.5,M,.5,E),j=s.mul(b.q,C),z=a.cross(j,1);M=o.mul(b,M),E=o.mul(b,E);var D=a.dot(z,M),L=-a.dot(j,M)+m,R=a.dot(j,E)+m,F=[new c.clipVertex,new c.clipVertex],q=[new c.clipVertex,new c.clipVertex];if(!(c.clipSegmentToLine(F,S,a.neg(j),L,O)<2||c.clipSegmentToLine(q,F,j,R,P)<2)){t.localNormal=k,t.localPoint=T;for(var V=0,N=0;N<q.length;++N){if(a.dot(z,q[N].v)-D<=m){var U=t.points[V];if(U.localPoint.set(o.mulT(x,q[N].v)),U.id=q[N].id,A){var G=U.id.cf,J=G.indexA,W=G.indexB,Y=G.typeA,H=G.typeB;G.indexA=W,G.indexB=J,G.typeA=H,G.typeB=Y}++V}}t.pointCount=V}}}}t.exports=m,h.addType(l.TYPE,l.TYPE,function(t,e,i,o,s,a,u){n&&r.assert(i.getType()==l.TYPE),n&&r.assert(a.getType()==l.TYPE),m(t,i.getShape(),e,a.getShape(),s)})},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT,r=i(4),o=(i(15),i(2),i(10)),s=i(1),a=(i(8),i(9),i(33),i(48)),u=i(53),c=i(76),h=i(95),l=i(77);function f(t,e,i,a,c){t.pointCount=0;var h=o.mulT(i,o.mul(c,a.m_p)),l=e.m_vertex1,f=e.m_vertex2,m=s.sub(f,l),_=s.dot(m,s.sub(f,h)),p=s.dot(m,s.sub(h,l)),d=e.m_radius+a.m_radius;if(p<=0){var y=s.clone(l),v=s.sub(h,y);if(s.dot(v,v)>d*d)return;if(e.m_hasVertex0){var g=e.m_vertex0,b=l,x=s.sub(b,g);if(s.dot(x,s.sub(b,h))>0)return}return t.type=u.e_circles,t.localNormal.setZero(),t.localPoint.set(y),t.pointCount=1,t.points[0].localPoint.set(a.m_p),t.points[0].id.key=0,t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=u.e_vertex,t.points[0].id.cf.indexB=0,void(t.points[0].id.cf.typeB=u.e_vertex)}if(_<=0){y=s.clone(f),v=s.sub(h,y);if(s.dot(v,v)>d*d)return;if(e.m_hasVertex3){var w=e.m_vertex3,A=f,S=s.sub(w,A);if(s.dot(S,s.sub(h,A))>0)return}return t.type=u.e_circles,t.localNormal.setZero(),t.localPoint.set(y),t.pointCount=1,t.points[0].localPoint.set(a.m_p),t.points[0].id.key=0,t.points[0].id.cf.indexA=1,t.points[0].id.cf.typeA=u.e_vertex,t.points[0].id.cf.indexB=0,void(t.points[0].id.cf.typeB=u.e_vertex)}var B=s.dot(m,m);n&&r.assert(B>0);y=s.wAdd(_/B,l,p/B,f),v=s.sub(h,y);if(!(s.dot(v,v)>d*d)){var I=s.neo(-m.y,m.x);s.dot(I,s.sub(h,l))<0&&I.set(-I.x,-I.y),I.normalize(),t.type=u.e_faceA,t.localNormal=I,t.localPoint.set(l),t.pointCount=1,t.points[0].localPoint.set(a.m_p),t.points[0].id.key=0,t.points[0].id.cf.indexA=0,t.points[0].id.cf.typeA=u.e_face,t.points[0].id.cf.indexB=0,t.points[0].id.cf.typeB=u.e_vertex}}a.addType(c.TYPE,l.TYPE,function(t,e,i,o,s,a,u){n&&r.assert(i.getType()==c.TYPE),n&&r.assert(a.getType()==l.TYPE);var h=i.getShape(),m=a.getShape();f(t,h,e,m,s)}),a.addType(h.TYPE,l.TYPE,function(t,e,i,o,s,a,u){n&&r.assert(i.getType()==h.TYPE),n&&r.assert(a.getType()==l.TYPE);var m=i.getShape(),_=new c;m.getChildEdge(_,o);var p=_,d=a.getShape();f(t,p,e,d,s)})},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT,r=i(4),o=(i(15),i(2),i(10)),s=i(1),a=(i(9),i(33),i(48)),u=i(53),c=i(77);function h(t,e,i,n,r){t.pointCount=0;var a=o.mul(i,e.m_p),c=o.mul(r,n.m_p),h=s.distanceSquared(c,a),l=e.m_radius+n.m_radius;h>l*l||(t.type=u.e_circles,t.localPoint.set(e.m_p),t.localNormal.setZero(),t.pointCount=1,t.points[0].localPoint.set(n.m_p),t.points[0].id.key=0)}a.addType(c.TYPE,c.TYPE,function(t,e,i,o,s,a,u){n&&r.assert(i.getType()==c.TYPE),n&&r.assert(a.getType()==c.TYPE),h(t,i.getShape(),e,a.getShape(),s)}),e.CollideCircles=h},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=o;i(4);var n=i(15),r=i(72);function o(t,e,i,n){if(!(this instanceof o))return new o(t,e,i,n);o._super.call(this),this._setAsBox(t,e,i,n)}o._super=r,o.prototype=n(o._super.prototype),o.TYPE="polygon"},function(t,e){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports.now=function(){return Date.now()},t.exports.diff=function(t){return Date.now()-t}},function(t,e,i){var n="undefined"!=typeof DEBUG&&DEBUG,r="undefined"!=typeof ASSERT&&ASSERT;t.exports=y,t.exports.TimeStep=d;var o=i(9),s=i(4),a=i(1),u=i(2),c=i(97),h=i(48),l=i(24),f=i(128),m=f.Input,_=f.Output,p=i(78);p.Input,p.Output,p.Proxy,p.Cache;function d(t){this.dt=0,this.inv_dt=0,this.velocityIterations=0,this.positionIterations=0,this.warmStarting=!1,this.blockSolve=!0,this.inv_dt0=0,this.dtRatio=1}function y(t){this.m_world=t,this.m_stack=[],this.m_bodies=[],this.m_contacts=[],this.m_joints=[]}d.prototype.reset=function(t){this.dt>0&&(this.inv_dt0=this.inv_dt),this.dt=t,this.inv_dt=0==t?0:1/t,this.dtRatio=t*this.inv_dt0},y.prototype.clear=function(){this.m_stack.length=0,this.m_bodies.length=0,this.m_contacts.length=0,this.m_joints.length=0},y.prototype.addBody=function(t){r&&s.assert(t instanceof c,"Not a Body!",t),this.m_bodies.push(t)},y.prototype.addContact=function(t){r&&s.assert(t instanceof h,"Not a Contact!",t),this.m_contacts.push(t)},y.prototype.addJoint=function(t){r&&s.assert(t instanceof l,"Not a Joint!",t),this.m_joints.push(t)},y.prototype.solveWorld=function(t){for(var e=this.m_world,i=e.m_bodyList;i;i=i.m_next)i.m_islandFlag=!1;for(var n=e.m_contactList;n;n=n.m_next)n.m_islandFlag=!1;for(var o=e.m_jointList;o;o=o.m_next)o.m_islandFlag=!1;for(var a=this.m_stack,u=e.m_bodyList;u;u=u.m_next)if(0,!u.m_islandFlag&&0!=u.isAwake()&&0!=u.isActive()&&!u.isStatic()){for(this.clear(),a.push(u),u.m_islandFlag=!0;a.length>0;){i=a.pop();if(r&&s.assert(1==i.isActive()),this.addBody(i),i.setAwake(!0),!i.isStatic()){for(var c=i.m_contactList;c;c=c.next){var h=c.contact;if(!h.m_islandFlag&&(0!=h.isEnabled()&&0!=h.isTouching())){var l=h.m_fixtureA.m_isSensor,f=h.m_fixtureB.m_isSensor;if(!l&&!f)this.addContact(h),h.m_islandFlag=!0,(_=c.other).m_islandFlag||(a.push(_),_.m_islandFlag=!0)}}for(var m=i.m_jointList;m;m=m.next){var _;if(1!=m.joint.m_islandFlag)0!=(_=m.other).isActive()&&(this.addJoint(m.joint),m.joint.m_islandFlag=!0,_.m_islandFlag||(a.push(_),_.m_islandFlag=!0))}}}this.solveIsland(t);for(var p=0;p<this.m_bodies.length;++p){(i=this.m_bodies[p]).isStatic()&&(i.m_islandFlag=!1)}}},y.prototype.solveIsland=function(t){for(var e=this.m_world,i=e.m_gravity,r=e.m_allowSleep,s=t.dt,c=0;c<this.m_bodies.length;++c){var h=this.m_bodies[c],l=a.clone(h.m_sweep.c),f=h.m_sweep.a,m=a.clone(h.m_linearVelocity),_=h.m_angularVelocity;h.m_sweep.c0.set(h.m_sweep.c),h.m_sweep.a0=h.m_sweep.a,h.isDynamic()&&(m.wAdd(s*h.m_gravityScale,i),m.wAdd(s*h.m_invMass,h.m_force),_+=s*h.m_invI*h.m_torque,m.mul(1/(1+s*h.m_linearDamping)),_*=1/(1+s*h.m_angularDamping)),h.c_position.c=l,h.c_position.a=f,h.c_velocity.v=m,h.c_velocity.w=_}for(c=0;c<this.m_contacts.length;++c){this.m_contacts[c].initConstraint(t)}n&&this.printBodies("M: ");for(c=0;c<this.m_contacts.length;++c){this.m_contacts[c].initVelocityConstraint(t)}if(n&&this.printBodies("R: "),t.warmStarting)for(c=0;c<this.m_contacts.length;++c){this.m_contacts[c].warmStartConstraint(t)}n&&this.printBodies("Q: ");for(c=0;c<this.m_joints.length;++c){this.m_joints[c].initVelocityConstraints(t)}n&&this.printBodies("E: ");for(c=0;c<t.velocityIterations;++c){for(var p=0;p<this.m_joints.length;++p){this.m_joints[p].solveVelocityConstraints(t)}for(p=0;p<this.m_contacts.length;++p){this.m_contacts[p].solveVelocityConstraint(t)}}n&&this.printBodies("D: ");for(c=0;c<this.m_contacts.length;++c){this.m_contacts[c].storeConstraintImpulses(t)}n&&this.printBodies("C: ");for(c=0;c<this.m_bodies.length;++c){h=this.m_bodies[c],l=a.clone(h.c_position.c),f=h.c_position.a,m=a.clone(h.c_velocity.v),_=h.c_velocity.w;var d=a.mul(s,m);if(a.lengthSquared(d)>o.maxTranslationSquared){var y=o.maxTranslation/d.length();m.mul(y)}var v=s*_;if(v*v>o.maxRotationSquared)_*=y=o.maxRotation/u.abs(v);l.wAdd(s,m),f+=s*_,h.c_position.c.set(l),h.c_position.a=f,h.c_velocity.v.set(m),h.c_velocity.w=_}n&&this.printBodies("B: ");var g=!1;for(c=0;c<t.positionIterations;++c){var b=0;for(p=0;p<this.m_contacts.length;++p){var x=this.m_contacts[p].solvePositionConstraint(t);b=u.min(b,x)}var w=b>=-3*o.linearSlop,A=!0;for(p=0;p<this.m_joints.length;++p){var S=this.m_joints[p].solvePositionConstraints(t);A=A&&S}if(w&&A){g=!0;break}}n&&this.printBodies("L: ");for(c=0;c<this.m_bodies.length;++c){(h=this.m_bodies[c]).m_sweep.c.set(h.c_position.c),h.m_sweep.a=h.c_position.a,h.m_linearVelocity.set(h.c_velocity.v),h.m_angularVelocity=h.c_velocity.w,h.synchronizeTransform()}if(this.postSolveIsland(),r){var B=1/0,I=o.linearSleepToleranceSqr,O=o.angularSleepToleranceSqr;for(c=0;c<this.m_bodies.length;++c){(h=this.m_bodies[c]).isStatic()||(0==h.m_autoSleepFlag||h.m_angularVelocity*h.m_angularVelocity>O||a.lengthSquared(h.m_linearVelocity)>I?(h.m_sleepTime=0,B=0):(h.m_sleepTime+=s,B=u.min(B,h.m_sleepTime)))}if(B>=o.timeToSleep&&g)for(c=0;c<this.m_bodies.length;++c){(h=this.m_bodies[c]).setAwake(!1)}}},y.prototype.printBodies=function(t){for(var e=0;e<this.m_bodies.length;++e){var i=this.m_bodies[e];s.debug(t,i.c_position.a,i.c_position.c.x,i.c_position.c.y,i.c_velocity.w,i.c_velocity.v.x,i.c_velocity.v.y)}};var v=new d;y.prototype.solveWorldTOI=function(t){var e=this.m_world;if(e.m_stepComplete){for(var i=e.m_bodyList;i;i=i.m_next)i.m_islandFlag=!1,i.m_sweep.alpha0=0;for(var a=e.m_contactList;a;a=a.m_next)a.m_toiFlag=!1,a.m_islandFlag=!1,a.m_toiCount=0,a.m_toi=1}for(;;){var c=null,h=1;for(a=e.m_contactList;a;a=a.m_next)if(0!=a.isEnabled()&&!(a.m_toiCount>o.maxSubSteps)){var l=1;if(a.m_toiFlag)l=a.m_toi;else{var p=a.getFixtureA(),d=a.getFixtureB();if(p.isSensor()||d.isSensor())continue;var y=p.getBody(),g=d.getBody();r&&s.assert(y.isDynamic()||g.isDynamic());var b=y.isAwake()&&!y.isStatic(),x=g.isAwake()&&!g.isStatic();if(0==b&&0==x)continue;var w=y.isBullet()||!y.isDynamic(),A=g.isBullet()||!g.isDynamic();if(0==w&&0==A)continue;var S=y.m_sweep.alpha0;y.m_sweep.alpha0<g.m_sweep.alpha0?(S=g.m_sweep.alpha0,y.m_sweep.advance(S)):g.m_sweep.alpha0<y.m_sweep.alpha0&&(S=y.m_sweep.alpha0,g.m_sweep.advance(S)),r&&s.assert(S<1);var B=a.getChildIndexA(),I=a.getChildIndexB(),O=(y.m_sweep,g.m_sweep,new m);O.proxyA.set(p.getShape(),B),O.proxyB.set(d.getShape(),I),O.sweepA.set(y.m_sweep),O.sweepB.set(g.m_sweep),O.tMax=1;var P=new _;f(P,O);var M=P.t;l=P.state==_.e_touching?u.min(S+(1-S)*M,1):1,a.m_toi=l,a.m_toiFlag=!0}l<h&&(c=a,h=l)}if(null==c||1-10*u.EPSILON<h){e.m_stepComplete=!0;break}p=c.getFixtureA(),d=c.getFixtureB(),y=p.getBody(),g=d.getBody();var E=y.m_sweep.clone(),C=g.m_sweep.clone();if(y.advance(h),g.advance(h),c.update(e),c.m_toiFlag=!1,++c.m_toiCount,0!=c.isEnabled()&&0!=c.isTouching()){y.setAwake(!0),g.setAwake(!0),this.clear(),this.addBody(y),this.addBody(g),this.addContact(c),y.m_islandFlag=!0,g.m_islandFlag=!0,c.m_islandFlag=!0;for(var k=[y,g],T=0;T<k.length;++T){if((q=k[T]).isDynamic())for(var j=q.m_contactList;j;j=j.next){var z=j.contact;if(!z.m_islandFlag){var D=j.other;if(!D.isDynamic()||q.isBullet()||D.isBullet()){var L=z.m_fixtureA.m_isSensor,R=z.m_fixtureB.m_isSensor;if(!L&&!R){var F=D.m_sweep.clone();0==D.m_islandFlag&&D.advance(h),z.update(e),0!=z.isEnabled()&&0!=z.isTouching()?(z.m_islandFlag=!0,this.addContact(z),D.m_islandFlag||(D.m_islandFlag=!0,D.isStatic()||D.setAwake(!0),this.addBody(D))):(D.m_sweep.set(F),D.synchronizeTransform())}}}}}v.reset((1-h)*t.dt),v.dtRatio=1,v.positionIterations=20,v.velocityIterations=t.velocityIterations,v.warmStarting=!1,this.solveIslandTOI(v,y,g);for(T=0;T<this.m_bodies.length;++T){var q;if((q=this.m_bodies[T]).m_islandFlag=!1,q.isDynamic()){q.synchronizeFixtures();for(j=q.m_contactList;j;j=j.next)j.contact.m_toiFlag=!1,j.contact.m_islandFlag=!1}}if(e.findNewContacts(),e.m_subStepping){e.m_stepComplete=!1;break}}else c.setEnabled(!1),y.m_sweep.set(E),g.m_sweep.set(C),y.synchronizeTransform(),g.synchronizeTransform()}if(n)for(i=e.m_bodyList;i;i=i.m_next)a=i.m_sweep.c,i.m_sweep.a,i.m_linearVelocity,i.m_angularVelocity},y.prototype.solveIslandTOI=function(t,e,i){this.m_world;for(var n=0;n<this.m_bodies.length;++n){(l=this.m_bodies[n]).c_position.c.set(l.m_sweep.c),l.c_position.a=l.m_sweep.a,l.c_velocity.v.set(l.m_linearVelocity),l.c_velocity.w=l.m_angularVelocity}for(var n=0;n<this.m_contacts.length;++n){this.m_contacts[n].initConstraint(t)}for(n=0;n<t.positionIterations;++n){for(var r=0,s=0;s<this.m_contacts.length;++s){var c=this.m_contacts[s].solvePositionConstraintTOI(t,e,i);r=u.min(r,c)}if(r>=-1.5*o.linearSlop)break}e.m_sweep.c0.set(e.c_position.c),e.m_sweep.a0=e.c_position.a,i.m_sweep.c0.set(i.c_position.c),i.m_sweep.a0=i.c_position.a;for(n=0;n<this.m_contacts.length;++n){this.m_contacts[n].initVelocityConstraint(t)}for(n=0;n<t.velocityIterations;++n)for(s=0;s<this.m_contacts.length;++s){this.m_contacts[s].solveVelocityConstraint(t)}var h=t.dt;for(n=0;n<this.m_bodies.length;++n){var l=this.m_bodies[n],f=a.clone(l.c_position.c),m=l.c_position.a,_=a.clone(l.c_velocity.v),p=l.c_velocity.w,d=a.mul(h,_);if(a.dot(d,d)>o.maxTranslationSquared){var y=o.maxTranslation/d.length();_.mul(y)}var v=h*p;if(v*v>o.maxRotationSquared)p*=y=o.maxRotation/u.abs(v);f.wAdd(h,_),m+=h*p,l.c_position.c=f,l.c_position.a=m,l.c_velocity.v=_,l.c_velocity.w=p,l.m_sweep.c=f,l.m_sweep.a=m,l.m_linearVelocity=_,l.m_angularVelocity=p,l.synchronizeTransform()}this.postSolveIsland()},y.prototype.postSolveIsland=function(){for(var t=new function(){this.normalImpulses=[],this.tangentImpulses=[]},e=0;e<this.m_contacts.length;++e){for(var i=this.m_contacts[e],n=0;n<i.v_points.length;++n)t.normalImpulses.push(i.v_points[n].normalImpulse),t.tangentImpulses.push(i.v_points[n].tangentImpulse);this.m_world.postSolve(i,t)}}},function(t,e){"undefined"!=typeof DEBUG&&DEBUG,"undefined"!=typeof ASSERT&&ASSERT;t.exports=function(t){var e=[],i=t.max||1/0,n=t.create,r=t.allocate,o=t.release,s=t.discard,a=0,u=0,c=0,h=0;this.max=function(t){return"number"==typeof t?(i=t,this):i},this.size=function(){return e.length},this.allocate=function(){var t;return e.length>0?t=e.shift():(a++,t="function"==typeof n?n():{}),u++,"function"==typeof r&&r(t),t},this.release=function(t){e.length<i?(c++,"function"==typeof o&&o(t),e.push(t)):(h++,"function"==typeof s&&(t=s(t)))},this.toString=function(){return" +"+a+" >"+u+" <"+c+" -"+h+" ="+e.length+"/"+i}}},function(t,e,i){"undefined"!=typeof DEBUG&&DEBUG;var n="undefined"!=typeof ASSERT&&ASSERT,r=(i(9),i(4)),o=i(2),s=i(38),a=i(129);function u(){this.m_tree=new a,this.m_proxyCount=0,this.m_moveBuffer=[],this.queryCallback=this.queryCallback.bind(this)}t.exports=u,u.prototype.getUserData=function(t){return this.m_tree.getUserData(t)},u.prototype.testOverlap=function(t,e){var i=this.m_tree.getFatAABB(t),n=this.m_tree.getFatAABB(e);return s.testOverlap(i,n)},u.prototype.getFatAABB=function(t){return this.m_tree.getFatAABB(t)},u.prototype.getProxyCount=function(){return this.m_proxyCount},u.prototype.getTreeHeight=function(){return this.m_tree.getHeight()},u.prototype.getTreeBalance=function(){return this.m_tree.getMaxBalance()},u.prototype.getTreeQuality=function(){return this.m_tree.getAreaRatio()},u.prototype.query=function(t,e){this.m_tree.query(t,e)},u.prototype.rayCast=function(t,e){this.m_tree.rayCast(t,e)},u.prototype.shiftOrigin=function(t){this.m_tree.shiftOrigin(t)},u.prototype.createProxy=function(t,e){n&&r.assert(s.isValid(t));var i=this.m_tree.createProxy(t,e);return this.m_proxyCount++,this.bufferMove(i),i},u.prototype.destroyProxy=function(t){this.unbufferMove(t),this.m_proxyCount--,this.m_tree.destroyProxy(t)},u.prototype.moveProxy=function(t,e,i){n&&r.assert(s.isValid(e)),this.m_tree.moveProxy(t,e,i)&&this.bufferMove(t)},u.prototype.touchProxy=function(t){this.bufferMove(t)},u.prototype.bufferMove=function(t){this.m_moveBuffer.push(t)},u.prototype.unbufferMove=function(t){for(var e=0;e<this.m_moveBuffer.length;++e)this.m_moveBuffer[e]==t&&(this.m_moveBuffer[e]=null)},u.prototype.updatePairs=function(t){for(n&&r.assert("function"==typeof t),this.m_callback=t;this.m_moveBuffer.length>0;)if(this.m_queryProxyId=this.m_moveBuffer.pop(),null!==this.m_queryProxyId){var e=this.m_tree.getFatAABB(this.m_queryProxyId);this.m_tree.query(e,this.queryCallback)}},u.prototype.queryCallback=function(t){if(t==this.m_queryProxyId)return!0;var e=o.min(t,this.m_queryProxyId),i=o.max(t,this.m_queryProxyId),n=this.m_tree.getUserData(e),r=this.m_tree.getUserData(i);return this.m_callback(n,r),!0}},,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});o(i(54));var n=i(67),r=o(i(55));function o(t){return t&&t.__esModule?t:{default:t}}e.default=(0,r.default)(n.Stack)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});o(i(54));var n=i(67),r=o(i(55));function o(t){return t&&t.__esModule?t:{default:t}}e.default=(0,r.default)(n.OrderedSet)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});o(i(54));var n=i(67),r=o(i(55));function o(t){return t&&t.__esModule?t:{default:t}}e.default=(0,r.default)(n.Set)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});o(i(54));var n=i(67),r=o(i(55));function o(t){return t&&t.__esModule?t:{default:t}}e.default=(0,r.default)(n.OrderedMap)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});o(i(54));var n=i(67),r=o(i(55));function o(t){return t&&t.__esModule?t:{default:t}}e.default=(0,r.default)(n.List)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});o(i(54));var n=i(67),r=o(i(55));function o(t){return t&&t.__esModule?t:{default:t}}e.default=(0,r.default)(n.Map)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e){return t.slice(0,e.length)===e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,i){(0,n.default)("function"==typeof e,a+": `copy` is expected to be a function."),(0,n.default)("function"==typeof i,a+": `empty` is expected to be a function.");var o=t.prototype.constructor,a=o.name,u=Object.create(t.prototype);u.clear=function(){return this.__wrapImmutable({})};var c=[],h=[];for(var l in u.__wrapImmutable=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Object.getPrototypeOf(this);if(r.constructor,!t.size&&!t.__ownerID&&!n){var o=c.indexOf(r);if(o>-1)return h[o];var s=i(Object.create(r));return h[c.length]=s,c.push(r),s}return e(Object.create(r),t)},t.prototype)(0,r.default)(l,"__")||(0,r.default)(l,"to")||-1!==s.indexOf(l)||function(){var e=t.prototype[l];"function"==typeof e&&(u[l]=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=e.apply(this,i);return r&&"object"==typeof r&&Object.getPrototypeOf(r).constructor===o?this.__wrapImmutable(r):r})}();return u.__ensureOwner=function(t){if(t===this.__ownerID)return this;if(!t)return this.__ownerID=void 0,this.__altered=!1,this;var e=this.__wrapImmutable(this,!0);return e.__ownerID=t,e},u};var n=o(i(54)),r=o(i(205));function o(t){return t&&t.__esModule?t:{default:t}}var s=["constructor","get","getIn","first","last","reduce","reduceRight","find","findLast","findEntry","findLastEntry","max","maxBy","min","minBy","clear"]},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.List=e.Map=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(137);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.Map=function(t){function e(t,i){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return a(e,r.Map),n(e,[{key:"get",value:function(t){return function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0}(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"get",this).call(this,t)}}]),e}(),e.List=function(t){function e(){return o(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,r.List),e}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0},o=h(i(98)),s=h(i(79)),a=h(i(49)),u=h(i(132)),c=i(45);function h(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));for(var o in r._canvas=t,r._screenSize=new a.default(i.x,i.y),r._scaleRatio=n,r._screenSizeRatio=i.x/i.y,r._screenOffset=new a.default(0,0),r._lastRender=0,r._timeDelta=0,r._time=(new Date).getTime(),r._cameraPos=new a.default(0,0),r._cameraZoom=1,r._canvasWidthRatio=0,r._canvasHeightRatio=0,r.resize(),window.onresize=r.resize.bind(r),r._mousePos=new a.default(0,0),t.addEventListener("mousemove",r.handleMouseMove.bind(r)),t.addEventListener("mousedown",r.handleMouseDown.bind(r)),t.addEventListener("mouseup",r.handleMouseUp.bind(r)),r._world=u.default.World(u.default.Vec2(0,-9.8)),r._world.on("remove-fixture",function(t){console.log(t)}),r._state={},r._dragging=!1,r._hoveredObject=null,r._clickedObject=null,r._cameras=[],r._cameraRenderIndex=0,r.shutdown=!1,e.classes&&Object.keys(e.classes).forEach(function(t){r[t]=e.classes[t]}),t)0===o.search("on")&&t.addEventListener(o.slice(2),function(t){});return r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),n(e,[{key:"worldCoordToScreen",value:function(t){return new a.default(t.x/this._scaleRatio,t.y/this._scaleRatio)}},{key:"screenCoordToWorld",value:function(t){return new a.default(t.x*this._scaleRatio,t.y*this._scaleRatio)}},{key:"canvasToScreenPoint",value:function(t){return new a.default(t.x/this._canvasWidthRatio-this._screenOffset.x,t.y/this._canvasHeightRatio-this._screenOffset.y)}},{key:"addCamera",value:function(t){var e=e.getComponent("camera");if(e)return this._cameras.push(e),this._cameras.length-1}},{key:"handleMouseMove",value:function(t){if(this._mousePos=this.canvasToScreenPoint(new a.default(t.offsetX,this._canvas.clientHeight-t.offsetY)),null!==this._clickedObject){if(!this._dragging)return this._clickedObject.onDragStart&&this._clickedObject.onDragStart(this),void(this._dragging=!0);this._clickedObject.onDrag&&this._clickedObject.onDrag(this)}}},{key:"handleMouseDown",value:function(t){if(null!==this._hoveredObject){this._clickedObject=this._hoveredObject;var e=this._clickedObject.getComponent("physicsbody");null!==e&&(e.forcePos=!0),this._hoveredObject.onMouseDown&&this._hoveredObject.onMouseDown(this)}}},{key:"handleMouseUp",value:function(t){if(null!==this._clickedObject){var e=this._clickedObject.getComponent("physicsbody");null!==e&&(e.forcePos=!1),this._dragging?null!=this._clickedObject&&(this._clickedObject.onDragEnd&&this._clickedObject.onDragEnd(this),this._dragging=!1):this._clickedObject===this._hoveredObject&&this._clickedObject.onClick&&this._clickedObject.onClick(this)}this._clickedObject=null,null!==this._hoveredObject&&this._hoveredObject.onMouseUp&&this._hoveredObject.onMouseUp(this)}},{key:"process",value:function(t){var i=this;if(this._time=(new Date).getTime(),this._timeDelta=t-this._lastRender,!this._timeDelta)return this._lastRender=0,void this.requestFrame();if(0==this._lastRender)return this._lastRender=t,void this.requestFrame();this.cursor="default";var n=null;this._children.forEach(function(t){if(null===n){var e=t.getComponent("collider"),r=i.screenCoordToWorld(i.mousePos);null!=e&&null!=e.shape&&e.shape.contains(t.pos,t.rotation,r)?(t.onMouseOver&&i._hoveredObject,n=t):t===i._hoveredObject&&t.onMouseOut&&t.onMouseOut(i)}}),this._hoveredObject=n,this._hoveredObject&&(this._hoveredObject.onClick||this._hoveredObject.onMouseDown||this._hoveredObject.onDragStart||this._hoveredObject.onDrag||this._hoveredObject.onDragEnd)&&(this.cursor="pointer"),this._world.step(1/60);var o=this._canvas.getContext("2d");o.fillStyle="black",o.fillRect(this._screenOffset.x,this._screenOffset.y,this.screenSize.x,this.screenSize.y),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"preprocess",this).call(this,this),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"process",this).call(this,this),r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"postprocess",this).call(this,this),this.draw(o),this._lastRender=t,this.requestFrame()}},{key:"requestFrame",value:function(){this.shutdown||window.requestAnimationFrame(this.process.bind(this))}},{key:"draw",value:function(t){var e=this;this._cameras.forEach(function(i){i.predraw(e,t),i.draw(e,t),i.postdraw(e,t)})}},{key:"resize",value:function(){var t=this._canvas,e=this._screenSize.x,i=this._screenSize.y;t.style.width="100%",t.style.height="100%";var n=t.clientWidth,r=t.clientHeight,o=n/r,s=!1;o>this._screenSizeRatio&&(s=!0);var u=s?i*o:e,c=s?i:e/o;t.width=u,t.height=c,this._screenOffset=new a.default(s?(u-e)/2:0,s?0:(c-i)/2);var h=this.screenCoordToWorld(this.screenSize);h=h.setY(-h.y),this._cameraPos=this.screenCoordToWorld(this._screenOffset).add(h.scale(.5)),this._canvasWidthRatio=n/u,this._canvasHeightRatio=r/c}},{key:"toJSON",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,c.deepSerialize)(this,["_hoveredObject","_clickedObject","_dragging","_lastRender","_timeDelta","_time","_mousePos","_canvasWidthRatio","_canvasHeightRatio","_screenOffset","_state"].concat(Object.keys(e.classes)),t,i,n,r)}},{key:"state",get:function(){return this._state}},{key:"game",get:function(){return this}},{key:"world",get:function(){return this._world}},{key:"time",get:function(){return this._time}},{key:"timeDelta",get:function(){return this._timeDelta}},{key:"scaleRatio",get:function(){return this._scaleRatio}},{key:"screenSize",get:function(){return this._screenSize}},{key:"mousePos",get:function(){return this._mousePos}},{key:"drawPos",get:function(){return this._cameraPos}},{key:"cursor",set:function(t){this._canvas.style.cursor=t}},{key:"hoveredObject",get:function(){return this._hoveredObject}},{key:"cameras",get:function(){return this._cameras.slice(0)}}],[{key:"fromJSON",value:function(t,i){var n="string"==typeof i?JSON.parse(i):i,r=new e(t,n.screenSize,n.pixeltoUnitRatio);if((0,c.setProperties)(r,n,["children"]),n.children)for(var o=0;o<n.children.length;o++)r.addGameObject(s.default.fromJSON(n.children[o]));return r.resize(),r}}]),e}();e.default=l},function(t,e){t.exports=function(t,e){var i=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,i)}}},function(t,e,i){var n=i(0),r=i(209)(/[\\^$*+?.()|[\]{}]/g,"\\$&");n(n.S,"RegExp",{escape:function(t){return r(t)}})},function(t,e,i){i(210),t.exports=i(37).RegExp.escape},function(t,e,i){(function(e){!function(e){"use strict";var i,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag",c="object"==typeof t,h=e.regeneratorRuntime;if(h)c&&(t.exports=h);else{(h=e.regeneratorRuntime=c?t.exports:{}).wrap=b;var l="suspendedStart",f="suspendedYield",m="executing",_="completed",p={},d={};d[s]=function(){return this};var y=Object.getPrototypeOf,v=y&&y(y(C([])));v&&v!==n&&r.call(v,s)&&(d=v);var g=S.prototype=w.prototype=Object.create(d);A.prototype=g.constructor=S,S.constructor=A,S[u]=A.displayName="GeneratorFunction",h.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===A||"GeneratorFunction"===(e.displayName||e.name))},h.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,S):(t.__proto__=S,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(g),t},h.awrap=function(t){return{__await:t}},B(I.prototype),I.prototype[a]=function(){return this},h.AsyncIterator=I,h.async=function(t,e,i,n){var r=new I(b(t,e,i,n));return h.isGeneratorFunction(e)?r:r.next().then(function(t){return t.done?t.value:r.next()})},B(g),g[u]="Generator",g[s]=function(){return this},g.toString=function(){return"[object Generator]"},h.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},h.values=C,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(M),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=i)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=i),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var u=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),M(i),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var r=n.arg;M(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=i),p}}}function b(t,e,i,n){var r=e&&e.prototype instanceof w?e:w,o=Object.create(r.prototype),s=new E(n||[]);return o._invoke=function(t,e,i){var n=l;return function(r,o){if(n===m)throw new Error("Generator is already running");if(n===_){if("throw"===r)throw o;return k()}for(i.method=r,i.arg=o;;){var s=i.delegate;if(s){var a=O(s,i);if(a){if(a===p)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===l)throw n=_,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=m;var u=x(t,e,i);if("normal"===u.type){if(n=i.done?_:f,u.arg===p)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=_,i.method="throw",i.arg=u.arg)}}}(t,i,s),o}function x(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}function w(){}function A(){}function S(){}function B(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function I(t){function i(e,n,o,s){var a=x(t[e],t,n);if("throw"!==a.type){var u=a.arg,c=u.value;return c&&"object"==typeof c&&r.call(c,"__await")?Promise.resolve(c.__await).then(function(t){i("next",t,o,s)},function(t){i("throw",t,o,s)}):Promise.resolve(c).then(function(t){u.value=t,o(u)},s)}s(a.arg)}var n;"object"==typeof e.process&&e.process.domain&&(i=e.process.domain.bind(i)),this._invoke=function(t,e){function r(){return new Promise(function(n,r){i(t,e,n,r)})}return n=n?n.then(r,r):r()}}function O(t,e){var n=t.iterator[e.method];if(n===i){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=i,O(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=x(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,p;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=i),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function C(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=i,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:i,done:!0}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,i(173))},function(t,e,i){for(var n=i(103),r=i(64),o=i(27),s=i(5),a=i(28),u=i(69),c=i(11),h=c("iterator"),l=c("toStringTag"),f=u.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},_=r(m),p=0;p<_.length;p++){var d,y=_[p],v=m[y],g=s[y],b=g&&g.prototype;if(b&&(b[h]||a(b,h,f),b[l]||a(b,l,y),u[y]=f,v))for(d in n)b[d]||o(b,d,n[d],!0)}},function(t,e,i){var n=i(0),r=i(102);n(n.G+n.B,{setImmediate:r.set,clearImmediate:r.clear})},function(t,e,i){var n=i(5),r=i(0),o=i(85),s=[].slice,a=/MSIE .\./.test(o),u=function(t){return function(e,i){var n=arguments.length>2,r=!!n&&s.call(arguments,2);return t(n?function(){("function"==typeof e?e:Function(e)).apply(this,r)}:e,i)}};r(r.G+r.B+r.F*a,{setTimeout:u(n.setTimeout),setInterval:u(n.setInterval)})},function(t,e,i){"use strict";var n=i(0),r=i(5),o=i(37),s=i(101)(),a=i(11)("observable"),u=i(19),c=i(3),h=i(59),l=i(57),f=i(28),m=i(58),_=m.RETURN,p=function(t){return null==t?void 0:u(t)},d=function(t){var e=t._c;e&&(t._c=void 0,e())},y=function(t){return void 0===t._o},v=function(t){y(t)||(t._o=void 0,d(t))},g=function(t,e){c(t),this._c=void 0,this._o=t,t=new b(this);try{var i=e(t),n=i;null!=i&&("function"==typeof i.unsubscribe?i=function(){n.unsubscribe()}:u(i),this._c=i)}catch(e){return void t.error(e)}y(this)&&d(this)};g.prototype=l({},{unsubscribe:function(){v(this)}});var b=function(t){this._s=t};b.prototype=l({},{next:function(t){var e=this._s;if(!y(e)){var i=e._o;try{var n=p(i.next);if(n)return n.call(i,t)}catch(t){try{v(e)}finally{throw t}}}},error:function(t){var e=this._s;if(y(e))throw t;var i=e._o;e._o=void 0;try{var n=p(i.error);if(!n)throw t;t=n.call(i,t)}catch(t){try{d(e)}finally{throw t}}return d(e),t},complete:function(t){var e=this._s;if(!y(e)){var i=e._o;e._o=void 0;try{var n=p(i.complete);t=n?n.call(i,t):void 0}catch(t){try{d(e)}finally{throw t}}return d(e),t}}});var x=function(t){h(this,x,"Observable","_f")._f=u(t)};l(x.prototype,{subscribe:function(t){return new g(t,this._f)},forEach:function(t){var e=this;return new(o.Promise||r.Promise)(function(i,n){u(t);var r=e.subscribe({next:function(e){try{return t(e)}catch(t){n(t),r.unsubscribe()}},error:n,complete:i})})}}),l(x,{from:function(t){var e="function"==typeof this?this:x,i=p(c(t)[a]);if(i){var n=c(i.call(t));return n.constructor===e?n:new e(function(t){return n.subscribe(t)})}return new e(function(e){var i=!1;return s(function(){if(!i){try{if(m(t,!1,function(t){if(e.next(t),i)return _})===_)return}catch(t){if(i)throw t;return void e.error(t)}e.complete()}}),function(){i=!0}})},of:function(){for(var t=0,e=arguments.length,i=new Array(e);t<e;)i[t]=arguments[t++];return new("function"==typeof this?this:x)(function(t){var e=!1;return s(function(){if(!e){for(var n=0;n<i.length;++n)if(t.next(i[n]),e)return;t.complete()}}),function(){e=!0}})}}),f(x.prototype,a,function(){return this}),n(n.G,{Observable:x}),i(60)("Observable")},function(t,e,i){var n=i(0),r=i(101)(),o=i(5).process,s="process"==i(35)(o);n(n.G,{asap:function(t){var e=s&&o.domain;r(e?e.bind(t):t)}})},function(t,e,i){var n=i(46),r=i(3),o=i(19),s=n.key,a=n.set;n.exp({metadata:function(t,e){return function(i,n){a(t,e,(void 0!==n?r:o)(i),s(n))}}})},function(t,e,i){var n=i(46),r=i(3),o=n.has,s=n.key;n.exp({hasOwnMetadata:function(t,e){return o(t,r(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,i){var n=i(46),r=i(3),o=i(29),s=n.has,a=n.key,u=function(t,e,i){if(s(t,e,i))return!0;var n=o(e);return null!==n&&u(t,n,i)};n.exp({hasMetadata:function(t,e){return u(t,r(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,i){var n=i(46),r=i(3),o=n.keys,s=n.key;n.exp({getOwnMetadataKeys:function(t){return o(r(t),arguments.length<2?void 0:s(arguments[1]))}})},function(t,e,i){var n=i(46),r=i(3),o=n.get,s=n.key;n.exp({getOwnMetadata:function(t,e){return o(t,r(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,i){var n=i(149),r=i(140),o=i(46),s=i(3),a=i(29),u=o.keys,c=o.key,h=function(t,e){var i=u(t,e),o=a(t);if(null===o)return i;var s=h(o,e);return s.length?i.length?r(new n(i.concat(s))):s:i};o.exp({getMetadataKeys:function(t){return h(s(t),arguments.length<2?void 0:c(arguments[1]))}})},function(t,e,i){var n=i(46),r=i(3),o=i(29),s=n.has,a=n.get,u=n.key,c=function(t,e,i){if(s(t,e,i))return a(t,e,i);var n=o(e);return null!==n?c(t,n,i):void 0};n.exp({getMetadata:function(t,e){return c(t,r(e),arguments.length<3?void 0:u(arguments[2]))}})},function(t,e,i){var n=i(46),r=i(3),o=n.key,s=n.map,a=n.store;n.exp({deleteMetadata:function(t,e){var i=arguments.length<3?void 0:o(arguments[2]),n=s(r(e),i,!1);if(void 0===n||!n.delete(t))return!1;if(n.size)return!0;var u=a.get(e);return u.delete(i),!!u.size||a.delete(e)}})},function(t,e,i){var n=i(46),r=i(3),o=n.key,s=n.set;n.exp({defineMetadata:function(t,e,i,n){s(t,e,r(i),o(n))}})},function(t,e,i){"use strict";var n=i(0),r=i(100),o=i(153);n(n.S,"Promise",{try:function(t){var e=r.f(this),i=o(t);return(i.e?e.reject:e.resolve)(i.v),e.promise}})},function(t,e,i){"use strict";var n=i(0),r=i(37),o=i(5),s=i(86),a=i(152);n(n.P+n.R,"Promise",{finally:function(t){var e=s(this,r.Promise||o.Promise),i="function"==typeof t;return this.then(i?function(i){return a(e,t()).then(function(){return i})}:t,i?function(i){return a(e,t()).then(function(){throw i})}:t)}})},function(t,e,i){var n=i(0);n(n.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:t>0}})},function(t,e,i){var n=i(0);n(n.S,"Math",{umulh:function(t,e){var i=+t,n=+e,r=65535&i,o=65535&n,s=i>>>16,a=n>>>16,u=(s*o>>>0)+(r*o>>>16);return s*a+(u>>>16)+((r*a>>>0)+(65535&u)>>>16)}})},function(t,e,i){var n=i(0);n(n.S,"Math",{scale:i(139)})},function(t,e,i){var n=i(0),r=Math.PI/180;n(n.S,"Math",{radians:function(t){return t*r}})},function(t,e,i){var n=i(0);n(n.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(t,e,i){var n=i(0);n(n.S,"Math",{imulh:function(t,e){var i=+t,n=+e,r=65535&i,o=65535&n,s=i>>16,a=n>>16,u=(s*o>>>0)+(r*o>>>16);return s*a+(u>>16)+((r*a>>>0)+(65535&u)>>16)}})},function(t,e,i){var n=i(0);n(n.S,"Math",{isubh:function(t,e,i,n){var r=t>>>0,o=i>>>0;return(e>>>0)-(n>>>0)-((~r&o|~(r^o)&r-o>>>0)>>>31)|0}})},function(t,e,i){var n=i(0);n(n.S,"Math",{iaddh:function(t,e,i,n){var r=t>>>0,o=i>>>0;return(e>>>0)+(n>>>0)+((r&o|(r|o)&~(r+o>>>0))>>>31)|0}})},function(t,e,i){var n=i(0),r=i(139),o=i(159);n(n.S,"Math",{fscale:function(t,e,i,n,s){return o(r(t,e,i,n,s))}})},function(t,e,i){var n=i(0),r=180/Math.PI;n(n.S,"Math",{degrees:function(t){return t*r}})},function(t,e,i){var n=i(0);n(n.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(t,e,i){var n=i(0);n(n.S,"Math",{clamp:function(t,e,i){return Math.min(i,Math.max(e,t))}})},function(t,e,i){var n=i(0),r=i(35);n(n.S,"Error",{isError:function(t){return"Error"===r(t)}})},function(t,e,i){var n=i(0);n(n.S,"System",{global:i(5)})},function(t,e,i){var n=i(0);n(n.G,{global:i(5)})},function(t,e,i){i(80)("WeakSet")},function(t,e,i){i(80)("WeakMap")},function(t,e,i){i(80)("Set")},function(t,e,i){i(80)("Map")},function(t,e,i){i(81)("WeakSet")},function(t,e,i){i(81)("WeakMap")},function(t,e,i){i(81)("Set")},function(t,e,i){i(81)("Map")},function(t,e,i){var n=i(0);n(n.P+n.R,"Set",{toJSON:i(141)("Set")})},function(t,e,i){var n=i(0);n(n.P+n.R,"Map",{toJSON:i(141)("Map")})},function(t,e,i){"use strict";var n=i(0),r=i(17),o=i(44),s=i(29),a=i(30).f;i(14)&&n(n.P+i(82),"Object",{__lookupSetter__:function(t){var e,i=r(this),n=o(t,!0);do{if(e=a(i,n))return e.set}while(i=s(i))}})},function(t,e,i){"use strict";var n=i(0),r=i(17),o=i(44),s=i(29),a=i(30).f;i(14)&&n(n.P+i(82),"Object",{__lookupGetter__:function(t){var e,i=r(this),n=o(t,!0);do{if(e=a(i,n))return e.get}while(i=s(i))}})},function(t,e,i){"use strict";var n=i(0),r=i(17),o=i(19),s=i(13);i(14)&&n(n.P+i(82),"Object",{__defineSetter__:function(t,e){s.f(r(this),t,{set:o(e),enumerable:!0,configurable:!0})}})},function(t,e,i){"use strict";var n=i(0),r=i(17),o=i(19),s=i(13);i(14)&&n(n.P+i(82),"Object",{__defineGetter__:function(t,e){s.f(r(this),t,{get:o(e),enumerable:!0,configurable:!0})}})},function(t,e,i){var n=i(0),r=i(142)(!0);n(n.S,"Object",{entries:function(t){return r(t)}})},function(t,e,i){var n=i(0),r=i(142)(!1);n(n.S,"Object",{values:function(t){return r(t)}})},function(t,e,i){var n=i(0),r=i(145),o=i(31),s=i(30),a=i(107);n(n.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,i,n=o(t),u=s.f,c=r(n),h={},l=0;c.length>l;)void 0!==(i=u(n,e=c[l++]))&&a(h,e,i);return h}})},function(t,e,i){i(123)("observable")},function(t,e,i){i(123)("asyncIterator")},function(t,e,i){"use strict";var n=i(0),r=i(43),o=i(12),s=i(90),a=i(88),u=RegExp.prototype,c=function(t,e){this._r=t,this._s=e};i(111)(c,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),n(n.P,"String",{matchAll:function(t){if(r(this),!s(t))throw TypeError(t+" is not a regexp!");var e=String(this),i="flags"in u?String(t.flags):a.call(t),n=new RegExp(t.source,~i.indexOf("g")?i:"g"+i);return n.lastIndex=o(t.lastIndex),new c(n,e)}})},function(t,e,i){"use strict";i(70)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,i){"use strict";i(70)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,i){"use strict";var n=i(0),r=i(143),o=i(85);n(n.P+n.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padEnd:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,i){"use strict";var n=i(0),r=i(143),o=i(85);n(n.P+n.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padStart:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,i){"use strict";var n=i(0),r=i(113)(!0);n(n.P,"String",{at:function(t){return r(this,t)}})},function(t,e,i){"use strict";var n=i(0),r=i(144),o=i(17),s=i(12),a=i(42),u=i(105);n(n.P,"Array",{flatten:function(){var t=arguments[0],e=o(this),i=s(e.length),n=u(e,0);return r(n,e,e,i,0,void 0===t?1:a(t)),n}}),i(50)("flatten")},function(t,e,i){"use strict";var n=i(0),r=i(144),o=i(17),s=i(12),a=i(19),u=i(105);n(n.P,"Array",{flatMap:function(t){var e,i,n=o(this);return a(t),e=s(n.length),i=u(n,0),r(i,n,n,e,0,1,t,arguments[1]),i}}),i(50)("flatMap")},function(t,e,i){"use strict";var n=i(0),r=i(93)(!0);n(n.P,"Array",{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(50)("includes")},function(t,e,i){var n=i(0),r=i(119);r&&n(n.S,"Reflect",{setPrototypeOf:function(t,e){r.check(t,e);try{return r.set(t,e),!0}catch(t){return!1}}})},function(t,e,i){var n=i(13),r=i(30),o=i(29),s=i(32),a=i(0),u=i(66),c=i(3),h=i(7);a(a.S,"Reflect",{set:function t(e,i,a){var l,f,m=arguments.length<4?e:arguments[3],_=r.f(c(e),i);if(!_){if(h(f=o(e)))return t(f,i,a,m);_=u(0)}if(s(_,"value")){if(!1===_.writable||!h(m))return!1;if(l=r.f(m,i)){if(l.get||l.set||!1===l.writable)return!1;l.value=a,n.f(m,i,l)}else n.f(m,i,u(0,a));return!0}return void 0!==_.set&&(_.set.call(m,a),!0)}})},function(t,e,i){var n=i(0),r=i(3),o=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(t){r(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,e,i){var n=i(0);n(n.S,"Reflect",{ownKeys:i(145)})},function(t,e,i){var n=i(0),r=i(3),o=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(t){return r(t),!o||o(t)}})},function(t,e,i){var n=i(0);n(n.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,i){var n=i(0),r=i(29),o=i(3);n(n.S,"Reflect",{getPrototypeOf:function(t){return r(o(t))}})},function(t,e,i){var n=i(30),r=i(0),o=i(3);r(r.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return n.f(o(t),e)}})},function(t,e,i){var n=i(30),r=i(29),o=i(32),s=i(0),a=i(7),u=i(3);s(s.S,"Reflect",{get:function t(e,i){var s,c,h=arguments.length<3?e:arguments[2];return u(e)===h?e[i]:(s=n.f(e,i))?o(s,"value")?s.value:void 0!==s.get?s.get.call(h):void 0:a(c=r(e))?t(c,i,h):void 0}})},function(t,e,i){"use strict";var n=i(0),r=i(3),o=function(t){this._t=r(t),this._i=0;var e,i=this._k=[];for(e in t)i.push(e)};i(111)(o,"Object",function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}}),n(n.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,e,i){var n=i(0),r=i(30).f,o=i(3);n(n.S,"Reflect",{deleteProperty:function(t,e){var i=r(o(t),e);return!(i&&!i.configurable)&&delete t[e]}})},function(t,e,i){var n=i(13),r=i(0),o=i(3),s=i(44);r(r.S+r.F*i(6)(function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,i){o(t),e=s(e,!0),o(i);try{return n.f(t,e,i),!0}catch(t){return!1}}})},function(t,e,i){var n=i(0),r=i(62),o=i(19),s=i(3),a=i(7),u=i(6),c=i(166),h=(i(5).Reflect||{}).construct,l=u(function(){function t(){}return!(h(function(){},[],t)instanceof t)}),f=!u(function(){h(function(){})});n(n.S+n.F*(l||f),"Reflect",{construct:function(t,e){o(t),s(e);var i=arguments.length<3?t:o(arguments[2]);if(f&&!l)return h(t,e,i);if(t==i){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(c.apply(t,n))}var u=i.prototype,m=r(a(u)?u:Object.prototype),_=Function.apply.call(t,m,e);return a(_)?_:m}})},function(t,e,i){var n=i(0),r=i(19),o=i(3),s=(i(5).Reflect||{}).apply,a=Function.apply;n(n.S+n.F*!i(6)(function(){s(function(){})}),"Reflect",{apply:function(t,e,i){var n=r(t),u=o(i);return s?s(n,e,u):a.call(n,e,u)}})},function(t,e,i){i(47)("Float64",8,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(47)("Float32",4,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(47)("Uint32",4,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(47)("Int32",4,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(47)("Uint16",2,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(47)("Int16",2,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(47)("Uint8",1,function(t){return function(e,i,n){return t(this,e,i,n)}},!0)},function(t,e,i){i(47)("Uint8",1,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(47)("Int8",1,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){var n=i(0);n(n.G+n.W+n.F*!i(83).ABV,{DataView:i(99).DataView})},function(t,e,i){"use strict";var n=i(0),r=i(83),o=i(99),s=i(3),a=i(63),u=i(12),c=i(7),h=i(5).ArrayBuffer,l=i(86),f=o.ArrayBuffer,m=o.DataView,_=r.ABV&&h.isView,p=f.prototype.slice,d=r.VIEW;n(n.G+n.W+n.F*(h!==f),{ArrayBuffer:f}),n(n.S+n.F*!r.CONSTR,"ArrayBuffer",{isView:function(t){return _&&_(t)||c(t)&&d in t}}),n(n.P+n.U+n.F*i(6)(function(){return!new f(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(t,e){if(void 0!==p&&void 0===e)return p.call(s(this),t);for(var i=s(this).byteLength,n=a(t,i),r=a(void 0===e?i:e,i),o=new(l(this,f))(u(r-n)),c=new m(this),h=new m(o),_=0;n<r;)h.setUint8(_++,c.getUint8(n++));return o}}),i(60)("ArrayBuffer")},function(t,e,i){"use strict";var n=i(147),r=i(68);i(84)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(r(this,"WeakSet"),t,!0)}},n,!1,!0)},function(t,e,i){"use strict";var n,r,o,s,a=i(51),u=i(5),c=i(36),h=i(73),l=i(0),f=i(7),m=i(19),_=i(59),p=i(58),d=i(86),y=i(102).set,v=i(101)(),g=i(100),b=i(153),x=i(85),w=i(152),A=u.TypeError,S=u.process,B=S&&S.versions,I=B&&B.v8||"",O=u.Promise,P="process"==h(S),M=function(){},E=r=g.f,C=!!function(){try{var t=O.resolve(1),e=(t.constructor={})[i(11)("species")]=function(t){t(M,M)};return(P||"function"==typeof PromiseRejectionEvent)&&t.then(M)instanceof e&&0!==I.indexOf("6.6")&&-1===x.indexOf("Chrome/66")}catch(t){}}(),k=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},T=function(t,e){if(!t._n){t._n=!0;var i=t._c;v(function(){for(var n=t._v,r=1==t._s,o=0,s=function(e){var i,o,s,a=r?e.ok:e.fail,u=e.resolve,c=e.reject,h=e.domain;try{a?(r||(2==t._h&&D(t),t._h=1),!0===a?i=n:(h&&h.enter(),i=a(n),h&&(h.exit(),s=!0)),i===e.promise?c(A("Promise-chain cycle")):(o=k(i))?o.call(i,u,c):u(i)):c(n)}catch(t){h&&!s&&h.exit(),c(t)}};i.length>o;)s(i[o++]);t._c=[],t._n=!1,e&&!t._h&&j(t)})}},j=function(t){y.call(u,function(){var e,i,n,r=t._v,o=z(t);if(o&&(e=b(function(){P?S.emit("unhandledRejection",r,t):(i=u.onunhandledrejection)?i({promise:t,reason:r}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",r)}),t._h=P||z(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},z=function(t){return 1!==t._h&&0===(t._a||t._c).length},D=function(t){y.call(u,function(){var e;P?S.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},L=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),T(e,!0))},R=function(t){var e,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw A("Promise can't be resolved itself");(e=k(t))?v(function(){var n={_w:i,_d:!1};try{e.call(t,c(R,n,1),c(L,n,1))}catch(t){L.call(n,t)}}):(i._v=t,i._s=1,T(i,!1))}catch(t){L.call({_w:i,_d:!1},t)}}};C||(O=function(t){_(this,O,"Promise","_h"),m(t),n.call(this);try{t(c(R,this,1),c(L,this,1))}catch(t){L.call(this,t)}},(n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=i(57)(O.prototype,{then:function(t,e){var i=E(d(this,O));return i.ok="function"!=typeof t||t,i.fail="function"==typeof e&&e,i.domain=P?S.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&T(this,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new n;this.promise=t,this.resolve=c(R,t,1),this.reject=c(L,t,1)},g.f=E=function(t){return t===O||t===s?new o(t):r(t)}),l(l.G+l.W+l.F*!C,{Promise:O}),i(71)(O,"Promise"),i(60)("Promise"),s=i(37).Promise,l(l.S+l.F*!C,"Promise",{reject:function(t){var e=E(this);return(0,e.reject)(t),e.promise}}),l(l.S+l.F*(a||!C),"Promise",{resolve:function(t){return w(a&&this===s?O:this,t)}}),l(l.S+l.F*!(C&&i(89)(function(t){O.all(t).catch(M)})),"Promise",{all:function(t){var e=this,i=E(e),n=i.resolve,r=i.reject,o=b(function(){var i=[],o=0,s=1;p(t,!1,function(t){var a=o++,u=!1;i.push(void 0),s++,e.resolve(t).then(function(t){u||(u=!0,i[a]=t,--s||n(i))},r)}),--s||n(i)});return o.e&&r(o.v),i.promise},race:function(t){var e=this,i=E(e),n=i.reject,r=b(function(){p(t,!1,function(t){e.resolve(t).then(i.resolve,n)})});return r.e&&n(r.v),i.promise}})},function(t,e,i){i(87)("split",2,function(t,e,n){"use strict";var r=i(90),o=n,s=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var a=void 0===/()??/.exec("")[1];n=function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!r(t))return o.call(i,t,e);var n,u,c,h,l,f=[],m=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),_=0,p=void 0===e?4294967295:e>>>0,d=new RegExp(t.source,m+"g");for(a||(n=new RegExp("^"+d.source+"$(?!\\s)",m));(u=d.exec(i))&&!((c=u.index+u[0].length)>_&&(f.push(i.slice(_,u.index)),!a&&u.length>1&&u[0].replace(n,function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(u[l]=void 0)}),u.length>1&&u.index<i.length&&s.apply(f,u.slice(1)),h=u[0].length,_=c,f.length>=p));)d.lastIndex===u.index&&d.lastIndex++;return _===i.length?!h&&d.test("")||f.push(""):f.push(i.slice(_)),f.length>p?f.slice(0,p):f}}else"0".split(void 0,0).length&&(n=function(t,e){return void 0===t&&0===e?[]:o.call(this,t,e)});return[function(i,r){var o=t(this),s=void 0==i?void 0:i[e];return void 0!==s?s.call(i,o,r):n.call(String(o),i,r)},n]})},function(t,e,i){i(87)("search",1,function(t,e,i){return[function(i){"use strict";var n=t(this),r=void 0==i?void 0:i[e];return void 0!==r?r.call(i,n):new RegExp(i)[e](String(n))},i]})},function(t,e,i){i(87)("replace",2,function(t,e,i){return[function(n,r){"use strict";var o=t(this),s=void 0==n?void 0:n[e];return void 0!==s?s.call(n,o,r):i.call(String(o),n,r)},i]})},function(t,e,i){i(87)("match",1,function(t,e,i){return[function(i){"use strict";var n=t(this),r=void 0==i?void 0:i[e];return void 0!==r?r.call(i,n):new RegExp(i)[e](String(n))},i]})},function(t,e,i){"use strict";i(154);var n=i(3),r=i(88),o=i(14),s=/./.toString,a=function(t){i(27)(RegExp.prototype,"toString",t,!0)};i(6)(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?a(function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?r.call(t):void 0)}):"toString"!=s.name&&a(function(){return s.call(this)})},function(t,e,i){var n=i(5),r=i(117),o=i(13).f,s=i(61).f,a=i(90),u=i(88),c=n.RegExp,h=c,l=c.prototype,f=/a/g,m=/a/g,_=new c(f)!==f;if(i(14)&&(!_||i(6)(function(){return m[i(11)("match")]=!1,c(f)!=f||c(m)==m||"/a/i"!=c(f,"i")}))){c=function(t,e){var i=this instanceof c,n=a(t),o=void 0===e;return!i&&n&&t.constructor===c&&o?t:r(_?new h(n&&!o?t.source:t,e):h((n=t instanceof c)?t.source:t,n&&o?u.call(t):e),i?this:l,c)};for(var p=function(t){t in c||o(c,t,{configurable:!0,get:function(){return h[t]},set:function(e){h[t]=e}})},d=s(h),y=0;d.length>y;)p(d[y++]);l.constructor=c,c.prototype=l,i(27)(n,"RegExp",c)}i(60)("RegExp")},function(t,e,i){i(60)("Array")},function(t,e,i){"use strict";var n=i(0),r=i(40)(6),o="findIndex",s=!0;o in[]&&Array(1)[o](function(){s=!1}),n(n.P+n.F*s,"Array",{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(50)(o)},function(t,e,i){"use strict";var n=i(0),r=i(40)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),n(n.P+n.F*o,"Array",{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i(50)("find")},function(t,e,i){var n=i(0);n(n.P,"Array",{fill:i(104)}),i(50)("fill")},function(t,e,i){var n=i(0);n(n.P,"Array",{copyWithin:i(156)}),i(50)("copyWithin")},function(t,e,i){"use strict";var n=i(0),r=i(31),o=i(42),s=i(12),a=[].lastIndexOf,u=!!a&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(u||!i(34)(a)),"Array",{lastIndexOf:function(t){if(u)return a.apply(this,arguments)||0;var e=r(this),i=s(e.length),n=i-1;for(arguments.length>1&&(n=Math.min(n,o(arguments[1]))),n<0&&(n=i+n);n>=0;n--)if(n in e&&e[n]===t)return n||0;return-1}})},function(t,e,i){"use strict";var n=i(0),r=i(93)(!1),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(s||!i(34)(o)),"Array",{indexOf:function(t){return s?o.apply(this,arguments)||0:r(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(0),r=i(157);n(n.P+n.F*!i(34)([].reduceRight,!0),"Array",{reduceRight:function(t){return r(this,t,arguments.length,arguments[1],!0)}})},function(t,e,i){"use strict";var n=i(0),r=i(157);n(n.P+n.F*!i(34)([].reduce,!0),"Array",{reduce:function(t){return r(this,t,arguments.length,arguments[1],!1)}})},function(t,e,i){"use strict";var n=i(0),r=i(40)(4);n(n.P+n.F*!i(34)([].every,!0),"Array",{every:function(t){return r(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(0),r=i(40)(3);n(n.P+n.F*!i(34)([].some,!0),"Array",{some:function(t){return r(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(0),r=i(40)(2);n(n.P+n.F*!i(34)([].filter,!0),"Array",{filter:function(t){return r(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(0),r=i(40)(1);n(n.P+n.F*!i(34)([].map,!0),"Array",{map:function(t){return r(this,t,arguments[1])}})},function(t,e,i){var n=i(7),r=i(91),o=i(11)("species");t.exports=function(t){var e;return r(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!r(e.prototype)||(e=void 0),n(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,i){"use strict";var n=i(0),r=i(40)(0),o=i(34)([].forEach,!0);n(n.P+n.F*!o,"Array",{forEach:function(t){return r(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(0),r=i(19),o=i(17),s=i(6),a=[].sort,u=[1,2,3];n(n.P+n.F*(s(function(){u.sort(void 0)})||!s(function(){u.sort(null)})||!i(34)(a)),"Array",{sort:function(t){return void 0===t?a.call(o(this)):a.call(o(this),r(t))}})},function(t,e,i){"use strict";var n=i(0),r=i(120),o=i(35),s=i(63),a=i(12),u=[].slice;n(n.P+n.F*i(6)(function(){r&&u.call(r)}),"Array",{slice:function(t,e){var i=a(this.length),n=o(this);if(e=void 0===e?i:e,"Array"==n)return u.call(this,t,e);for(var r=s(t,i),c=s(e,i),h=a(c-r),l=new Array(h),f=0;f<h;f++)l[f]="String"==n?this.charAt(r+f):this[r+f];return l}})},function(t,e,i){"use strict";var n=i(0),r=i(31),o=[].join;n(n.P+n.F*(i(75)!=Object||!i(34)(o)),"Array",{join:function(t){return o.call(r(this),void 0===t?",":t)}})},function(t,e,i){"use strict";var n=i(0),r=i(107);n(n.S+n.F*i(6)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,i=new("function"==typeof this?this:Array)(e);e>t;)r(i,t,arguments[t++]);return i.length=e,i}})},function(t,e,i){"use strict";var n=i(36),r=i(0),o=i(17),s=i(158),a=i(108),u=i(12),c=i(107),h=i(106);r(r.S+r.F*!i(89)(function(t){Array.from(t)}),"Array",{from:function(t){var e,i,r,l,f=o(t),m="function"==typeof this?this:Array,_=arguments.length,p=_>1?arguments[1]:void 0,d=void 0!==p,y=0,v=h(f);if(d&&(p=n(p,_>2?arguments[2]:void 0,2)),void 0==v||m==Array&&a(v))for(i=new m(e=u(f.length));e>y;y++)c(i,y,d?p(f[y],y):f[y]);else for(l=v.call(f),i=new m;!(r=l.next()).done;y++)c(i,y,d?s(l,p,[r.value,y],!0):r.value);return i.length=y,i}})},function(t,e,i){var n=i(0);n(n.S,"Array",{isArray:i(91)})},function(t,e,i){"use strict";var n=i(3),r=i(44);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return r(n(this),"number"!=t)}},function(t,e,i){var n=i(11)("toPrimitive"),r=Date.prototype;n in r||i(28)(r,n,i(326))},function(t,e,i){var n=Date.prototype,r=n.toString,o=n.getTime;new Date(NaN)+""!="Invalid Date"&&i(27)(n,"toString",function(){var t=o.call(this);return t==t?r.call(this):"Invalid Date"})},function(t,e,i){"use strict";var n=i(6),r=Date.prototype.getTime,o=Date.prototype.toISOString,s=function(t){return t>9?t:"0"+t};t.exports=n(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!n(function(){o.call(new Date(NaN))})?function(){if(!isFinite(r.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),i=t.getUTCMilliseconds(),n=e<0?"-":e>9999?"+":"";return n+("00000"+Math.abs(e)).slice(n?-6:-4)+"-"+s(t.getUTCMonth()+1)+"-"+s(t.getUTCDate())+"T"+s(t.getUTCHours())+":"+s(t.getUTCMinutes())+":"+s(t.getUTCSeconds())+"."+(i>99?i:"0"+s(i))+"Z"}:o},function(t,e,i){var n=i(0),r=i(329);n(n.P+n.F*(Date.prototype.toISOString!==r),"Date",{toISOString:r})},function(t,e,i){"use strict";var n=i(0),r=i(17),o=i(44);n(n.P+n.F*i(6)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=r(this),i=o(e);return"number"!=typeof i||isFinite(i)?e.toISOString():null}})},function(t,e,i){var n=i(0);n(n.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,i){"use strict";i(26)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,i){"use strict";i(26)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,i){"use strict";i(26)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,i){"use strict";i(26)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,i){"use strict";i(26)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(t,e,i){"use strict";i(26)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,i){"use strict";i(26)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(t,e,i){"use strict";i(26)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(t,e,i){"use strict";i(26)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,i){"use strict";i(26)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,i){"use strict";i(26)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,i){"use strict";i(26)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,i){"use strict";i(26)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(t,e,i){"use strict";var n=i(0),r=i(12),o=i(110),s="".startsWith;n(n.P+n.F*i(109)("startsWith"),"String",{startsWith:function(t){var e=o(this,t,"startsWith"),i=r(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return s?s.call(e,n,i):e.slice(i,i+n.length)===n}})},function(t,e,i){var n=i(0);n(n.P,"String",{repeat:i(116)})},function(t,e,i){"use strict";var n=i(0),r=i(110);n(n.P+n.F*i(109)("includes"),"String",{includes:function(t){return!!~r(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,i){"use strict";var n=i(0),r=i(12),o=i(110),s="".endsWith;n(n.P+n.F*i(109)("endsWith"),"String",{endsWith:function(t){var e=o(this,t,"endsWith"),i=arguments.length>1?arguments[1]:void 0,n=r(e.length),a=void 0===i?n:Math.min(r(i),n),u=String(t);return s?s.call(e,u,a):e.slice(a-u.length,a)===u}})},function(t,e,i){"use strict";var n=i(0),r=i(113)(!1);n(n.P,"String",{codePointAt:function(t){return r(this,t)}})},function(t,e,i){"use strict";var n=i(113)(!0);i(112)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})})},function(t,e,i){"use strict";i(70)("trim",function(t){return function(){return t(this,3)}})},function(t,e,i){var n=i(0),r=i(31),o=i(12);n(n.S,"String",{raw:function(t){for(var e=r(t.raw),i=o(e.length),n=arguments.length,s=[],a=0;i>a;)s.push(String(e[a++])),a<n&&s.push(String(arguments[a]));return s.join("")}})},function(t,e,i){var n=i(0),r=i(63),o=String.fromCharCode,s=String.fromCodePoint;n(n.S+n.F*(!!s&&1!=s.length),"String",{fromCodePoint:function(t){for(var e,i=[],n=arguments.length,s=0;n>s;){if(e=+arguments[s++],r(e,1114111)!==e)throw RangeError(e+" is not a valid code point");i.push(e<65536?o(e):o(55296+((e-=65536)>>10),e%1024+56320))}return i.join("")}})},function(t,e,i){var n=i(0);n(n.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,i){var n=i(0),r=i(114),o=Math.exp;n(n.S,"Math",{tanh:function(t){var e=r(t=+t),i=r(-t);return e==1/0?1:i==1/0?-1:(e-i)/(o(t)+o(-t))}})},function(t,e,i){var n=i(0),r=i(114),o=Math.exp;n(n.S+n.F*i(6)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(r(t)-r(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,e,i){var n=i(0);n(n.S,"Math",{sign:i(115)})},function(t,e,i){var n=i(0);n(n.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,i){var n=i(0);n(n.S,"Math",{log1p:i(160)})},function(t,e,i){var n=i(0);n(n.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,i){var n=i(0),r=Math.imul;n(n.S+n.F*i(6)(function(){return-5!=r(4294967295,5)||2!=r.length}),"Math",{imul:function(t,e){var i=+t,n=+e,r=65535&i,o=65535&n;return 0|r*o+((65535&i>>>16)*o+r*(65535&n>>>16)<<16>>>0)}})},function(t,e,i){var n=i(0),r=Math.abs;n(n.S,"Math",{hypot:function(t,e){for(var i,n,o=0,s=0,a=arguments.length,u=0;s<a;)u<(i=r(arguments[s++]))?(o=o*(n=u/i)*n+1,u=i):o+=i>0?(n=i/u)*n:i;return u===1/0?1/0:u*Math.sqrt(o)}})},function(t,e,i){var n=i(0);n(n.S,"Math",{fround:i(159)})},function(t,e,i){var n=i(0),r=i(114);n(n.S+n.F*(r!=Math.expm1),"Math",{expm1:r})},function(t,e,i){var n=i(0),r=Math.exp;n(n.S,"Math",{cosh:function(t){return(r(t=+t)+r(-t))/2}})},function(t,e,i){var n=i(0);n(n.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,i){var n=i(0),r=i(115);n(n.S,"Math",{cbrt:function(t){return r(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,i){var n=i(0),r=Math.atanh;n(n.S+n.F*!(r&&1/r(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,i){var n=i(0),r=Math.asinh;n(n.S+n.F*!(r&&1/r(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},function(t,e,i){var n=i(0),r=i(160),o=Math.sqrt,s=Math.acosh;n(n.S+n.F*!(s&&710==Math.floor(s(Number.MAX_VALUE))&&s(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:r(t-1+o(t-1)*o(t+1))}})},function(t,e,i){var n=i(0),r=i(164);n(n.S+n.F*(Number.parseInt!=r),"Number",{parseInt:r})},function(t,e,i){var n=i(0),r=i(163);n(n.S+n.F*(Number.parseFloat!=r),"Number",{parseFloat:r})},function(t,e,i){var n=i(0);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,i){var n=i(0);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,i){var n=i(0),r=i(161),o=Math.abs;n(n.S,"Number",{isSafeInteger:function(t){return r(t)&&o(t)<=9007199254740991}})},function(t,e,i){var n=i(0);n(n.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,i){var n=i(0);n(n.S,"Number",{isInteger:i(161)})},function(t,e,i){var n=i(0),r=i(5).isFinite;n(n.S,"Number",{isFinite:function(t){return"number"==typeof t&&r(t)}})},function(t,e,i){var n=i(0);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,i){"use strict";var n=i(0),r=i(6),o=i(162),s=1..toPrecision;n(n.P+n.F*(r(function(){return"1"!==s.call(1,void 0)})||!r(function(){s.call({})})),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?s.call(e):s.call(e,t)}})},function(t,e,i){"use strict";var n=i(0),r=i(42),o=i(162),s=i(116),a=1..toFixed,u=Math.floor,c=[0,0,0,0,0,0],h="Number.toFixed: incorrect invocation!",l=function(t,e){for(var i=-1,n=e;++i<6;)n+=t*c[i],c[i]=n%1e7,n=u(n/1e7)},f=function(t){for(var e=6,i=0;--e>=0;)i+=c[e],c[e]=u(i/t),i=i%t*1e7},m=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==c[t]){var i=String(c[t]);e=""===e?i:e+s.call("0",7-i.length)+i}return e},_=function(t,e,i){return 0===e?i:e%2==1?_(t,e-1,i*t):_(t*t,e/2,i)};n(n.P+n.F*(!!a&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!i(6)(function(){a.call({})})),"Number",{toFixed:function(t){var e,i,n,a,u=o(this,h),c=r(t),p="",d="0";if(c<0||c>20)throw RangeError(h);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(p="-",u=-u),u>1e-21)if(i=(e=function(t){for(var e=0,i=t;i>=4096;)e+=12,i/=4096;for(;i>=2;)e+=1,i/=2;return e}(u*_(2,69,1))-69)<0?u*_(2,-e,1):u/_(2,e,1),i*=4503599627370496,(e=52-e)>0){for(l(0,i),n=c;n>=7;)l(1e7,0),n-=7;for(l(_(10,n,1),0),n=e-1;n>=23;)f(1<<23),n-=23;f(1<<n),l(1,1),f(2),d=m()}else l(0,i),l(1<<-e,0),d=m()+s.call("0",c);return d=c>0?p+((a=d.length)<=c?"0."+s.call("0",c-a)+d:d.slice(0,a-c)+"."+d.slice(a-c)):p+d}})},function(t,e,i){"use strict";var n=i(5),r=i(32),o=i(35),s=i(117),a=i(44),u=i(6),c=i(61).f,h=i(30).f,l=i(13).f,f=i(70).trim,m=n.Number,_=m,p=m.prototype,d="Number"==o(i(62)(p)),y="trim"in String.prototype,v=function(t){var e=a(t,!1);if("string"==typeof e&&e.length>2){var i,n,r,o=(e=y?e.trim():f(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(i=e.charCodeAt(2))||120===i)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+e}for(var s,u=e.slice(2),c=0,h=u.length;c<h;c++)if((s=u.charCodeAt(c))<48||s>r)return NaN;return parseInt(u,n)}}return+e};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof m&&(d?u(function(){p.valueOf.call(i)}):"Number"!=o(i))?s(new _(v(e)),i,m):v(e)};for(var g,b=i(14)?c(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;b.length>x;x++)r(_,g=b[x])&&!r(m,g)&&l(m,g,h(_,g));m.prototype=p,p.constructor=m,i(27)(n,"Number",m)}},function(t,e,i){var n=i(0),r=i(163);n(n.G+n.F*(parseFloat!=r),{parseFloat:r})},function(t,e,i){var n=i(0),r=i(164);n(n.G+n.F*(parseInt!=r),{parseInt:r})},function(t,e,i){"use strict";var n=i(7),r=i(29),o=i(11)("hasInstance"),s=Function.prototype;o in s||i(13).f(s,o,{value:function(t){if("function"!=typeof this||!n(t))return!1;if(!n(this.prototype))return t instanceof this;for(;t=r(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,i){var n=i(13).f,r=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in r||i(14)&&n(r,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,e,i){var n=i(0);n(n.P,"Function",{bind:i(166)})},function(t,e,i){"use strict";var n=i(73),r={};r[i(11)("toStringTag")]="z",r+""!="[object z]"&&i(27)(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},function(t,e,i){var n=i(0);n(n.S,"Object",{setPrototypeOf:i(119).set})},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,i){var n=i(0);n(n.S,"Object",{is:i(391)})},function(t,e,i){var n=i(0);n(n.S+n.F,"Object",{assign:i(167)})},function(t,e,i){var n=i(7);i(41)("isExtensible",function(t){return function(e){return!!n(e)&&(!t||t(e))}})},function(t,e,i){var n=i(7);i(41)("isSealed",function(t){return function(e){return!n(e)||!!t&&t(e)}})},function(t,e,i){var n=i(7);i(41)("isFrozen",function(t){return function(e){return!n(e)||!!t&&t(e)}})},function(t,e,i){var n=i(7),r=i(52).onFreeze;i(41)("preventExtensions",function(t){return function(e){return t&&n(e)?t(r(e)):e}})},function(t,e,i){var n=i(7),r=i(52).onFreeze;i(41)("seal",function(t){return function(e){return t&&n(e)?t(r(e)):e}})},function(t,e,i){var n=i(7),r=i(52).onFreeze;i(41)("freeze",function(t){return function(e){return t&&n(e)?t(r(e)):e}})},function(t,e,i){i(41)("getOwnPropertyNames",function(){return i(168).f})},function(t,e,i){var n=i(17),r=i(64);i(41)("keys",function(){return function(t){return r(n(t))}})},function(t,e,i){var n=i(17),r=i(29);i(41)("getPrototypeOf",function(){return function(t){return r(n(t))}})},function(t,e,i){var n=i(31),r=i(30).f;i(41)("getOwnPropertyDescriptor",function(){return function(t,e){return r(n(t),e)}})},function(t,e,i){var n=i(0);n(n.S+n.F*!i(14),"Object",{defineProperties:i(169)})},function(t,e,i){var n=i(0);n(n.S+n.F*!i(14),"Object",{defineProperty:i(13).f})},function(t,e,i){var n=i(0);n(n.S,"Object",{create:i(62)})},function(t,e,i){var n=i(64),r=i(92),o=i(74);t.exports=function(t){var e=n(t),i=r.f;if(i)for(var s,a=i(t),u=o.f,c=0;a.length>c;)u.call(t,s=a[c++])&&e.push(s);return e}},function(t,e,i){"use strict";var n=i(5),r=i(32),o=i(14),s=i(0),a=i(27),u=i(52).KEY,c=i(6),h=i(94),l=i(71),f=i(65),m=i(11),_=i(171),p=i(123),d=i(407),y=i(91),v=i(3),g=i(7),b=i(31),x=i(44),w=i(66),A=i(62),S=i(168),B=i(30),I=i(13),O=i(64),P=B.f,M=I.f,E=S.f,C=n.Symbol,k=n.JSON,T=k&&k.stringify,j=m("_hidden"),z=m("toPrimitive"),D={}.propertyIsEnumerable,L=h("symbol-registry"),R=h("symbols"),F=h("op-symbols"),q=Object.prototype,V="function"==typeof C,N=n.QObject,U=!N||!N.prototype||!N.prototype.findChild,G=o&&c(function(){return 7!=A(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a})?function(t,e,i){var n=P(q,e);n&&delete q[e],M(t,e,i),n&&t!==q&&M(q,e,n)}:M,J=function(t){var e=R[t]=A(C.prototype);return e._k=t,e},W=V&&"symbol"==typeof C.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof C},Y=function(t,e,i){return t===q&&Y(F,e,i),v(t),e=x(e,!0),v(i),r(R,e)?(i.enumerable?(r(t,j)&&t[j][e]&&(t[j][e]=!1),i=A(i,{enumerable:w(0,!1)})):(r(t,j)||M(t,j,w(1,{})),t[j][e]=!0),G(t,e,i)):M(t,e,i)},H=function(t,e){v(t);for(var i,n=d(e=b(e)),r=0,o=n.length;o>r;)Y(t,i=n[r++],e[i]);return t},K=function(t){var e=D.call(this,t=x(t,!0));return!(this===q&&r(R,t)&&!r(F,t))&&(!(e||!r(this,t)||!r(R,t)||r(this,j)&&this[j][t])||e)},Z=function(t,e){if(t=b(t),e=x(e,!0),t!==q||!r(R,e)||r(F,e)){var i=P(t,e);return!i||!r(R,e)||r(t,j)&&t[j][e]||(i.enumerable=!0),i}},X=function(t){for(var e,i=E(b(t)),n=[],o=0;i.length>o;)r(R,e=i[o++])||e==j||e==u||n.push(e);return n},$=function(t){for(var e,i=t===q,n=E(i?F:b(t)),o=[],s=0;n.length>s;)!r(R,e=n[s++])||i&&!r(q,e)||o.push(R[e]);return o};V||(a((C=function(){if(this instanceof C)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(i){this===q&&e.call(F,i),r(this,j)&&r(this[j],t)&&(this[j][t]=!1),G(this,t,w(1,i))};return o&&U&&G(q,t,{configurable:!0,set:e}),J(t)}).prototype,"toString",function(){return this._k}),B.f=Z,I.f=Y,i(61).f=S.f=X,i(74).f=K,i(92).f=$,o&&!i(51)&&a(q,"propertyIsEnumerable",K,!0),_.f=function(t){return J(m(t))}),s(s.G+s.W+s.F*!V,{Symbol:C});for(var Q="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;Q.length>tt;)m(Q[tt++]);for(var et=O(m.store),it=0;et.length>it;)p(et[it++]);s(s.S+s.F*!V,"Symbol",{for:function(t){return r(L,t+="")?L[t]:L[t]=C(t)},keyFor:function(t){if(!W(t))throw TypeError(t+" is not a symbol!");for(var e in L)if(L[e]===t)return e},useSetter:function(){U=!0},useSimple:function(){U=!1}}),s(s.S+s.F*!V,"Object",{create:function(t,e){return void 0===e?A(t):H(A(t),e)},defineProperty:Y,defineProperties:H,getOwnPropertyDescriptor:Z,getOwnPropertyNames:X,getOwnPropertySymbols:$}),k&&s(s.S+s.F*(!V||c(function(){var t=C();return"[null]"!=T([t])||"{}"!=T({a:t})||"{}"!=T(Object(t))})),"JSON",{stringify:function(t){for(var e,i,n=[t],r=1;arguments.length>r;)n.push(arguments[r++]);if(i=e=n[1],(g(e)||void 0!==t)&&!W(t))return y(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!W(e))return e}),n[1]=e,T.apply(k,n)}}),C.prototype[z]||i(28)(C.prototype,z,C.prototype.valueOf),l(C,"Symbol"),l(Math,"Math",!0),l(n.JSON,"JSON",!0)},function(t,e,i){i(408),i(406),i(405),i(404),i(403),i(402),i(401),i(400),i(399),i(398),i(397),i(396),i(395),i(394),i(393),i(392),i(390),i(389),i(388),i(387),i(386),i(385),i(384),i(383),i(382),i(381),i(380),i(379),i(378),i(377),i(376),i(375),i(374),i(373),i(372),i(371),i(370),i(369),i(368),i(367),i(366),i(365),i(364),i(363),i(362),i(361),i(360),i(359),i(358),i(357),i(356),i(355),i(354),i(353),i(352),i(351),i(350),i(349),i(348),i(347),i(346),i(345),i(344),i(343),i(342),i(341),i(340),i(339),i(338),i(337),i(336),i(335),i(334),i(333),i(332),i(331),i(330),i(328),i(327),i(325),i(324),i(323),i(322),i(321),i(320),i(319),i(317),i(316),i(315),i(314),i(313),i(312),i(311),i(310),i(309),i(308),i(307),i(306),i(305),i(103),i(304),i(303),i(154),i(302),i(301),i(300),i(299),i(298),i(151),i(149),i(148),i(297),i(296),i(295),i(294),i(293),i(292),i(291),i(290),i(289),i(288),i(287),i(286),i(285),i(284),i(283),i(282),i(281),i(280),i(279),i(278),i(277),i(276),i(275),i(274),i(273),i(272),i(271),i(270),i(269),i(268),i(267),i(266),i(265),i(264),i(263),i(262),i(261),i(260),i(259),i(258),i(257),i(256),i(255),i(254),i(253),i(252),i(251),i(250),i(249),i(248),i(247),i(246),i(245),i(244),i(243),i(242),i(241),i(240),i(239),i(238),i(237),i(236),i(235),i(234),i(233),i(232),i(231),i(230),i(229),i(228),i(227),i(226),i(225),i(224),i(223),i(222),i(221),i(220),i(219),i(218),i(217),i(216),i(215),i(214),i(213),t.exports=i(37)},function(t,e,i){"use strict";(function(t){if(i(409),i(212),i(211),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var e="defineProperty";function n(t,i,n){t[i]||Object[e](t,i,{writable:!0,configurable:!0,value:n})}n(String.prototype,"padLeft","".padStart),n(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&n(Array,t,Function.call.bind([][t]))})}).call(this,i(173))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i(410);var n=x(i(208)),r=x(i(79)),o=x(i(98)),s=x(i(49)),a=x(i(56)),u=x(i(178)),c=x(i(177)),h=x(i(176)),l=x(i(39)),f=x(i(136)),m=x(i(133)),_=x(i(125)),p=x(i(138)),d=x(i(134)),y=x(i(135)),v=x(i(175)),g=x(i(174)),b=i(45);function x(t){return t&&t.__esModule?t:{default:t}}u.default.initialize(),c.default.initialize(),h.default.initialize();var w={};w.Game=n.default,w.GameObject=r.default,w.GameObjectContainer=o.default,w.Point=s.default,w.Shape=a.default,w.RegularPolygon=u.default,w.Circle=c.default,w.Rectangle=h.default,w.Component=l.default,w.createComponent=l.default.createComponent,w.Collider=f.default,w.PhysicsBody=m.default,w.ShapeRenderer=_.default,w.StateController=p.default,w.State=p.default.State,w.Generator=d.default,w.DragHandler=y.default,w.UI=v.default,w.Loader=g.default,w.deepSerialize=b.deepSerialize,w.deserializeVariables=b.deserializeVariables,w.replaceVariables=b.replaceVariables,w.setProperties=b.setProperties,w.loadFunctions=b.loadFunctions,w.setProperties=b.setProperties,n.default.classes={},Object.keys(w).forEach(function(t){n.default.classes[t]=w[t]}),document.os2d=w,console.log(document),e.default=w}]);
//# sourceMappingURL=index.js.map